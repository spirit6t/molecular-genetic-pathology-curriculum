/*! For license information please see main.d86cc9ac.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,n)=>{var r=n(853),i=n(43),s=n(950);function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(l(e)!==e)throw Error(o(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var h=Object.assign,f=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),x=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),T=Symbol.for("react.lazy");Symbol.for("react.scope");var C=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var N=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var I=Symbol.iterator;function A(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=I&&e[I]||e["@@iterator"])?e:null}var R=Symbol.for("react.client.reference");function P(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===R?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case g:return"Fragment";case v:return"Profiler";case y:return"StrictMode";case _:return"Suspense";case k:return"SuspenseList";case C:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case m:return"Portal";case x:return(e.displayName||"Context")+".Provider";case w:return(e._context.displayName||"Context")+".Consumer";case S:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case E:return null!==(t=e.displayName||null)?t:P(e.type)||"Memo";case T:t=e._payload,e=e._init;try{return P(e(t))}catch(Ut){}}return null}var D=Array.isArray,O=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L={pending:!1,data:null,method:null,action:null},M=[],F=-1;function U(e){return{current:e}}function V(e){0>F||(e.current=M[F],M[F]=null,F--)}function z(e,t){F++,M[F]=e.current,e.current=t}var B=U(null),q=U(null),H=U(null),G=U(null);function W(e,t){switch(z(H,t),z(q,e),z(B,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?sd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=od(t=sd(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}V(B),z(B,e)}function K(){V(B),V(q),V(H)}function Q(e){null!==e.memoizedState&&z(G,e);var t=B.current,n=od(t,e.type);t!==n&&(z(q,e),z(B,n))}function Y(e){q.current===e&&(V(B),V(q)),G.current===e&&(V(G),Yd._currentValue=L)}var J=Object.prototype.hasOwnProperty,X=r.unstable_scheduleCallback,$=r.unstable_cancelCallback,Z=r.unstable_shouldYield,ee=r.unstable_requestPaint,te=r.unstable_now,ne=r.unstable_getCurrentPriorityLevel,re=r.unstable_ImmediatePriority,ie=r.unstable_UserBlockingPriority,se=r.unstable_NormalPriority,oe=r.unstable_LowPriority,ae=r.unstable_IdlePriority,le=r.log,ce=r.unstable_setDisableYieldValue,ue=null,de=null;function he(e){if("function"===typeof le&&ce(e),de&&"function"===typeof de.setStrictMode)try{de.setStrictMode(ue,e)}catch(t){}}var fe=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(pe(e)/me|0)|0},pe=Math.log,me=Math.LN2;var ge=256,ye=4194304;function ve(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function be(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var i=0,s=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var a=134217727&r;return 0!==a?0!==(r=a&~s)?i=ve(r):0!==(o&=a)?i=ve(o):n||0!==(n=a&~e)&&(i=ve(n)):0!==(a=r&~s)?i=ve(a):0!==o?i=ve(o):n||0!==(n=r&~e)&&(i=ve(n)),0===i?0:0!==t&&t!==i&&0===(t&s)&&((s=i&-i)>=(n=t&-t)||32===s&&0!==(4194048&n))?t:i}function we(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function xe(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Se(){var e=ge;return 0===(4194048&(ge<<=1))&&(ge=256),e}function _e(){var e=ye;return 0===(62914560&(ye<<=1))&&(ye=4194304),e}function ke(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ee(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Te(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-fe(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function Ce(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-fe(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function Ne(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ie(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Ae(){var e=j.p;return 0!==e?e:void 0===(e=window.event)?32:uh(e.type)}var Re=Math.random().toString(36).slice(2),Pe="__reactFiber$"+Re,De="__reactProps$"+Re,Oe="__reactContainer$"+Re,je="__reactEvents$"+Re,Le="__reactListeners$"+Re,Me="__reactHandles$"+Re,Fe="__reactResources$"+Re,Ue="__reactMarker$"+Re;function Ve(e){delete e[Pe],delete e[De],delete e[je],delete e[Le],delete e[Me]}function ze(e){var t=e[Pe];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Oe]||n[Pe]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=wd(e);null!==e;){if(n=e[Pe])return n;e=wd(e)}return t}n=(e=n).parentNode}return null}function Be(e){if(e=e[Pe]||e[Oe]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function qe(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(o(33))}function He(e){var t=e[Fe];return t||(t=e[Fe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ge(e){e[Ue]=!0}var We=new Set,Ke={};function Qe(e,t){Ye(e,t),Ye(e+"Capture",t)}function Ye(e,t){for(Ke[e]=t,e=0;e<t.length;e++)We.add(t[e])}var Je,Xe,$e=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ze={},et={};function tt(e,t,n){if(i=t,J.call(et,i)||!J.call(Ze,i)&&($e.test(i)?et[i]=!0:(Ze[i]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var i}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function rt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function it(e){if(void 0===Je)try{throw Error()}catch(Ut){var t=Ut.stack.trim().match(/\n( *(at )?)/);Je=t&&t[1]||"",Xe=-1<Ut.stack.indexOf("\n    at")?" (<anonymous>)":-1<Ut.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Je+e+Xe}var st=!1;function ot(e,t){if(!e||st)return"";st=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(Ut){var r=Ut}Reflect.construct(e,[],n)}else{try{n.call()}catch(i){r=i}e.call(n.prototype)}}else{try{throw Error()}catch(s){r=s}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(o){if(o&&r&&"string"===typeof o.stack)return[o.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=r.DetermineComponentFrameRoot(),o=s[0],a=s[1];if(o&&a){var l=o.split("\n"),c=a.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===c.length)for(r=l.length-1,i=c.length-1;1<=r&&0<=i&&l[r]!==c[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==c[i]){if(1!==r||1!==i)do{if(r--,0>--i||l[r]!==c[i]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=i);break}}}finally{st=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?it(n):""}function at(e){switch(e.tag){case 26:case 27:case 5:return it(e.type);case 16:return it("Lazy");case 13:return it("Suspense");case 19:return it("SuspenseList");case 0:case 15:return ot(e.type,!1);case 11:return ot(e.type.render,!1);case 1:return ot(e.type,!0);case 31:return it("Activity");default:return""}}function lt(e){try{var t="";do{t+=at(e),e=e.return}while(e);return t}catch(Ut){return"\nError generating stack: "+Ut.message+"\n"+Ut.stack}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ut(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function dt(e){e._valueTracker||(e._valueTracker=function(e){var t=ut(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ut(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function ft(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var pt=/[\n"\\]/g;function mt(e){return e.replace(pt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function gt(e,t,n,r,i,s,o,a){e.name="",null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.type=o:e.removeAttribute("type"),null!=t?"number"===o?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==o&&"reset"!==o||e.removeAttribute("value"),null!=t?vt(e,o,ct(t)):null!=n?vt(e,o,ct(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=s&&(e.defaultChecked=!!s),null!=i&&(e.checked=i&&"function"!==typeof i&&"symbol"!==typeof i),null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.name=""+ct(a):e.removeAttribute("name")}function yt(e,t,n,r,i,s,o,a){if(null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.type=s),null!=t||null!=n){if(!("submit"!==s&&"reset"!==s||void 0!==t&&null!==t))return;n=null!=n?""+ct(n):"",t=null!=t?""+ct(t):n,a||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:i)&&"symbol"!==typeof r&&!!r,e.checked=a?e.checked:!!r,e.defaultChecked=!!r,null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o&&(e.name=o)}function vt(e,t,n){"number"===t&&ft(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function bt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ct(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function wt(e,t,n){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ct(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function xt(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(o(92));if(D(r)){if(1<r.length)throw Error(o(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ct(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function St(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var _t=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function kt(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||_t.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Et(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(o(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var i in t)r=t[i],t.hasOwnProperty(i)&&n[i]!==r&&kt(e,i,r)}else for(var s in t)t.hasOwnProperty(s)&&kt(e,s,t[s])}function Tt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ct=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Nt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function It(e){return Nt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var At=null;function Rt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Pt=null,Dt=null;function Ot(e){var t=Be(e);if(t&&(e=t.stateNode)){var n=e[De]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+mt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=r[De]||null;if(!i)throw Error(o(90));gt(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&ht(r)}break e;case"textarea":wt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&bt(e,!!n.multiple,t,!1)}}}var jt=!1;function Lt(e,t,n){if(jt)return e(t,n);jt=!0;try{return e(t)}finally{if(jt=!1,(null!==Pt||null!==Dt)&&(Bc(),Pt&&(t=Pt,e=Dt,Dt=Pt=null,Ot(t),e)))for(t=0;t<e.length;t++)Ot(e[t])}}function Mt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[De]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ft=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Vt=!1;if(Ft)try{var zt={};Object.defineProperty(zt,"passive",{get:function(){Vt=!0}}),window.addEventListener("test",zt,zt),window.removeEventListener("test",zt,zt)}catch(Oh){Vt=!1}var Bt=null,qt=null,Ht=null;function Gt(){if(Ht)return Ht;var e,t,n=qt,r=n.length,i="value"in Bt?Bt.value:Bt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Ht=i.slice(e,1<t?1-t:void 0)}function Wt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Kt(){return!0}function Qt(){return!1}function Yt(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Kt:Qt,this.isPropagationStopped=Qt,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Kt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Kt)},persist:function(){},isPersistent:Kt}),t}var Jt,Xt,$t,Zt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},en=Yt(Zt),tn=h({},Zt,{view:0,detail:0}),nn=Yt(tn),rn=h({},tn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==$t&&($t&&"mousemove"===e.type?(Jt=e.screenX-$t.screenX,Xt=e.screenY-$t.screenY):Xt=Jt=0,$t=e),Jt)},movementY:function(e){return"movementY"in e?e.movementY:Xt}}),sn=Yt(rn),on=Yt(h({},rn,{dataTransfer:0})),an=Yt(h({},tn,{relatedTarget:0})),ln=Yt(h({},Zt,{animationName:0,elapsedTime:0,pseudoElement:0})),cn=Yt(h({},Zt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),un=Yt(h({},Zt,{data:0})),dn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=fn[e])&&!!t[e]}function mn(){return pn}var gn=Yt(h({},tn,{key:function(e){if(e.key){var t=dn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Wt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?hn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mn,charCode:function(e){return"keypress"===e.type?Wt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Wt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),yn=Yt(h({},rn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),vn=Yt(h({},tn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mn})),bn=Yt(h({},Zt,{propertyName:0,elapsedTime:0,pseudoElement:0})),wn=Yt(h({},rn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),xn=Yt(h({},Zt,{newState:0,oldState:0})),Sn=[9,13,27,32],_n=Ft&&"CompositionEvent"in window,kn=null;Ft&&"documentMode"in document&&(kn=document.documentMode);var En=Ft&&"TextEvent"in window&&!kn,Tn=Ft&&(!_n||kn&&8<kn&&11>=kn),Cn=String.fromCharCode(32),Nn=!1;function In(e,t){switch(e){case"keyup":return-1!==Sn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function An(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Rn=!1;var Pn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Pn[e.type]:"textarea"===t}function On(e,t,n,r){Pt?Dt?Dt.push(r):Dt=[r]:Pt=r,0<(t=Gu(t,"onChange")).length&&(n=new en("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var jn=null,Ln=null;function Mn(e){Mu(e,0)}function Fn(e){if(ht(qe(e)))return e}function Un(e,t){if("change"===e)return t}var Vn=!1;if(Ft){var zn;if(Ft){var Bn="oninput"in document;if(!Bn){var qn=document.createElement("div");qn.setAttribute("oninput","return;"),Bn="function"===typeof qn.oninput}zn=Bn}else zn=!1;Vn=zn&&(!document.documentMode||9<document.documentMode)}function Hn(){jn&&(jn.detachEvent("onpropertychange",Gn),Ln=jn=null)}function Gn(e){if("value"===e.propertyName&&Fn(Ln)){var t=[];On(t,Ln,e,Rt(e)),Lt(Mn,t)}}function Wn(e,t,n){"focusin"===e?(Hn(),Ln=n,(jn=t).attachEvent("onpropertychange",Gn)):"focusout"===e&&Hn()}function Kn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Fn(Ln)}function Qn(e,t){if("click"===e)return Fn(t)}function Yn(e,t){if("input"===e||"change"===e)return Fn(t)}var Jn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Xn(e,t){if(Jn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!J.call(t,i)||!Jn(e[i],t[i]))return!1}return!0}function $n(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Zn(e,t){var n,r=$n(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=$n(r)}}function er(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?er(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function tr(e){for(var t=ft((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=ft((e=t.contentWindow).document)}return t}function nr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var rr=Ft&&"documentMode"in document&&11>=document.documentMode,ir=null,sr=null,or=null,ar=!1;function lr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ar||null==ir||ir!==ft(r)||("selectionStart"in(r=ir)&&nr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},or&&Xn(or,r)||(or=r,0<(r=Gu(sr,"onSelect")).length&&(t=new en("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ir)))}function cr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ur={animationend:cr("Animation","AnimationEnd"),animationiteration:cr("Animation","AnimationIteration"),animationstart:cr("Animation","AnimationStart"),transitionrun:cr("Transition","TransitionRun"),transitionstart:cr("Transition","TransitionStart"),transitioncancel:cr("Transition","TransitionCancel"),transitionend:cr("Transition","TransitionEnd")},dr={},hr={};function fr(e){if(dr[e])return dr[e];if(!ur[e])return e;var t,n=ur[e];for(t in n)if(n.hasOwnProperty(t)&&t in hr)return dr[e]=n[t];return e}Ft&&(hr=document.createElement("div").style,"AnimationEvent"in window||(delete ur.animationend.animation,delete ur.animationiteration.animation,delete ur.animationstart.animation),"TransitionEvent"in window||delete ur.transitionend.transition);var pr=fr("animationend"),mr=fr("animationiteration"),gr=fr("animationstart"),yr=fr("transitionrun"),vr=fr("transitionstart"),br=fr("transitioncancel"),wr=fr("transitionend"),xr=new Map,Sr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _r(e,t){xr.set(e,t),Qe(t,[e])}Sr.push("scrollEnd");var kr=new WeakMap;function Er(e,t){if("object"===typeof e&&null!==e){var n=kr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:lt(t)},kr.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var Tr=[],Cr=0,Nr=0;function Ir(){for(var e=Cr,t=Nr=Cr=0;t<e;){var n=Tr[t];Tr[t++]=null;var r=Tr[t];Tr[t++]=null;var i=Tr[t];Tr[t++]=null;var s=Tr[t];if(Tr[t++]=null,null!==r&&null!==i){var o=r.pending;null===o?i.next=i:(i.next=o.next,o.next=i),r.pending=i}0!==s&&Dr(n,i,s)}}function Ar(e,t,n,r){Tr[Cr++]=e,Tr[Cr++]=t,Tr[Cr++]=n,Tr[Cr++]=r,Nr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Rr(e,t,n,r){return Ar(e,t,n,r),Or(e)}function Pr(e,t){return Ar(e,null,null,t),Or(e)}function Dr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,s=e.return;null!==s;)s.childLanes|=n,null!==(r=s.alternate)&&(r.childLanes|=n),22===s.tag&&(null===(e=s.stateNode)||1&e._visibility||(i=!0)),e=s,s=s.return;return 3===e.tag?(s=e.stateNode,i&&null!==t&&(i=31-fe(n),null===(r=(e=s.hiddenUpdates)[i])?e[i]=[t]:r.push(t),t.lane=536870912|n),s):null}function Or(e){if(50<Dc)throw Dc=0,Oc=null,Error(o(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var jr={};function Lr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mr(e,t,n,r){return new Lr(e,t,n,r)}function Fr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ur(e,t){var n=e.alternate;return null===n?((n=Mr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Vr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function zr(e,t,n,r,i,s){var a=0;if(r=e,"function"===typeof e)Fr(e)&&(a=1);else if("string"===typeof e)a=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,B.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case C:return(e=Mr(31,n,t,i)).elementType=C,e.lanes=s,e;case g:return Br(n.children,i,s,t);case y:a=8,i|=24;break;case v:return(e=Mr(12,n,t,2|i)).elementType=v,e.lanes=s,e;case _:return(e=Mr(13,n,t,i)).elementType=_,e.lanes=s,e;case k:return(e=Mr(19,n,t,i)).elementType=k,e.lanes=s,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case b:case x:a=10;break e;case w:a=9;break e;case S:a=11;break e;case E:a=14;break e;case T:a=16,r=null;break e}a=29,n=Error(o(130,null===e?"null":typeof e,"")),r=null}return(t=Mr(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Br(e,t,n,r){return(e=Mr(7,e,r,t)).lanes=n,e}function qr(e,t,n){return(e=Mr(6,e,null,t)).lanes=n,e}function Hr(e,t,n){return(t=Mr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Gr=[],Wr=0,Kr=null,Qr=0,Yr=[],Jr=0,Xr=null,$r=1,Zr="";function ei(e,t){Gr[Wr++]=Qr,Gr[Wr++]=Kr,Kr=e,Qr=t}function ti(e,t,n){Yr[Jr++]=$r,Yr[Jr++]=Zr,Yr[Jr++]=Xr,Xr=e;var r=$r;e=Zr;var i=32-fe(r)-1;r&=~(1<<i),n+=1;var s=32-fe(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$r=1<<32-fe(t)+i|n<<i|r,Zr=s+e}else $r=1<<s|n<<i|r,Zr=e}function ni(e){null!==e.return&&(ei(e,1),ti(e,1,0))}function ri(e){for(;e===Kr;)Kr=Gr[--Wr],Gr[Wr]=null,Qr=Gr[--Wr],Gr[Wr]=null;for(;e===Xr;)Xr=Yr[--Jr],Yr[Jr]=null,Zr=Yr[--Jr],Yr[Jr]=null,$r=Yr[--Jr],Yr[Jr]=null}var ii=null,si=null,oi=!1,ai=null,li=!1,ci=Error(o(519));function ui(e){throw gi(Er(Error(o(418,"")),e)),ci}function di(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Pe]=e,t[De]=r,n){case"dialog":Fu("cancel",t),Fu("close",t);break;case"iframe":case"object":case"embed":Fu("load",t);break;case"video":case"audio":for(n=0;n<ju.length;n++)Fu(ju[n],t);break;case"source":Fu("error",t);break;case"img":case"image":case"link":Fu("error",t),Fu("load",t);break;case"details":Fu("toggle",t);break;case"input":Fu("invalid",t),yt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),dt(t);break;case"select":Fu("invalid",t);break;case"textarea":Fu("invalid",t),xt(t,r.value,r.defaultValue,r.children),dt(t)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Xu(t.textContent,n)?(null!=r.popover&&(Fu("beforetoggle",t),Fu("toggle",t)),null!=r.onScroll&&Fu("scroll",t),null!=r.onScrollEnd&&Fu("scrollend",t),null!=r.onClick&&(t.onclick=$u),t=!0):t=!1,t||ui(e)}function hi(e){for(ii=e.return;ii;)switch(ii.tag){case 5:case 13:return void(li=!1);case 27:case 3:return void(li=!0);default:ii=ii.return}}function fi(e){if(e!==ii)return!1;if(!oi)return hi(e),oi=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||ad(e.type,e.memoizedProps)),t=!t),t&&si&&ui(e),hi(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){si=vd(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}si=null}}else 27===n?(n=si,pd(e.type)?(e=bd,bd=null,si=e):si=n):si=ii?vd(e.stateNode.nextSibling):null;return!0}function pi(){si=ii=null,oi=!1}function mi(){var e=ai;return null!==e&&(null===wc?wc=e:wc.push.apply(wc,e),ai=null),e}function gi(e){null===ai?ai=[e]:ai.push(e)}var yi=U(null),vi=null,bi=null;function wi(e,t,n){z(yi,t._currentValue),t._currentValue=n}function xi(e){e._currentValue=yi.current,V(yi)}function Si(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function _i(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var s=i.dependencies;if(null!==s){var a=i.child;s=s.firstContext;e:for(;null!==s;){var l=s;s=i;for(var c=0;c<t.length;c++)if(l.context===t[c]){s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Si(s.return,n,e),r||(a=null);break e}s=l.next}}else if(18===i.tag){if(null===(a=i.return))throw Error(o(341));a.lanes|=n,null!==(s=a.alternate)&&(s.lanes|=n),Si(a,n,e),a=null}else a=i.child;if(null!==a)a.return=i;else for(a=i;null!==a;){if(a===e){a=null;break}if(null!==(i=a.sibling)){i.return=a.return,a=i;break}a=a.return}i=a}}function ki(e,t,n,r){e=null;for(var i=t,s=!1;null!==i;){if(!s)if(0!==(524288&i.flags))s=!0;else if(0!==(262144&i.flags))break;if(10===i.tag){var a=i.alternate;if(null===a)throw Error(o(387));if(null!==(a=a.memoizedProps)){var l=i.type;Jn(i.pendingProps.value,a.value)||(null!==e?e.push(l):e=[l])}}else if(i===G.current){if(null===(a=i.alternate))throw Error(o(387));a.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(Yd):e=[Yd])}i=i.return}null!==e&&_i(t,e,n,r),t.flags|=262144}function Ei(e){for(e=e.firstContext;null!==e;){if(!Jn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ti(e){vi=e,bi=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ci(e){return Ii(vi,e)}function Ni(e,t){return null===vi&&Ti(e),Ii(e,t)}function Ii(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===bi){if(null===e)throw Error(o(308));bi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else bi=bi.next=t;return n}var Ai="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Ri=r.unstable_scheduleCallback,Pi=r.unstable_NormalPriority,Di={$$typeof:x,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Oi(){return{controller:new Ai,data:new Map,refCount:0}}function ji(e){e.refCount--,0===e.refCount&&Ri(Pi,function(){e.controller.abort()})}var Li=null,Mi=0,Fi=0,Ui=null;function Vi(){if(0===--Mi&&null!==Li){null!==Ui&&(Ui.status="fulfilled");var e=Li;Li=null,Fi=0,Ui=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var zi=O.S;O.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Li){var n=Li=[];Mi=0,Fi=Au(),Ui={status:"pending",value:void 0,then:function(e){n.push(e)}}}Mi++,t.then(Vi,Vi)}(0,t),null!==zi&&zi(e,t)};var Bi=U(null);function qi(){var e=Bi.current;return null!==e?e:ic.pooledCache}function Hi(e,t){z(Bi,null===t?Bi.current:t.pool)}function Gi(){var e=qi();return null===e?null:{parent:Di._currentValue,pool:e}}var Wi=Error(o(460)),Ki=Error(o(474)),Qi=Error(o(542)),Yi={then:function(){}};function Ji(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Xi(){}function $i(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Xi,Xi),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw ts(e=t.reason),e;default:if("string"===typeof t.status)t.then(Xi,Xi);else{if(null!==(e=ic)&&100<e.shellSuspendCounter)throw Error(o(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ts(e=t.reason),e}throw Zi=t,Wi}}var Zi=null;function es(){if(null===Zi)throw Error(o(459));var e=Zi;return Zi=null,e}function ts(e){if(e===Wi||e===Qi)throw Error(o(483))}var ns=!1;function rs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function is(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ss(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function os(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&rc)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=Or(e),Dr(e,null,n),t}return Ar(e,r,t,n),Or(e)}function as(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ce(e,n)}}function ls(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var cs=!1;function us(){if(cs){if(null!==Ui)throw Ui}}function ds(e,t,n,r){cs=!1;var i=e.updateQueue;ns=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(o=0,u=c=l=null,a=s;;){var f=-536870913&a.lane,p=f!==a.lane;if(p?(oc&f)===f:(r&f)===f){0!==f&&f===Fi&&(cs=!0),null!==u&&(u=u.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var m=e,g=a;f=t;var y=n;switch(g.tag){case 1:if("function"===typeof(m=g.payload)){d=m.call(y,d,f);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(f="function"===typeof(m=g.payload)?m.call(y,d,f):m)||void 0===f)break e;d=h({},d,f);break e;case 2:ns=!0}}null!==(f=a.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=i.callbacks)?i.callbacks=[f]:p.push(f))}else p={lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,o|=f;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(p=a).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null===s&&(i.shared.lanes=0),pc|=o,e.lanes=o,e.memoizedState=d}}function hs(e,t){if("function"!==typeof e)throw Error(o(191,e));e.call(t)}function fs(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)hs(n[e],t)}var ps=U(null),ms=U(0);function gs(e,t){z(ms,e=hc),z(ps,t),hc=e|t.baseLanes}function ys(){z(ms,hc),z(ps,ps.current)}function vs(){hc=ms.current,V(ps),V(ms)}var bs=0,ws=null,xs=null,Ss=null,_s=!1,ks=!1,Es=!1,Ts=0,Cs=0,Ns=null,Is=0;function As(){throw Error(o(321))}function Rs(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Jn(e[n],t[n]))return!1;return!0}function Ps(e,t,n,r,i,s){return bs=s,ws=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,O.H=null===e||null===e.memoizedState?Ko:Qo,Es=!1,s=n(r,i),Es=!1,ks&&(s=Os(t,n,r,i)),Ds(e),s}function Ds(e){O.H=Wo;var t=null!==xs&&null!==xs.next;if(bs=0,Ss=xs=ws=null,_s=!1,Cs=0,Ns=null,t)throw Error(o(300));null===e||Na||null!==(e=e.dependencies)&&Ei(e)&&(Na=!0)}function Os(e,t,n,r){ws=e;var i=0;do{if(ks&&(Ns=null),Cs=0,ks=!1,25<=i)throw Error(o(301));if(i+=1,Ss=xs=null,null!=e.updateQueue){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,null!=s.memoCache&&(s.memoCache.index=0)}O.H=Yo,s=t(n,r)}while(ks);return s}function js(){var e=O.H,t=e.useState()[0];return t="function"===typeof t.then?zs(t):t,e=e.useState()[0],(null!==xs?xs.memoizedState:null)!==e&&(ws.flags|=1024),t}function Ls(){var e=0!==Ts;return Ts=0,e}function Ms(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Fs(e){if(_s){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}_s=!1}bs=0,Ss=xs=ws=null,ks=!1,Cs=Ts=0,Ns=null}function Us(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ss?ws.memoizedState=Ss=e:Ss=Ss.next=e,Ss}function Vs(){if(null===xs){var e=ws.alternate;e=null!==e?e.memoizedState:null}else e=xs.next;var t=null===Ss?ws.memoizedState:Ss.next;if(null!==t)Ss=t,xs=e;else{if(null===e){if(null===ws.alternate)throw Error(o(467));throw Error(o(310))}e={memoizedState:(xs=e).memoizedState,baseState:xs.baseState,baseQueue:xs.baseQueue,queue:xs.queue,next:null},null===Ss?ws.memoizedState=Ss=e:Ss=Ss.next=e}return Ss}function zs(e){var t=Cs;return Cs+=1,null===Ns&&(Ns=[]),e=$i(Ns,e,t),t=ws,null===(null===Ss?t.memoizedState:Ss.next)&&(t=t.alternate,O.H=null===t||null===t.memoizedState?Ko:Qo),e}function Bs(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return zs(e);if(e.$$typeof===x)return Ci(e)}throw Error(o(438,String(e)))}function qs(e){var t=null,n=ws.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=ws.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},ws.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=N;return t.index++,n}function Hs(e,t){return"function"===typeof t?t(e):t}function Gs(e){return Ws(Vs(),xs,e)}function Ws(e,t,n){var r=e.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=n;var i=e.baseQueue,s=r.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}t.baseQueue=i=s,r.pending=null}if(s=e.baseState,null===i)e.memoizedState=s;else{var l=a=null,c=null,u=t=i.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(oc&h)===h:(bs&h)===h){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Fi&&(d=!0);else{if((bs&f)===f){u=u.next,f===Fi&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,a=s):c=c.next=h,ws.lanes|=f,pc|=f}h=u.action,Es&&n(s,h),s=u.hasEagerState?u.eagerState:n(s,h)}else f={lane:h,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,a=s):c=c.next=f,ws.lanes|=h,pc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?a=s:c.next=l,!Jn(s,e.memoizedState)&&(Na=!0,d&&null!==(n=Ui)))throw n;e.memoizedState=s,e.baseState=a,e.baseQueue=c,r.lastRenderedState=s}return null===i&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Ks(e){var t=Vs(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);Jn(s,t.memoizedState)||(Na=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Qs(e,t,n){var r=ws,i=Vs(),s=oi;if(s){if(void 0===n)throw Error(o(407));n=n()}else n=t();var a=!Jn((xs||i).memoizedState,n);if(a&&(i.memoizedState=n,Na=!0),i=i.queue,vo(2048,8,Xs.bind(null,r,i,e),[e]),i.getSnapshot!==t||a||null!==Ss&&1&Ss.memoizedState.tag){if(r.flags|=2048,mo(9,{destroy:void 0,resource:void 0},Js.bind(null,r,i,n,t),null),null===ic)throw Error(o(349));s||0!==(124&bs)||Ys(r,t,n)}return n}function Ys(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ws.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},ws.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Js(e,t,n,r){t.value=n,t.getSnapshot=r,$s(t)&&Zs(e)}function Xs(e,t,n){return n(function(){$s(t)&&Zs(e)})}function $s(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Jn(e,n)}catch(r){return!0}}function Zs(e){var t=Pr(e,2);null!==t&&Mc(t,e,2)}function eo(e){var t=Us();if("function"===typeof e){var n=e;if(e=n(),Es){he(!0);try{n()}finally{he(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:e},t}function to(e,t,n,r){return e.baseState=n,Ws(e,xs,"function"===typeof r?r:Hs)}function no(e,t,n,r,i){if(qo(e))throw Error(o(485));if(null!==(e=t.action)){var s={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){s.listeners.push(e)}};null!==O.T?n(!0):s.isTransition=!1,r(s),null===(n=t.pending)?(s.next=t.pending=s,ro(t,s)):(s.next=n.next,t.pending=n.next=s)}}function ro(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var s=O.T,o={};O.T=o;try{var a=n(i,r),l=O.S;null!==l&&l(o,a),io(e,t,a)}catch(c){oo(e,t,c)}finally{O.T=s}}else try{io(e,t,s=n(i,r))}catch(u){oo(e,t,u)}}function io(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){so(e,t,n)},function(n){return oo(e,t,n)}):so(e,t,n)}function so(e,t,n){t.status="fulfilled",t.value=n,ao(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,ro(e,n)))}function oo(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,ao(t),t=t.next}while(t!==r)}e.action=null}function ao(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function lo(e,t){return t}function co(e,t){if(oi){var n=ic.formState;if(null!==n){e:{var r=ws;if(oi){if(si){t:{for(var i=si,s=li;8!==i.nodeType;){if(!s){i=null;break t}if(null===(i=vd(i.nextSibling))){i=null;break t}}i="F!"===(s=i.data)||"F"===s?i:null}if(i){si=vd(i.nextSibling),r="F!"===i.data;break e}}ui(r)}r=!1}r&&(t=n[0])}}return(n=Us()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:lo,lastRenderedState:t},n.queue=r,n=Vo.bind(null,ws,r),r.dispatch=n,r=eo(!1),s=Bo.bind(null,ws,!1,r.queue),i={state:t,dispatch:null,action:e,pending:null},(r=Us()).queue=i,n=no.bind(null,ws,i,s,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function uo(e){return ho(Vs(),xs,e)}function ho(e,t,n){if(t=Ws(e,t,lo)[0],e=Gs(Hs)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=zs(t)}catch(Ut){if(Ut===Wi)throw Qi;throw Ut}else r=t;var i=(t=Vs()).queue,s=i.dispatch;return n!==t.memoizedState&&(ws.flags|=2048,mo(9,{destroy:void 0,resource:void 0},fo.bind(null,i,n),null)),[r,s,e]}function fo(e,t){e.action=t}function po(e){var t=Vs(),n=xs;if(null!==n)return ho(t,n,e);Vs(),t=t.memoizedState;var r=(n=Vs()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function mo(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=ws.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},ws.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function go(){return Vs().memoizedState}function yo(e,t,n,r){var i=Us();r=void 0===r?null:r,ws.flags|=e,i.memoizedState=mo(1|t,{destroy:void 0,resource:void 0},n,r)}function vo(e,t,n,r){var i=Vs();r=void 0===r?null:r;var s=i.memoizedState.inst;null!==xs&&null!==r&&Rs(r,xs.memoizedState.deps)?i.memoizedState=mo(t,s,n,r):(ws.flags|=e,i.memoizedState=mo(1|t,s,n,r))}function bo(e,t){yo(8390656,8,e,t)}function wo(e,t){vo(2048,8,e,t)}function xo(e,t){return vo(4,2,e,t)}function So(e,t){return vo(4,4,e,t)}function _o(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function ko(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,vo(4,4,_o.bind(null,t,e),n)}function Eo(){}function To(e,t){var n=Vs();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&Rs(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Co(e,t){var n=Vs();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&Rs(t,r[1]))return r[0];if(r=e(),Es){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r}function No(e,t,n){return void 0===n||0!==(1073741824&bs)?e.memoizedState=t:(e.memoizedState=n,e=Lc(),ws.lanes|=e,pc|=e,n)}function Io(e,t,n,r){return Jn(n,t)?n:null!==ps.current?(e=No(e,n,r),Jn(e,t)||(Na=!0),e):0===(42&bs)?(Na=!0,e.memoizedState=n):(e=Lc(),ws.lanes|=e,pc|=e,t)}function Ao(e,t,n,r,i){var s=j.p;j.p=0!==s&&8>s?s:8;var o=O.T,a={};O.T=a,Bo(e,!1,t,n);try{var l=i(),c=O.S;if(null!==c&&c(a,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)zo(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(l,r),jc());else zo(e,t,r,jc())}catch(u){zo(e,t,{then:function(){},status:"rejected",reason:u},jc())}finally{j.p=s,O.T=o}}function Ro(){}function Po(e,t,n,r){if(5!==e.tag)throw Error(o(476));var i=Do(e).queue;Ao(e,i,t,L,null===n?Ro:function(){return Oo(e),n(r)})}function Do(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:L,baseState:L,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:L},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hs,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Oo(e){zo(e,Do(e).next.queue,{},jc())}function jo(){return Ci(Yd)}function Lo(){return Vs().memoizedState}function Mo(){return Vs().memoizedState}function Fo(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=jc(),r=os(t,e=ss(n),n);return null!==r&&(Mc(r,t,n),as(r,t,n)),t={cache:Oi()},void(e.payload=t)}t=t.return}}function Uo(e,t,n){var r=jc();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},qo(e)?Ho(t,n):null!==(n=Rr(e,t,n,r))&&(Mc(n,e,r),Go(n,t,r))}function Vo(e,t,n){zo(e,t,n,jc())}function zo(e,t,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(qo(e))Ho(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Jn(a,o))return Ar(e,t,i,0),null===ic&&Ir(),!1}catch(l){}if(null!==(n=Rr(e,t,i,r)))return Mc(n,e,r),Go(n,t,r),!0}return!1}function Bo(e,t,n,r){if(r={lane:2,revertLane:Au(),action:r,hasEagerState:!1,eagerState:null,next:null},qo(e)){if(t)throw Error(o(479))}else null!==(t=Rr(e,n,r,2))&&Mc(t,e,2)}function qo(e){var t=e.alternate;return e===ws||null!==t&&t===ws}function Ho(e,t){ks=_s=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Go(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ce(e,n)}}var Wo={readContext:Ci,use:Bs,useCallback:As,useContext:As,useEffect:As,useImperativeHandle:As,useLayoutEffect:As,useInsertionEffect:As,useMemo:As,useReducer:As,useRef:As,useState:As,useDebugValue:As,useDeferredValue:As,useTransition:As,useSyncExternalStore:As,useId:As,useHostTransitionStatus:As,useFormState:As,useActionState:As,useOptimistic:As,useMemoCache:As,useCacheRefresh:As},Ko={readContext:Ci,use:Bs,useCallback:function(e,t){return Us().memoizedState=[e,void 0===t?null:t],e},useContext:Ci,useEffect:bo,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,yo(4194308,4,_o.bind(null,t,e),n)},useLayoutEffect:function(e,t){return yo(4194308,4,e,t)},useInsertionEffect:function(e,t){yo(4,2,e,t)},useMemo:function(e,t){var n=Us();t=void 0===t?null:t;var r=e();if(Es){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Us();if(void 0!==n){var i=n(t);if(Es){he(!0);try{n(t)}finally{he(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=Uo.bind(null,ws,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Us().memoizedState=e},useState:function(e){var t=(e=eo(e)).queue,n=Vo.bind(null,ws,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Eo,useDeferredValue:function(e,t){return No(Us(),e,t)},useTransition:function(){var e=eo(!1);return e=Ao.bind(null,ws,e.queue,!0,!1),Us().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=ws,i=Us();if(oi){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===ic)throw Error(o(349));0!==(124&oc)||Ys(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,bo(Xs.bind(null,r,s,e),[e]),r.flags|=2048,mo(9,{destroy:void 0,resource:void 0},Js.bind(null,r,s,n,t),null),n},useId:function(){var e=Us(),t=ic.identifierPrefix;if(oi){var n=Zr;t="\xab"+t+"R"+(n=($r&~(1<<32-fe($r)-1)).toString(32)+n),0<(n=Ts++)&&(t+="H"+n.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(n=Is++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:jo,useFormState:co,useActionState:co,useOptimistic:function(e){var t=Us();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Bo.bind(null,ws,!0,n),n.dispatch=t,[e,t]},useMemoCache:qs,useCacheRefresh:function(){return Us().memoizedState=Fo.bind(null,ws)}},Qo={readContext:Ci,use:Bs,useCallback:To,useContext:Ci,useEffect:wo,useImperativeHandle:ko,useInsertionEffect:xo,useLayoutEffect:So,useMemo:Co,useReducer:Gs,useRef:go,useState:function(){return Gs(Hs)},useDebugValue:Eo,useDeferredValue:function(e,t){return Io(Vs(),xs.memoizedState,e,t)},useTransition:function(){var e=Gs(Hs)[0],t=Vs().memoizedState;return["boolean"===typeof e?e:zs(e),t]},useSyncExternalStore:Qs,useId:Lo,useHostTransitionStatus:jo,useFormState:uo,useActionState:uo,useOptimistic:function(e,t){return to(Vs(),0,e,t)},useMemoCache:qs,useCacheRefresh:Mo},Yo={readContext:Ci,use:Bs,useCallback:To,useContext:Ci,useEffect:wo,useImperativeHandle:ko,useInsertionEffect:xo,useLayoutEffect:So,useMemo:Co,useReducer:Ks,useRef:go,useState:function(){return Ks(Hs)},useDebugValue:Eo,useDeferredValue:function(e,t){var n=Vs();return null===xs?No(n,e,t):Io(n,xs.memoizedState,e,t)},useTransition:function(){var e=Ks(Hs)[0],t=Vs().memoizedState;return["boolean"===typeof e?e:zs(e),t]},useSyncExternalStore:Qs,useId:Lo,useHostTransitionStatus:jo,useFormState:po,useActionState:po,useOptimistic:function(e,t){var n=Vs();return null!==xs?to(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:qs,useCacheRefresh:Mo},Jo=null,Xo=0;function $o(e){var t=Xo;return Xo+=1,null===Jo&&(Jo=[]),$i(Jo,e,t)}function Zo(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function ea(e,t){if(t.$$typeof===f)throw Error(o(525));throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ta(e){return(0,e._init)(e._payload)}function na(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=Ur(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=qr(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===g?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===T&&ta(s)===t.type)?(Zo(t=i(t,n.props),n),t.return=e,t):(Zo(t=zr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Hr(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=Br(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=qr(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case p:return Zo(n=zr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case m:return(t=Hr(t,e.mode,n)).return=e,t;case T:return h(e,t=(0,t._init)(t._payload),n)}if(D(t)||A(t))return(t=Br(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,$o(t),n);if(t.$$typeof===x)return h(e,Ni(e,t),n);ea(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case p:return n.key===i?c(e,t,n,r):null;case m:return n.key===i?u(e,t,n,r):null;case T:return f(e,t,n=(i=n._init)(n._payload),r)}if(D(n)||A(n))return null!==i?null:d(e,t,n,r,null);if("function"===typeof n.then)return f(e,t,$o(n),r);if(n.$$typeof===x)return f(e,t,Ni(e,n),r);ea(e,n)}return null}function y(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case p:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case m:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case T:return y(e,t,n,r=(0,r._init)(r._payload),i)}if(D(r)||A(r))return d(t,e=e.get(n)||null,r,i,null);if("function"===typeof r.then)return y(e,t,n,$o(r),i);if(r.$$typeof===x)return y(e,t,n,Ni(t,r),i);ea(t,r)}return null}function v(l,c,u,d){if("object"===typeof u&&null!==u&&u.type===g&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case p:e:{for(var b=u.key;null!==c;){if(c.key===b){if((b=u.type)===g){if(7===c.tag){n(l,c.sibling),(d=i(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===T&&ta(b)===c.type){n(l,c.sibling),Zo(d=i(c,u.props),u),d.return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===g?((d=Br(u.props.children,l.mode,d,u.key)).return=l,l=d):(Zo(d=zr(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return a(l);case m:e:{for(b=u.key;null!==c;){if(c.key===b){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(d=i(c,u.children||[])).return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}(d=Hr(u,l.mode,d)).return=l,l=d}return a(l);case T:return v(l,c,u=(b=u._init)(u._payload),d)}if(D(u))return function(i,o,a,l){for(var c=null,u=null,d=o,p=o=0,m=null;null!==d&&p<a.length;p++){d.index>p?(m=d,d=null):m=d.sibling;var g=f(i,d,a[p],l);if(null===g){null===d&&(d=m);break}e&&d&&null===g.alternate&&t(i,d),o=s(g,o,p),null===u?c=g:u.sibling=g,u=g,d=m}if(p===a.length)return n(i,d),oi&&ei(i,p),c;if(null===d){for(;p<a.length;p++)null!==(d=h(i,a[p],l))&&(o=s(d,o,p),null===u?c=d:u.sibling=d,u=d);return oi&&ei(i,p),c}for(d=r(d);p<a.length;p++)null!==(m=y(d,i,p,a[p],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?p:m.key),o=s(m,o,p),null===u?c=m:u.sibling=m,u=m);return e&&d.forEach(function(e){return t(i,e)}),oi&&ei(i,p),c}(l,c,u,d);if(A(u)){if("function"!==typeof(b=A(u)))throw Error(o(150));return function(i,a,l,c){if(null==l)throw Error(o(151));for(var u=null,d=null,p=a,m=a=0,g=null,v=l.next();null!==p&&!v.done;m++,v=l.next()){p.index>m?(g=p,p=null):g=p.sibling;var b=f(i,p,v.value,c);if(null===b){null===p&&(p=g);break}e&&p&&null===b.alternate&&t(i,p),a=s(b,a,m),null===d?u=b:d.sibling=b,d=b,p=g}if(v.done)return n(i,p),oi&&ei(i,m),u;if(null===p){for(;!v.done;m++,v=l.next())null!==(v=h(i,v.value,c))&&(a=s(v,a,m),null===d?u=v:d.sibling=v,d=v);return oi&&ei(i,m),u}for(p=r(p);!v.done;m++,v=l.next())null!==(v=y(p,i,m,v.value,c))&&(e&&null!==v.alternate&&p.delete(null===v.key?m:v.key),a=s(v,a,m),null===d?u=v:d.sibling=v,d=v);return e&&p.forEach(function(e){return t(i,e)}),oi&&ei(i,m),u}(l,c,u=b.call(u),d)}if("function"===typeof u.then)return v(l,c,$o(u),d);if(u.$$typeof===x)return v(l,c,Ni(l,u),d);ea(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(d=i(c,u)).return=l,l=d):(n(l,c),(d=qr(u,l.mode,d)).return=l,l=d),a(l)):n(l,c)}return function(e,t,n,r){try{Xo=0;var i=v(e,t,n,r);return Jo=null,i}catch(Ut){if(Ut===Wi||Ut===Qi)throw Ut;var s=Mr(29,Ut,null,e.mode);return s.lanes=r,s.return=e,s}}}var ra=na(!0),ia=na(!1),sa=U(null),oa=null;function aa(e){var t=e.alternate;z(da,1&da.current),z(sa,e),null===oa&&(null===t||null!==ps.current||null!==t.memoizedState)&&(oa=e)}function la(e){if(22===e.tag){if(z(da,da.current),z(sa,e),null===oa){var t=e.alternate;null!==t&&null!==t.memoizedState&&(oa=e)}}else ca()}function ca(){z(da,da.current),z(sa,sa.current)}function ua(e){V(sa),oa===e&&(oa=null),V(da)}var da=U(0);function ha(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||yd(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function fa(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:h({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var pa={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=jc(),i=ss(r);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=os(e,i,r))&&(Mc(t,e,r),as(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=jc(),i=ss(r);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=os(e,i,r))&&(Mc(t,e,r),as(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=jc(),r=ss(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=os(e,r,n))&&(Mc(t,e,n),as(t,e,n))}};function ma(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!Xn(n,r)||!Xn(i,s))}function ga(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&pa.enqueueReplaceState(t,t.state,null)}function ya(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=h({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}var va="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function ba(e){va(e)}function wa(e){console.error(e)}function xa(e){va(e)}function Sa(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function _a(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function ka(e,t,n){return(n=ss(n)).tag=3,n.payload={element:null},n.callback=function(){Sa(e,t)},n}function Ea(e){return(e=ss(e)).tag=3,e}function Ta(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"===typeof i){var s=r.value;e.payload=function(){return i(s)},e.callback=function(){_a(t,n,r)}}var o=n.stateNode;null!==o&&"function"===typeof o.componentDidCatch&&(e.callback=function(){_a(t,n,r),"function"!==typeof i&&(null===Ec?Ec=new Set([this]):Ec.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Ca=Error(o(461)),Na=!1;function Ia(e,t,n,r){t.child=null===e?ia(t,null,n,r):ra(t,e.child,n,r)}function Aa(e,t,n,r,i){n=n.render;var s=t.ref;if("ref"in r){var o={};for(var a in r)"ref"!==a&&(o[a]=r[a])}else o=r;return Ti(t),r=Ps(e,t,n,o,s,i),a=Ls(),null===e||Na?(oi&&a&&ni(t),t.flags|=1,Ia(e,t,r,i),t.child):(Ms(e,t,i),Ja(e,t,i))}function Ra(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Fr(s)||void 0!==s.defaultProps||null!==n.compare?((e=zr(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Pa(e,t,s,r,i))}if(s=e.child,!Xa(e,i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:Xn)(o,r)&&e.ref===t.ref)return Ja(e,t,i)}return t.flags|=1,(e=Ur(s,r)).ref=t.ref,e.return=t,t.child=e}function Pa(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(Xn(s,r)&&e.ref===t.ref){if(Na=!1,t.pendingProps=r=s,!Xa(e,i))return t.lanes=e.lanes,Ja(e,t,i);0!==(131072&e.flags)&&(Na=!0)}}return La(e,t,n,r,i)}function Da(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(0!==(128&t.flags)){if(r=null!==s?s.baseLanes|n:n,null!==e){for(i=t.child=e.child,s=0;null!==i;)s=s|i.lanes|i.childLanes,i=i.sibling;t.childLanes=s&~r}else t.childLanes=0,t.child=null;return Oa(e,t,r,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,Oa(e,t,null!==s?s.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Hi(0,null!==s?s.cachePool:null),null!==s?gs(t,s):ys(),la(t)}else null!==s?(Hi(0,s.cachePool),gs(t,s),ca(),t.memoizedState=null):(null!==e&&Hi(0,null),ys(),ca());return Ia(e,t,i,n),t.child}function Oa(e,t,n,r){var i=qi();return i=null===i?null:{parent:Di._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&Hi(0,null),ys(),la(t),null!==e&&ki(e,t,r,!0),null}function ja(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(o(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function La(e,t,n,r,i){return Ti(t),n=Ps(e,t,n,r,void 0,i),r=Ls(),null===e||Na?(oi&&r&&ni(t),t.flags|=1,Ia(e,t,n,i),t.child):(Ms(e,t,i),Ja(e,t,i))}function Ma(e,t,n,r,i,s){return Ti(t),t.updateQueue=null,n=Os(t,r,n,i),Ds(e),r=Ls(),null===e||Na?(oi&&r&&ni(t),t.flags|=1,Ia(e,t,n,s),t.child):(Ms(e,t,s),Ja(e,t,s))}function Fa(e,t,n,r,i){if(Ti(t),null===t.stateNode){var s=jr,o=n.contextType;"object"===typeof o&&null!==o&&(s=Ci(o)),s=new n(r,s),t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=pa,t.stateNode=s,s._reactInternals=t,(s=t.stateNode).props=r,s.state=t.memoizedState,s.refs={},rs(t),o=n.contextType,s.context="object"===typeof o&&null!==o?Ci(o):jr,s.state=t.memoizedState,"function"===typeof(o=n.getDerivedStateFromProps)&&(fa(t,n,o,r),s.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(o=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),o!==s.state&&pa.enqueueReplaceState(s,s.state,null),ds(t,r,s,i),us(),s.state=t.memoizedState),"function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){s=t.stateNode;var a=t.memoizedProps,l=ya(n,a);s.props=l;var c=s.context,u=n.contextType;o=jr,"object"===typeof u&&null!==u&&(o=Ci(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof s.getSnapshotBeforeUpdate,a=t.pendingProps!==a,u||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a||c!==o)&&ga(t,s,r,o),ns=!1;var h=t.memoizedState;s.state=h,ds(t,r,s,i),us(),c=t.memoizedState,a||h!==c||ns?("function"===typeof d&&(fa(t,n,d,r),c=t.memoizedState),(l=ns||ma(t,n,l,r,h,c,o))?(u||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),s.props=r,s.state=c,s.context=o,r=l):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,is(e,t),u=ya(n,o=t.memoizedProps),s.props=u,d=t.pendingProps,h=s.context,c=n.contextType,l=jr,"object"===typeof c&&null!==c&&(l=Ci(c)),(c="function"===typeof(a=n.getDerivedStateFromProps)||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==d||h!==l)&&ga(t,s,r,l),ns=!1,h=t.memoizedState,s.state=h,ds(t,r,s,i),us();var f=t.memoizedState;o!==d||h!==f||ns||null!==e&&null!==e.dependencies&&Ei(e.dependencies)?("function"===typeof a&&(fa(t,n,a,r),f=t.memoizedState),(u=ns||ma(t,n,u,r,h,f,l)||null!==e&&null!==e.dependencies&&Ei(e.dependencies))?(c||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=l,r=u):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return s=r,ja(e,t),r=0!==(128&t.flags),s||r?(s=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:s.render(),t.flags|=1,null!==e&&r?(t.child=ra(t,e.child,null,i),t.child=ra(t,null,n,i)):Ia(e,t,n,i),t.memoizedState=s.state,e=t.child):e=Ja(e,t,i),e}function Ua(e,t,n,r){return pi(),t.flags|=256,Ia(e,t,n,r),t.child}var Va={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function za(e){return{baseLanes:e,cachePool:Gi()}}function Ba(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=yc),e}function qa(e,t,n){var r,i=t.pendingProps,s=!1,a=0!==(128&t.flags);if((r=a)||(r=(null===e||null!==e.memoizedState)&&0!==(2&da.current)),r&&(s=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(oi){if(s?aa(t):ca(),oi){var l,c=si;if(l=c){e:{for(l=c,c=li;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=vd(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Xr?{id:$r,overflow:Zr}:null,retryLane:536870912,hydrationErrors:null},(l=Mr(18,null,null,0)).stateNode=c,l.return=t,t.child=l,ii=t,si=null,l=!0):l=!1}l||ui(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return yd(c)?t.lanes=32:t.lanes=536870912,null;ua(t)}return c=i.children,i=i.fallback,s?(ca(),c=Ga({mode:"hidden",children:c},s=t.mode),i=Br(i,s,n,null),c.return=t,i.return=t,c.sibling=i,t.child=c,(s=t.child).memoizedState=za(n),s.childLanes=Ba(e,r,n),t.memoizedState=Va,i):(aa(t),Ha(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(a)256&t.flags?(aa(t),t.flags&=-257,t=Wa(e,t,n)):null!==t.memoizedState?(ca(),t.child=e.child,t.flags|=128,t=null):(ca(),s=i.fallback,c=t.mode,i=Ga({mode:"visible",children:i.children},c),(s=Br(s,c,n,null)).flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,ra(t,e.child,null,n),(i=t.child).memoizedState=za(n),i.childLanes=Ba(e,r,n),t.memoizedState=Va,t=s);else if(aa(t),yd(c)){if(r=c.nextSibling&&c.nextSibling.dataset)var u=r.dgst;r=u,(i=Error(o(419))).stack="",i.digest=r,gi({value:i,source:null,stack:null}),t=Wa(e,t,n)}else if(Na||ki(e,t,n,!1),r=0!==(n&e.childLanes),Na||r){if(null!==(r=ic)&&(0!==(i=0!==((i=0!==(42&(i=n&-n))?1:Ne(i))&(r.suspendedLanes|n))?0:i)&&i!==l.retryLane))throw l.retryLane=i,Pr(e,i),Mc(r,e,i),Ca;"$?"===c.data||Qc(),t=Wa(e,t,n)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,si=vd(c.nextSibling),ii=t,oi=!0,ai=null,li=!1,null!==e&&(Yr[Jr++]=$r,Yr[Jr++]=Zr,Yr[Jr++]=Xr,$r=e.id,Zr=e.overflow,Xr=t),(t=Ha(t,i.children)).flags|=4096);return t}return s?(ca(),s=i.fallback,c=t.mode,u=(l=e.child).sibling,(i=Ur(l,{mode:"hidden",children:i.children})).subtreeFlags=65011712&l.subtreeFlags,null!==u?s=Ur(u,s):(s=Br(s,c,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,null===(c=e.child.memoizedState)?c=za(n):(null!==(l=c.cachePool)?(u=Di._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=Gi(),c={baseLanes:c.baseLanes|n,cachePool:l}),s.memoizedState=c,s.childLanes=Ba(e,r,n),t.memoizedState=Va,i):(aa(t),e=(n=e.child).sibling,(n=Ur(n,{mode:"visible",children:i.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Ha(e,t){return(t=Ga({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Ga(e,t){return(e=Mr(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Wa(e,t,n){return ra(t,e.child,null,n),(e=Ha(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ka(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Si(e.return,t,n)}function Qa(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Ya(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Ia(e,t,r.children,n),0!==(2&(r=da.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ka(e,n,t);else if(19===e.tag)Ka(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(z(da,r),i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ha(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Qa(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ha(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Qa(t,!0,n,null,s);break;case"together":Qa(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ja(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),pc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(ki(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Ur(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ur(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Xa(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Ei(e))}function $a(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Na=!0;else{if(!Xa(e,n)&&0===(128&t.flags))return Na=!1,function(e,t,n){switch(t.tag){case 3:W(t,t.stateNode.containerInfo),wi(0,Di,e.memoizedState.cache),pi();break;case 27:case 5:Q(t);break;case 4:W(t,t.stateNode.containerInfo);break;case 10:wi(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(aa(t),t.flags|=128,null):0!==(n&t.child.childLanes)?qa(e,t,n):(aa(t),null!==(e=Ja(e,t,n))?e.sibling:null);aa(t);break;case 19:var i=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(ki(e,t,n,!1),r=0!==(n&t.childLanes)),i){if(r)return Ya(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),z(da,da.current),r)break;return null;case 22:case 23:return t.lanes=0,Da(e,t,n);case 24:wi(0,Di,e.memoizedState.cache)}return Ja(e,t,n)}(e,t,n);Na=0!==(131072&e.flags)}else Na=!1,oi&&0!==(1048576&t.flags)&&ti(t,Qr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,i=r._init;if(r=i(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((i=r.$$typeof)===S){t.tag=11,t=Aa(null,t,r,e,n);break e}if(i===E){t.tag=14,t=Ra(null,t,r,e,n);break e}}throw t=P(r)||r,Error(o(306,t,""))}Fr(r)?(e=ya(r,e),t.tag=1,t=Fa(null,t,r,e,n)):(t.tag=0,t=La(null,t,r,e,n))}return t;case 0:return La(e,t,t.type,t.pendingProps,n);case 1:return Fa(e,t,r=t.type,i=ya(r,t.pendingProps),n);case 3:e:{if(W(t,t.stateNode.containerInfo),null===e)throw Error(o(387));r=t.pendingProps;var s=t.memoizedState;i=s.element,is(e,t),ds(t,r,null,n);var a=t.memoizedState;if(r=a.cache,wi(0,Di,r),r!==s.cache&&_i(t,[Di],n,!0),us(),r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Ua(e,t,r,n);break e}if(r!==i){gi(i=Er(Error(o(424)),t)),t=Ua(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(si=vd(e.firstChild),ii=t,oi=!0,ai=null,li=!0,n=ia(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pi(),r===i){t=Ja(e,t,n);break e}Ia(e,t,r,n)}t=t.child}return t;case 26:return ja(e,t),null===e?(n=Id(t.type,null,t.pendingProps,null))?t.memoizedState=n:oi||(n=t.type,e=t.pendingProps,(r=id(H.current).createElement(n))[Pe]=t,r[De]=e,td(r,n,e),Ge(r),t.stateNode=r):t.memoizedState=Id(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Q(t),null===e&&oi&&(r=t.stateNode=xd(t.type,t.pendingProps,H.current),ii=t,li=!0,i=si,pd(t.type)?(bd=i,si=vd(r.firstChild)):si=i),Ia(e,t,t.pendingProps.children,n),ja(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&oi&&((i=r=si)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Ue])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(s=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(s!==i.rel||e.getAttribute("href")!==(null==i.href||""===i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((s=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var s=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===s)return e}if(null===(e=vd(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,li))?(t.stateNode=r,ii=t,si=vd(r.firstChild),li=!1,i=!0):i=!1),i||ui(t)),Q(t),i=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,r=s.children,ad(i,s)?r=null:null!==a&&ad(i,a)&&(t.flags|=32),null!==t.memoizedState&&(i=Ps(e,t,js,null,null,n),Yd._currentValue=i),ja(e,t),Ia(e,t,r,n),t.child;case 6:return null===e&&oi&&((e=n=si)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=vd(e.nextSibling)))return null}return e}(n,t.pendingProps,li))?(t.stateNode=n,ii=t,si=null,e=!0):e=!1),e||ui(t)),null;case 13:return qa(e,t,n);case 4:return W(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ra(t,null,r,n):Ia(e,t,r,n),t.child;case 11:return Aa(e,t,t.type,t.pendingProps,n);case 7:return Ia(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ia(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,wi(0,t.type,r.value),Ia(e,t,r.children,n),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,Ti(t),r=r(i=Ci(i)),t.flags|=1,Ia(e,t,r,n),t.child;case 14:return Ra(e,t,t.type,t.pendingProps,n);case 15:return Pa(e,t,t.type,t.pendingProps,n);case 19:return Ya(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},null===e?((n=Ga(r,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Ur(e.child,r)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Da(e,t,n);case 24:return Ti(t),r=Ci(Di),null===e?(null===(i=qi())&&(i=ic,s=Oi(),i.pooledCache=s,s.refCount++,null!==s&&(i.pooledCacheLanes|=n),i=s),t.memoizedState={parent:r,cache:i},rs(t),wi(0,Di,i)):(0!==(e.lanes&n)&&(is(e,t),ds(t,null,null,n),us()),i=e.memoizedState,s=t.memoizedState,i.parent!==r?(i={parent:r,cache:r},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),wi(0,Di,r)):(r=s.cache,wi(0,Di,r),r!==i.cache&&_i(t,[Di],n,!0))),Ia(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function Za(e){e.flags|=4}function el(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!Bd(t)){if(null!==(t=sa.current)&&((4194048&oc)===oc?null!==oa:(62914560&oc)!==oc&&0===(536870912&oc)||t!==oa))throw Zi=Yi,Ki;e.flags|=8192}}function tl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?_e():536870912,e.lanes|=t,vc|=t)}function nl(e,t){if(!oi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function rl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=65011712&i.subtreeFlags,r|=65011712&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function il(e,t,n){var r=t.pendingProps;switch(ri(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return rl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),xi(Di),K(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(fi(t)?Za(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,mi())),rl(t),null;case 26:return n=t.memoizedState,null===e?(Za(t),null!==n?(rl(t),el(t,n)):(rl(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Za(t),rl(t),el(t,n)):(rl(t),t.flags&=-16777217):(e.memoizedProps!==r&&Za(t),rl(t),t.flags&=-16777217),null;case 27:Y(t),n=H.current;var i=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Za(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return rl(t),null}e=B.current,fi(t)?di(t):(e=xd(i,r,n),t.stateNode=e,Za(t))}return rl(t),null;case 5:if(Y(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Za(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return rl(t),null}if(e=B.current,fi(t))di(t);else{switch(i=id(H.current),e){case 1:e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof r.is?i.createElement("select",{is:r.is}):i.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"===typeof r.is?i.createElement(n,{is:r.is}):i.createElement(n)}}e[Pe]=t,e[De]=r;e:for(i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&27!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;null===i.sibling;){if(null===i.return||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=e;e:switch(td(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Za(t)}}return rl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&Za(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(e=H.current,fi(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(i=ii))switch(i.tag){case 27:case 5:r=i.memoizedProps}e[Pe]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||Xu(e.nodeValue,n)))||ui(t)}else(e=id(e).createTextNode(r))[Pe]=t,t.stateNode=e}return rl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=fi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(o(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(o(317));i[Pe]=t}else pi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;rl(t),i=!1}else i=mi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return 256&t.flags?(ua(t),t):(ua(t),null)}if(ua(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){i=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(i=r.alternate.memoizedState.cachePool.pool);var s=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(s=r.memoizedState.cachePool.pool),s!==i&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),tl(t,t.updateQueue),rl(t),null;case 4:return K(),null===e&&zu(t.stateNode.containerInfo),rl(t),null;case 10:return xi(t.type),rl(t),null;case 19:if(V(da),null===(i=t.memoizedState))return rl(t),null;if(r=0!==(128&t.flags),null===(s=i.rendering))if(r)nl(i,!1);else{if(0!==fc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=ha(e))){for(t.flags|=128,nl(i,!1),e=s.updateQueue,t.updateQueue=e,tl(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Vr(n,e),n=n.sibling;return z(da,1&da.current|2),t.child}e=e.sibling}null!==i.tail&&te()>_c&&(t.flags|=128,r=!0,nl(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ha(s))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,tl(t,e),nl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!s.alternate&&!oi)return rl(t),null}else 2*te()-i.renderingStartTime>_c&&536870912!==n&&(t.flags|=128,r=!0,nl(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(null!==(e=i.last)?e.sibling=s:t.child=s,i.last=s)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=te(),t.sibling=null,e=da.current,z(da,r?1&e|2:1&e),t):(rl(t),null);case 22:case 23:return ua(t),vs(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(rl(t),6&t.subtreeFlags&&(t.flags|=8192)):rl(t),null!==(n=t.updateQueue)&&tl(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&V(Bi),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),xi(Di),rl(t),null;case 25:case 30:return null}throw Error(o(156,t.tag))}function sl(e,t){switch(ri(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return xi(Di),K(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Y(t),null;case 13:if(ua(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));pi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return V(da),null;case 4:return K(),null;case 10:return xi(t.type),null;case 22:case 23:return ua(t),vs(),null!==e&&V(Bi),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return xi(Di),null;default:return null}}function ol(e,t){switch(ri(t),t.tag){case 3:xi(Di),K();break;case 26:case 27:case 5:Y(t);break;case 4:K();break;case 13:ua(t);break;case 19:V(da);break;case 10:xi(t.type);break;case 22:case 23:ua(t),vs(),null!==e&&V(Bi);break;case 24:xi(Di)}}function al(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var s=n.create,o=n.inst;r=s(),o.destroy=r}n=n.next}while(n!==i)}}catch(a){du(t,t.return,a)}}function ll(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var s=i.next;r=s;do{if((r.tag&e)===e){var o=r.inst,a=o.destroy;if(void 0!==a){o.destroy=void 0,i=t;var l=n,c=a;try{c()}catch(u){du(i,l,u)}}}r=r.next}while(r!==s)}}catch(u){du(t,t.return,u)}}function cl(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{fs(t,n)}catch(r){du(e,e.return,r)}}}function ul(e,t,n){n.props=ya(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){du(e,t,r)}}function dl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(i){du(e,t,i)}}function hl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(i){du(e,t,i)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(s){du(e,t,s)}else n.current=null}function fl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(i){du(e,e.return,i)}}function pl(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,s=null,a=null,l=null,c=null,u=null,d=null;for(p in n){var h=n[p];if(n.hasOwnProperty(p)&&null!=h)switch(p){case"checked":case"value":break;case"defaultValue":c=h;default:r.hasOwnProperty(p)||Zu(e,t,p,null,r,h)}}for(var f in r){var p=r[f];if(h=n[f],r.hasOwnProperty(f)&&(null!=p||null!=h))switch(f){case"type":s=p;break;case"name":i=p;break;case"checked":u=p;break;case"defaultChecked":d=p;break;case"value":a=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(o(137,t));break;default:p!==h&&Zu(e,t,f,p,r,h)}}return void gt(e,a,l,c,u,d,s,i);case"select":for(s in p=a=l=f=null,n)if(c=n[s],n.hasOwnProperty(s)&&null!=c)switch(s){case"value":break;case"multiple":p=c;default:r.hasOwnProperty(s)||Zu(e,t,s,null,r,c)}for(i in r)if(s=r[i],c=n[i],r.hasOwnProperty(i)&&(null!=s||null!=c))switch(i){case"value":f=s;break;case"defaultValue":l=s;break;case"multiple":a=s;default:s!==c&&Zu(e,t,i,s,r,c)}return t=l,n=a,r=p,void(null!=f?bt(e,!!n,f,!1):!!r!==!!n&&(null!=t?bt(e,!!n,t,!0):bt(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=f=null,n)if(i=n[l],n.hasOwnProperty(l)&&null!=i&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Zu(e,t,l,null,r,i)}for(a in r)if(i=r[a],s=n[a],r.hasOwnProperty(a)&&(null!=i||null!=s))switch(a){case"value":f=i;break;case"defaultValue":p=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(o(91));break;default:i!==s&&Zu(e,t,a,i,r,s)}return void wt(e,f,p);case"option":for(var m in n)if(f=n[m],n.hasOwnProperty(m)&&null!=f&&!r.hasOwnProperty(m))if("selected"===m)e.selected=!1;else Zu(e,t,m,null,r,f);for(c in r)if(f=r[c],p=n[c],r.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))if("selected"===c)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else Zu(e,t,c,f,r,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)f=n[g],n.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g)&&Zu(e,t,g,null,r,f);for(u in r)if(f=r[u],p=n[u],r.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(o(137,t));break;default:Zu(e,t,u,f,r,p)}return;default:if(Tt(t)){for(var y in n)f=n[y],n.hasOwnProperty(y)&&void 0!==f&&!r.hasOwnProperty(y)&&ed(e,t,y,void 0,r,f);for(d in r)f=r[d],p=n[d],!r.hasOwnProperty(d)||f===p||void 0===f&&void 0===p||ed(e,t,d,f,r,p);return}}for(var v in n)f=n[v],n.hasOwnProperty(v)&&null!=f&&!r.hasOwnProperty(v)&&Zu(e,t,v,null,r,f);for(h in r)f=r[h],p=n[h],!r.hasOwnProperty(h)||f===p||null==f&&null==p||Zu(e,t,h,f,r,p)}(r,e.type,n,t),r[De]=t}catch(i){du(e,e.return,i)}}function ml(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&pd(e.type)||4===e.tag}function gl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ml(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&pd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function yl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$u));else if(4!==r&&(27===r&&pd(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(yl(e,t,n),e=e.sibling;null!==e;)yl(e,t,n),e=e.sibling}function vl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&pd(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(vl(e,t,n),e=e.sibling;null!==e;)vl(e,t,n),e=e.sibling}function bl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);td(t,r,n),t[Pe]=e,t[De]=n}catch(s){du(e,e.return,s)}}var wl=!1,xl=!1,Sl=!1,_l="function"===typeof WeakSet?WeakSet:Set,kl=null;function El(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Fl(e,n),4&r&&al(5,n);break;case 1:if(Fl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(o){du(n,n.return,o)}else{var i=ya(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){du(n,n.return,a)}}64&r&&cl(n),512&r&&dl(n,n.return);break;case 3:if(Fl(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{fs(e,t)}catch(o){du(n,n.return,o)}}break;case 27:null===t&&4&r&&bl(n);case 26:case 5:Fl(e,n),null===t&&4&r&&fl(n),512&r&&dl(n,n.return);break;case 12:Fl(e,n);break;case 13:Fl(e,n),4&r&&Rl(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=mu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||wl)){t=null!==t&&null!==t.memoizedState||xl,i=wl;var s=xl;wl=r,(xl=t)&&!s?Vl(e,n,0!==(8772&n.subtreeFlags)):Fl(e,n),wl=i,xl=s}break;case 30:break;default:Fl(e,n)}}function Tl(e){var t=e.alternate;null!==t&&(e.alternate=null,Tl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Ve(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Cl=null,Nl=!1;function Il(e,t,n){for(n=n.child;null!==n;)Al(e,t,n),n=n.sibling}function Al(e,t,n){if(de&&"function"===typeof de.onCommitFiberUnmount)try{de.onCommitFiberUnmount(ue,n)}catch(s){}switch(n.tag){case 26:xl||hl(n,t),Il(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:xl||hl(n,t);var r=Cl,i=Nl;pd(n.type)&&(Cl=n.stateNode,Nl=!1),Il(e,t,n),Sd(n.stateNode),Cl=r,Nl=i;break;case 5:xl||hl(n,t);case 6:if(r=Cl,i=Nl,Cl=null,Il(e,t,n),Nl=i,null!==(Cl=r))if(Nl)try{(9===Cl.nodeType?Cl.body:"HTML"===Cl.nodeName?Cl.ownerDocument.body:Cl).removeChild(n.stateNode)}catch(o){du(n,t,o)}else try{Cl.removeChild(n.stateNode)}catch(o){du(n,t,o)}break;case 18:null!==Cl&&(Nl?(md(9===(e=Cl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Nh(e)):md(Cl,n.stateNode));break;case 4:r=Cl,i=Nl,Cl=n.stateNode.containerInfo,Nl=!0,Il(e,t,n),Cl=r,Nl=i;break;case 0:case 11:case 14:case 15:xl||ll(2,n,t),xl||ll(4,n,t),Il(e,t,n);break;case 1:xl||(hl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&ul(n,t,r)),Il(e,t,n);break;case 21:Il(e,t,n);break;case 22:xl=(r=xl)||null!==n.memoizedState,Il(e,t,n),xl=r;break;default:Il(e,t,n)}}function Rl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Nh(e)}catch(n){du(t,t.return,n)}}function Pl(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new _l),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new _l),t;default:throw Error(o(435,e.tag))}}(e);t.forEach(function(t){var r=gu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}function Dl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r],s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 27:if(pd(l.type)){Cl=l.stateNode,Nl=!1;break e}break;case 5:Cl=l.stateNode,Nl=!1;break e;case 3:case 4:Cl=l.stateNode.containerInfo,Nl=!0;break e}l=l.return}if(null===Cl)throw Error(o(160));Al(s,a,i),Cl=null,Nl=!1,null!==(s=i.alternate)&&(s.return=null),i.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)jl(t,e),t=t.sibling}var Ol=null;function jl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Dl(t,e),Ll(e),4&r&&(ll(3,e,e.return),al(3,e),ll(5,e,e.return));break;case 1:Dl(t,e),Ll(e),512&r&&(xl||null===n||hl(n,n.return)),64&r&&wl&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var i=Ol;if(Dl(t,e),Ll(e),512&r&&(xl||null===n||hl(n,n.return)),4&r){var s=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":(!(s=i.getElementsByTagName("title")[0])||s[Ue]||s[Pe]||"http://www.w3.org/2000/svg"===s.namespaceURI||s.hasAttribute("itemprop"))&&(s=i.createElement(r),i.head.insertBefore(s,i.querySelector("head > title"))),td(s,r,n),s[Pe]=e,Ge(s),r=s;break e;case"link":var a=Vd("link","href",i).get(r+(n.href||""));if(a)for(var l=0;l<a.length;l++)if((s=a[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&s.getAttribute("rel")===(null==n.rel?null:n.rel)&&s.getAttribute("title")===(null==n.title?null:n.title)&&s.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){a.splice(l,1);break t}td(s=i.createElement(r),r,n),i.head.appendChild(s);break;case"meta":if(a=Vd("meta","content",i).get(r+(n.content||"")))for(l=0;l<a.length;l++)if((s=a[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&s.getAttribute("name")===(null==n.name?null:n.name)&&s.getAttribute("property")===(null==n.property?null:n.property)&&s.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&s.getAttribute("charset")===(null==n.charSet?null:n.charSet)){a.splice(l,1);break t}td(s=i.createElement(r),r,n),i.head.appendChild(s);break;default:throw Error(o(468,r))}s[Pe]=e,Ge(s),r=s}e.stateNode=r}else zd(i,e.type,e.stateNode);else e.stateNode=jd(i,r,e.memoizedProps);else s!==r?(null===s?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):s.count--,null===r?zd(i,e.type,e.stateNode):jd(i,r,e.memoizedProps)):null===r&&null!==e.stateNode&&pl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Dl(t,e),Ll(e),512&r&&(xl||null===n||hl(n,n.return)),null!==n&&4&r&&pl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Dl(t,e),Ll(e),512&r&&(xl||null===n||hl(n,n.return)),32&e.flags){i=e.stateNode;try{St(i,"")}catch(p){du(e,e.return,p)}}4&r&&null!=e.stateNode&&pl(e,i=e.memoizedProps,null!==n?n.memoizedProps:i),1024&r&&(Sl=!0);break;case 6:if(Dl(t,e),Ll(e),4&r){if(null===e.stateNode)throw Error(o(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(p){du(e,e.return,p)}}break;case 3:if(Ud=null,i=Ol,Ol=Ed(t.containerInfo),Dl(t,e),Ol=i,Ll(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Nh(t.containerInfo)}catch(p){du(e,e.return,p)}Sl&&(Sl=!1,Ml(e));break;case 4:r=Ol,Ol=Ed(e.stateNode.containerInfo),Dl(t,e),Ll(e),Ol=r;break;case 12:default:Dl(t,e),Ll(e);break;case 13:Dl(t,e),Ll(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(Sc=te()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Pl(e,r)));break;case 22:i=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=wl,d=xl;if(wl=u||i,xl=d||c,Dl(t,e),xl=d,wl=u,Ll(e),8192&r)e:for(t=e.stateNode,t._visibility=i?-2&t._visibility:1|t._visibility,i&&(null===n||c||wl||xl||Ul(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(s=c.stateNode,i)"function"===typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,f=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(p){du(c,c.return,p)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=i?"":c.memoizedProps}catch(p){du(c,c.return,p)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Pl(e,n))));break;case 19:Dl(t,e),Ll(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Pl(e,r)));case 30:case 21:}}function Ll(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(ml(r)){n=r;break}r=r.return}if(null==n)throw Error(o(160));switch(n.tag){case 27:var i=n.stateNode;vl(e,gl(e),i);break;case 5:var s=n.stateNode;32&n.flags&&(St(s,""),n.flags&=-33),vl(e,gl(e),s);break;case 3:case 4:var a=n.stateNode.containerInfo;yl(e,gl(e),a);break;default:throw Error(o(161))}}catch(l){du(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ml(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Ml(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Fl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)El(e,t.alternate,t),t=t.sibling}function Ul(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ll(4,t,t.return),Ul(t);break;case 1:hl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&ul(t,t.return,n),Ul(t);break;case 27:Sd(t.stateNode);case 26:case 5:hl(t,t.return),Ul(t);break;case 22:null===t.memoizedState&&Ul(t);break;default:Ul(t)}e=e.sibling}}function Vl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,s=t,o=s.flags;switch(s.tag){case 0:case 11:case 15:Vl(i,s,n),al(4,s);break;case 1:if(Vl(i,s,n),"function"===typeof(i=(r=s).stateNode).componentDidMount)try{i.componentDidMount()}catch(c){du(r,r.return,c)}if(null!==(i=(r=s).updateQueue)){var a=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)hs(l[i],a)}catch(c){du(r,r.return,c)}}n&&64&o&&cl(s),dl(s,s.return);break;case 27:bl(s);case 26:case 5:Vl(i,s,n),n&&null===r&&4&o&&fl(s),dl(s,s.return);break;case 12:Vl(i,s,n);break;case 13:Vl(i,s,n),n&&4&o&&Rl(i,s);break;case 22:null===s.memoizedState&&Vl(i,s,n),dl(s,s.return);break;case 30:break;default:Vl(i,s,n)}t=t.sibling}}function zl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&ji(n))}function Bl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&ji(e))}function ql(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Hl(e,t,n,r),t=t.sibling}function Hl(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:ql(e,t,n,r),2048&i&&al(9,t);break;case 1:case 13:default:ql(e,t,n,r);break;case 3:ql(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&ji(e)));break;case 12:if(2048&i){ql(e,t,n,r),e=t.stateNode;try{var s=t.memoizedProps,o=s.id,a=s.onPostCommit;"function"===typeof a&&a(o,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){du(t,t.return,l)}}else ql(e,t,n,r);break;case 23:break;case 22:s=t.stateNode,o=t.alternate,null!==t.memoizedState?2&s._visibility?ql(e,t,n,r):Wl(e,t):2&s._visibility?ql(e,t,n,r):(s._visibility|=2,Gl(e,t,n,r,0!==(10256&t.subtreeFlags))),2048&i&&zl(o,t);break;case 24:ql(e,t,n,r),2048&i&&Bl(t.alternate,t)}}function Gl(e,t,n,r,i){for(i=i&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var s=e,o=t,a=n,l=r,c=o.flags;switch(o.tag){case 0:case 11:case 15:Gl(s,o,a,l,i),al(8,o);break;case 23:break;case 22:var u=o.stateNode;null!==o.memoizedState?2&u._visibility?Gl(s,o,a,l,i):Wl(s,o):(u._visibility|=2,Gl(s,o,a,l,i)),i&&2048&c&&zl(o.alternate,o);break;case 24:Gl(s,o,a,l,i),i&&2048&c&&Bl(o.alternate,o);break;default:Gl(s,o,a,l,i)}t=t.sibling}}function Wl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:Wl(n,r),2048&i&&zl(r.alternate,r);break;case 24:Wl(n,r),2048&i&&Bl(r.alternate,r);break;default:Wl(n,r)}t=t.sibling}}var Kl=8192;function Ql(e){if(e.subtreeFlags&Kl)for(e=e.child;null!==e;)Yl(e),e=e.sibling}function Yl(e){switch(e.tag){case 26:Ql(e),e.flags&Kl&&null!==e.memoizedState&&function(e,t,n){if(null===qd)throw Error(o(475));var r=qd;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var i=Ad(n.href),s=e.querySelector(Rd(i));if(s)return null!==(e=s._p)&&"object"===typeof e&&"function"===typeof e.then&&(r.count++,r=Gd.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=s,void Ge(s);s=e.ownerDocument||e,n=Pd(n),(i=_d.get(i))&&Md(n,i),Ge(s=s.createElement("link"));var a=s;a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),td(s,"link",n),t.instance=s}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(r.count++,t=Gd.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(Ol,e.memoizedState,e.memoizedProps);break;case 5:default:Ql(e);break;case 3:case 4:var t=Ol;Ol=Ed(e.stateNode.containerInfo),Ql(e),Ol=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Kl,Kl=16777216,Ql(e),Kl=t):Ql(e))}}function Jl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Xl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];kl=r,ec(r,e)}Jl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)$l(e),e=e.sibling}function $l(e){switch(e.tag){case 0:case 11:case 15:Xl(e),2048&e.flags&&ll(9,e,e.return);break;case 3:case 12:default:Xl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Zl(e)):Xl(e)}}function Zl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];kl=r,ec(r,e)}Jl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:ll(8,t,t.return),Zl(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Zl(t));break;default:Zl(t)}e=e.sibling}}function ec(e,t){for(;null!==kl;){var n=kl;switch(n.tag){case 0:case 11:case 15:ll(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:ji(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,kl=r;else e:for(n=e;null!==kl;){var i=(r=kl).sibling,s=r.return;if(Tl(r),r===n){kl=null;break e}if(null!==i){i.return=s,kl=i;break e}kl=s}}}var tc={getCacheForType:function(e){var t=Ci(Di),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},nc="function"===typeof WeakMap?WeakMap:Map,rc=0,ic=null,sc=null,oc=0,ac=0,lc=null,cc=!1,uc=!1,dc=!1,hc=0,fc=0,pc=0,mc=0,gc=0,yc=0,vc=0,bc=null,wc=null,xc=!1,Sc=0,_c=1/0,kc=null,Ec=null,Tc=0,Cc=null,Nc=null,Ic=0,Ac=0,Rc=null,Pc=null,Dc=0,Oc=null;function jc(){if(0!==(2&rc)&&0!==oc)return oc&-oc;if(null!==O.T){return 0!==Fi?Fi:Au()}return Ae()}function Lc(){0===yc&&(yc=0===(536870912&oc)||oi?Se():536870912);var e=sa.current;return null!==e&&(e.flags|=32),yc}function Mc(e,t,n){(e!==ic||2!==ac&&9!==ac)&&null===e.cancelPendingCommit||(Hc(e,0),zc(e,oc,yc,!1)),Ee(e,n),0!==(2&rc)&&e===ic||(e===ic&&(0===(2&rc)&&(mc|=n),4===fc&&zc(e,oc,yc,!1)),_u(e))}function Fc(e,t,n){if(0!==(6&rc))throw Error(o(327));for(var r=!n&&0===(124&t)&&0===(t&e.expiredLanes)||we(e,t),i=r?function(e,t){var n=rc;rc|=2;var r=Wc(),i=Kc();ic!==e||oc!==t?(kc=null,_c=te()+500,Hc(e,t)):uc=we(e,t);e:for(;;)try{if(0!==ac&&null!==sc){t=sc;var s=lc;t:switch(ac){case 1:ac=0,lc=null,eu(e,t,s,1);break;case 2:case 9:if(Ji(s)){ac=0,lc=null,Zc(t);break}t=function(){2!==ac&&9!==ac||ic!==e||(ac=7),_u(e)},s.then(t,t);break e;case 3:ac=7;break e;case 4:ac=5;break e;case 7:Ji(s)?(ac=0,lc=null,Zc(t)):(ac=0,lc=null,eu(e,t,s,7));break;case 5:var a=null;switch(sc.tag){case 26:a=sc.memoizedState;case 5:case 27:var l=sc;if(!a||Bd(a)){ac=0,lc=null;var c=l.sibling;if(null!==c)sc=c;else{var u=l.return;null!==u?(sc=u,tu(u)):sc=null}break t}}ac=0,lc=null,eu(e,t,s,5);break;case 6:ac=0,lc=null,eu(e,t,s,6);break;case 8:qc(),fc=6;break e;default:throw Error(o(462))}}Xc();break}catch(d){Gc(e,d)}return bi=vi=null,O.H=r,O.A=i,rc=n,null!==sc?0:(ic=null,oc=0,Ir(),fc)}(e,t):Yc(e,t,!0),s=r;;){if(0===i){uc&&!r&&zc(e,t,0,!1);break}if(n=e.current.alternate,!s||Vc(n)){if(2===i){if(s=t,e.errorRecoveryDisabledLanes&s)var a=0;else a=0!==(a=-536870913&e.pendingLanes)?a:536870912&a?536870912:0;if(0!==a){t=a;e:{var l=e;i=bc;var c=l.current.memoizedState.isDehydrated;if(c&&(Hc(l,a).flags|=256),2!==(a=Yc(l,a,!1))){if(dc&&!c){l.errorRecoveryDisabledLanes|=s,mc|=s,i=4;break e}s=wc,wc=i,null!==s&&(null===wc?wc=s:wc.push.apply(wc,s))}i=a}if(s=!1,2!==i)continue}}if(1===i){Hc(e,0),zc(e,t,0,!0);break}e:{switch(r=e,s=i){case 0:case 1:throw Error(o(345));case 4:if((4194048&t)!==t)break;case 6:zc(r,t,yc,!cc);break e;case 2:wc=null;break;case 3:case 5:break;default:throw Error(o(329))}if((62914560&t)===t&&10<(i=Sc+300-te())){if(zc(r,t,yc,!cc),0!==be(r,0,!0))break e;r.timeoutHandle=cd(Uc.bind(null,r,n,wc,kc,xc,t,yc,mc,vc,cc,s,2,-0,0),i)}else Uc(r,n,wc,kc,xc,t,yc,mc,vc,cc,s,0,-0,0)}break}i=Yc(e,t,!1),s=!1}_u(e)}function Uc(e,t,n,r,i,s,a,l,c,u,d,h,f,p){if(e.timeoutHandle=-1,(8192&(h=t.subtreeFlags)||16785408===(16785408&h))&&(qd={stylesheets:null,count:0,unsuspend:Hd},Yl(t),null!==(h=function(){if(null===qd)throw Error(o(475));var e=qd;return e.stylesheets&&0===e.count&&Kd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Kd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=h(ru.bind(null,e,t,s,n,r,i,a,l,c,d,1,f,p)),void zc(e,s,a,!u);ru(e,t,s,n,r,i,a,l,c)}function Vc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Jn(s(),i))return!1}catch(o){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function zc(e,t,n,r){t&=~gc,t&=~mc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var s=31-fe(i),o=1<<s;r[s]=-1,i&=~o}0!==n&&Te(e,n,t)}function Bc(){return 0!==(6&rc)||(ku(0,!1),!1)}function qc(){if(null!==sc){if(0===ac)var e=sc.return;else bi=vi=null,Fs(e=sc),Jo=null,Xo=0,e=sc;for(;null!==e;)ol(e.alternate,e),e=e.return;sc=null}}function Hc(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,ud(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),qc(),ic=e,sc=n=Ur(e.current,null),oc=t,ac=0,lc=null,cc=!1,uc=we(e,t),dc=!1,vc=yc=gc=mc=pc=fc=0,wc=bc=null,xc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-fe(r),s=1<<i;t|=e[i],r&=~s}return hc=t,Ir(),n}function Gc(e,t){ws=null,O.H=Wo,t===Wi||t===Qi?(t=es(),ac=3):t===Ki?(t=es(),ac=4):ac=t===Ca?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,lc=t,null===sc&&(fc=1,Sa(e,Er(t,e.current)))}function Wc(){var e=O.H;return O.H=Wo,null===e?Wo:e}function Kc(){var e=O.A;return O.A=tc,e}function Qc(){fc=4,cc||(4194048&oc)!==oc&&null!==sa.current||(uc=!0),0===(134217727&pc)&&0===(134217727&mc)||null===ic||zc(ic,oc,yc,!1)}function Yc(e,t,n){var r=rc;rc|=2;var i=Wc(),s=Kc();ic===e&&oc===t||(kc=null,Hc(e,t)),t=!1;var o=fc;e:for(;;)try{if(0!==ac&&null!==sc){var a=sc,l=lc;switch(ac){case 8:qc(),o=6;break e;case 3:case 2:case 9:case 6:null===sa.current&&(t=!0);var c=ac;if(ac=0,lc=null,eu(e,a,l,c),n&&uc){o=0;break e}break;default:c=ac,ac=0,lc=null,eu(e,a,l,c)}}Jc(),o=fc;break}catch(u){Gc(e,u)}return t&&e.shellSuspendCounter++,bi=vi=null,rc=r,O.H=i,O.A=s,null===sc&&(ic=null,oc=0,Ir()),o}function Jc(){for(;null!==sc;)$c(sc)}function Xc(){for(;null!==sc&&!Z();)$c(sc)}function $c(e){var t=$a(e.alternate,e,hc);e.memoizedProps=e.pendingProps,null===t?tu(e):sc=t}function Zc(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ma(n,t,t.pendingProps,t.type,void 0,oc);break;case 11:t=Ma(n,t,t.pendingProps,t.type.render,t.ref,oc);break;case 5:Fs(t);default:ol(n,t),t=$a(n,t=sc=Vr(t,hc),hc)}e.memoizedProps=e.pendingProps,null===t?tu(e):sc=t}function eu(e,t,n,r){bi=vi=null,Fs(t),Jo=null,Xo=0;var i=t.return;try{if(function(e,t,n,r,i){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&ki(t,n,i,!0),null!==(n=sa.current)){switch(n.tag){case 13:return null===oa?Qc():null===n.alternate&&0===fc&&(fc=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===Yi?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),hu(e,r,i)),!1;case 22:return n.flags|=65536,r===Yi?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),hu(e,r,i)),!1}throw Error(o(435,n.tag))}return hu(e,r,i),Qc(),!1}if(oi)return null!==(t=sa.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==ci&&gi(Er(e=Error(o(422),{cause:r}),n))):(r!==ci&&gi(Er(t=Error(o(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,r=Er(r,n),ls(e,i=ka(e.stateNode,r,i)),4!==fc&&(fc=2)),!1;var s=Error(o(520),{cause:r});if(s=Er(s,n),null===bc?bc=[s]:bc.push(s),4!==fc&&(fc=2),null===t)return!0;r=Er(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,ls(n,e=ka(n.stateNode,r,e)),!1;case 1:if(t=n.type,s=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==s&&"function"===typeof s.componentDidCatch&&(null===Ec||!Ec.has(s))))return n.flags|=65536,i&=-i,n.lanes|=i,Ta(i=Ea(i),e,n,r),ls(n,i),!1}n=n.return}while(null!==n);return!1}(e,i,t,n,oc))return fc=1,Sa(e,Er(n,e.current)),void(sc=null)}catch(s){if(null!==i)throw sc=i,s;return fc=1,Sa(e,Er(n,e.current)),void(sc=null)}32768&t.flags?(oi||1===r?e=!0:uc||0!==(536870912&oc)?e=!1:(cc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=sa.current)&&13===r.tag&&(r.flags|=16384))),nu(t,e)):tu(t)}function tu(e){var t=e;do{if(0!==(32768&t.flags))return void nu(t,cc);e=t.return;var n=il(t.alternate,t,hc);if(null!==n)return void(sc=n);if(null!==(t=t.sibling))return void(sc=t);sc=t=e}while(null!==t);0===fc&&(fc=5)}function nu(e,t){do{var n=sl(e.alternate,e);if(null!==n)return n.flags&=32767,void(sc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(sc=e);sc=e=n}while(null!==e);fc=6,sc=null}function ru(e,t,n,r,i,s,a,l,c){e.cancelPendingCommit=null;do{lu()}while(0!==Tc);if(0!==(6&rc))throw Error(o(327));if(null!==t){if(t===e.current)throw Error(o(177));if(s=t.lanes|t.childLanes,function(e,t,n,r,i,s){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var a=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-fe(n),d=1<<u;a[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var f=h[u];null!==f&&(f.lane&=-536870913)}n&=~d}0!==r&&Te(e,r,0),0!==s&&0===i&&0!==e.tag&&(e.suspendedLanes|=s&~(o&~t))}(e,n,s|=Nr,a,l,c),e===ic&&(sc=ic=null,oc=0),Nc=t,Cc=e,Ic=n,Ac=s,Rc=i,Pc=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,X(se,function(){return cu(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=O.T,O.T=null,i=j.p,j.p=2,a=rc,rc|=4;try{!function(e,t){if(e=e.containerInfo,nd=rh,nr(e=tr(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(g){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=a+i),h!==s||0!==r&&3!==h.nodeType||(c=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=a),f===s&&++d===r&&(c=a),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(rd={focusedElem:e,selectionRange:n},rh=!1,kl=t;null!==kl;)if(e=(t=kl).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,kl=e;else for(;null!==kl;){switch(s=(t=kl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==s){e=void 0,n=t,i=s.memoizedProps,s=s.memoizedState,r=n.stateNode;try{var m=ya(n.type,i,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(m,s),r.__reactInternalSnapshotBeforeUpdate=e}catch(y){du(n,n.return,y)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))gd(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":gd(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(o(163))}if(null!==(e=t.sibling)){e.return=t.return,kl=e;break}kl=t.return}}(e,t)}finally{rc=a,j.p=i,O.T=r}}Tc=1,iu(),su(),ou()}}function iu(){if(1===Tc){Tc=0;var e=Cc,t=Nc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=O.T,O.T=null;var r=j.p;j.p=2;var i=rc;rc|=4;try{jl(t,e);var s=rd,o=tr(e.containerInfo),a=s.focusedElem,l=s.selectionRange;if(o!==a&&a&&a.ownerDocument&&er(a.ownerDocument.documentElement,a)){if(null!==l&&nr(a)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in a)a.selectionStart=c,a.selectionEnd=Math.min(u,a.value.length);else{var d=a.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var f=h.getSelection(),p=a.textContent.length,m=Math.min(l.start,p),g=void 0===l.end?m:Math.min(l.end,p);!f.extend&&m>g&&(o=g,g=m,m=o);var y=Zn(a,m),v=Zn(a,g);if(y&&v&&(1!==f.rangeCount||f.anchorNode!==y.node||f.anchorOffset!==y.offset||f.focusNode!==v.node||f.focusOffset!==v.offset)){var b=d.createRange();b.setStart(y.node,y.offset),f.removeAllRanges(),m>g?(f.addRange(b),f.extend(v.node,v.offset)):(b.setEnd(v.node,v.offset),f.addRange(b))}}}}for(d=[],f=a;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof a.focus&&a.focus(),a=0;a<d.length;a++){var w=d[a];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}rh=!!nd,rd=nd=null}finally{rc=i,j.p=r,O.T=n}}e.current=t,Tc=2}}function su(){if(2===Tc){Tc=0;var e=Cc,t=Nc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=O.T,O.T=null;var r=j.p;j.p=2;var i=rc;rc|=4;try{El(e,t.alternate,t)}finally{rc=i,j.p=r,O.T=n}}Tc=3}}function ou(){if(4===Tc||3===Tc){Tc=0,ee();var e=Cc,t=Nc,n=Ic,r=Pc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Tc=5:(Tc=0,Nc=Cc=null,au(e,e.pendingLanes));var i=e.pendingLanes;if(0===i&&(Ec=null),Ie(n),t=t.stateNode,de&&"function"===typeof de.onCommitFiberRoot)try{de.onCommitFiberRoot(ue,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=O.T,i=j.p,j.p=2,O.T=null;try{for(var s=e.onRecoverableError,o=0;o<r.length;o++){var a=r[o];s(a.value,{componentStack:a.stack})}}finally{O.T=t,j.p=i}}0!==(3&Ic)&&lu(),_u(e),i=e.pendingLanes,0!==(4194090&n)&&0!==(42&i)?e===Oc?Dc++:(Dc=0,Oc=e):Dc=0,ku(0,!1)}}function au(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,ji(t)))}function lu(e){return iu(),su(),ou(),cu()}function cu(){if(5!==Tc)return!1;var e=Cc,t=Ac;Ac=0;var n=Ie(Ic),r=O.T,i=j.p;try{j.p=32>n?32:n,O.T=null,n=Rc,Rc=null;var s=Cc,a=Ic;if(Tc=0,Nc=Cc=null,Ic=0,0!==(6&rc))throw Error(o(331));var l=rc;if(rc|=4,$l(s.current),Hl(s,s.current,a,n),rc=l,ku(0,!1),de&&"function"===typeof de.onPostCommitFiberRoot)try{de.onPostCommitFiberRoot(ue,s)}catch(c){}return!0}finally{j.p=i,O.T=r,au(e,t)}}function uu(e,t,n){t=Er(n,t),null!==(e=os(e,t=ka(e.stateNode,t,2),2))&&(Ee(e,2),_u(e))}function du(e,t,n){if(3===e.tag)uu(e,e,n);else for(;null!==t;){if(3===t.tag){uu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ec||!Ec.has(r))){e=Er(n,e),null!==(r=os(t,n=Ea(2),2))&&(Ta(n,r,t,e),Ee(r,2),_u(r));break}}t=t.return}}function hu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new nc;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(dc=!0,i.add(n),e=fu.bind(null,e,t,n),t.then(e,e))}function fu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,ic===e&&(oc&n)===n&&(4===fc||3===fc&&(62914560&oc)===oc&&300>te()-Sc?0===(2&rc)&&Hc(e,0):gc|=n,vc===oc&&(vc=0)),_u(e)}function pu(e,t){0===t&&(t=_e()),null!==(e=Pr(e,t))&&(Ee(e,t),_u(e))}function mu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),pu(e,n)}function gu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(o(314))}null!==r&&r.delete(t),pu(e,n)}var yu=null,vu=null,bu=!1,wu=!1,xu=!1,Su=0;function _u(e){e!==vu&&null===e.next&&(null===vu?yu=vu=e:vu=vu.next=e),wu=!0,bu||(bu=!0,hd(function(){0!==(6&rc)?X(re,Eu):Tu()}))}function ku(e,t){if(!xu&&wu){xu=!0;do{for(var n=!1,r=yu;null!==r;){if(!t)if(0!==e){var i=r.pendingLanes;if(0===i)var s=0;else{var o=r.suspendedLanes,a=r.pingedLanes;s=(1<<31-fe(42|e)+1)-1,s=201326741&(s&=i&~(o&~a))?201326741&s|1:s?2|s:0}0!==s&&(n=!0,Iu(r,s))}else s=oc,0===(3&(s=be(r,r===ic?s:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||we(r,s)||(n=!0,Iu(r,s));r=r.next}}while(n);xu=!1}}function Eu(){Tu()}function Tu(){wu=bu=!1;var e=0;0!==Su&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==ld&&(ld=e,!0);return ld=null,!1}()&&(e=Su),Su=0);for(var t=te(),n=null,r=yu;null!==r;){var i=r.next,s=Cu(r,t);0===s?(r.next=null,null===n?yu=i:n.next=i,null===i&&(vu=n)):(n=r,(0!==e||0!==(3&s))&&(wu=!0)),r=i}ku(e,!1)}function Cu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=-62914561&e.pendingLanes;0<s;){var o=31-fe(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=xe(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}if(n=oc,n=be(e,e===(t=ic)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===ac||9===ac)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&$(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||we(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&$(r),Ie(n)){case 2:case 8:n=ie;break;case 32:default:n=se;break;case 268435456:n=ae}return r=Nu.bind(null,e),n=X(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&$(r),e.callbackPriority=2,e.callbackNode=null,2}function Nu(e,t){if(0!==Tc&&5!==Tc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(lu()&&e.callbackNode!==n)return null;var r=oc;return 0===(r=be(e,e===ic?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Fc(e,r,t),Cu(e,te()),null!=e.callbackNode&&e.callbackNode===n?Nu.bind(null,e):null)}function Iu(e,t){if(lu())return null;Fc(e,t,!0)}function Au(){return 0===Su&&(Su=Se()),Su}function Ru(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:It(""+e)}function Pu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Du=0;Du<Sr.length;Du++){var Ou=Sr[Du];_r(Ou.toLowerCase(),"on"+(Ou[0].toUpperCase()+Ou.slice(1)))}_r(pr,"onAnimationEnd"),_r(mr,"onAnimationIteration"),_r(gr,"onAnimationStart"),_r("dblclick","onDoubleClick"),_r("focusin","onFocus"),_r("focusout","onBlur"),_r(yr,"onTransitionRun"),_r(vr,"onTransitionStart"),_r(br,"onTransitionCancel"),_r(wr,"onTransitionEnd"),Ye("onMouseEnter",["mouseout","mouseover"]),Ye("onMouseLeave",["mouseout","mouseover"]),Ye("onPointerEnter",["pointerout","pointerover"]),Ye("onPointerLeave",["pointerout","pointerover"]),Qe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qe("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ju="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ju));function Mu(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;s=a,i.currentTarget=c;try{s(i)}catch(u){va(u)}i.currentTarget=null,s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;s=a,i.currentTarget=c;try{s(i)}catch(u){va(u)}i.currentTarget=null,s=l}}}}function Fu(e,t){var n=t[je];void 0===n&&(n=t[je]=new Set);var r=e+"__bubble";n.has(r)||(Bu(t,e,2,!1),n.add(r))}function Uu(e,t,n){var r=0;t&&(r|=4),Bu(n,e,r,t)}var Vu="_reactListening"+Math.random().toString(36).slice(2);function zu(e){if(!e[Vu]){e[Vu]=!0,We.forEach(function(t){"selectionchange"!==t&&(Lu.has(t)||Uu(t,!1,e),Uu(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vu]||(t[Vu]=!0,Uu("selectionchange",!1,t))}}function Bu(e,t,n,r){switch(uh(t)){case 2:var i=ih;break;case 8:i=sh;break;default:i=oh}n=i.bind(null,t,n,e),i=void 0,!Vt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function qu(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i)break;if(4===o)for(o=r.return;null!==o;){var c=o.tag;if((3===c||4===c)&&o.stateNode.containerInfo===i)return;o=o.return}for(;null!==a;){if(null===(o=ze(a)))return;if(5===(c=o.tag)||6===c||26===c||27===c){r=s=o;continue e}a=a.parentNode}}r=r.return}Lt(function(){var r=s,i=Rt(n),o=[];e:{var a=xr.get(e);if(void 0!==a){var c=en,u=e;switch(e){case"keypress":if(0===Wt(n))break e;case"keydown":case"keyup":c=gn;break;case"focusin":u="focus",c=an;break;case"focusout":u="blur",c=an;break;case"beforeblur":case"afterblur":c=an;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=sn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=on;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=vn;break;case pr:case mr:case gr:c=ln;break;case wr:c=bn;break;case"scroll":case"scrollend":c=nn;break;case"wheel":c=wn;break;case"copy":case"cut":case"paste":c=cn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=yn;break;case"toggle":case"beforetoggle":c=xn}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),f=d?null!==a?a+"Capture":null:a;d=[];for(var p,m=r;null!==m;){var g=m;if(p=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===p||null===f||null!=(g=Mt(m,f))&&d.push(Hu(m,g,p)),h)break;m=m.return}0<d.length&&(a=new c(a,u,null,n,i),o.push({event:a,listeners:d}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===At||!(u=n.relatedTarget||n.fromElement)||!ze(u)&&!u[Oe])&&(c||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?ze(u):null)&&(h=l(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=r),c!==u)){if(d=sn,g="onMouseLeave",f="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=yn,g="onPointerLeave",f="onPointerEnter",m="pointer"),h=null==c?a:qe(c),p=null==u?a:qe(u),(a=new d(g,m+"leave",c,n,i)).target=h,a.relatedTarget=p,g=null,ze(i)===r&&((d=new d(f,m+"enter",u,n,i)).target=p,d.relatedTarget=h,g=d),h=g,c&&u)e:{for(f=u,m=0,p=d=c;p;p=Wu(p))m++;for(p=0,g=f;g;g=Wu(g))p++;for(;0<m-p;)d=Wu(d),m--;for(;0<p-m;)f=Wu(f),p--;for(;m--;){if(d===f||null!==f&&d===f.alternate)break e;d=Wu(d),f=Wu(f)}d=null}else d=null;null!==c&&Ku(o,a,c,d,!1),null!==u&&null!==h&&Ku(o,h,u,d,!0)}if("select"===(c=(a=r?qe(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===c&&"file"===a.type)var y=Un;else if(Dn(a))if(Vn)y=Yn;else{y=Kn;var v=Wn}else!(c=a.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==a.type&&"radio"!==a.type?r&&Tt(r.elementType)&&(y=Un):y=Qn;switch(y&&(y=y(e,r))?On(o,y,n,i):(v&&v(e,a,r),"focusout"===e&&r&&"number"===a.type&&null!=r.memoizedProps.value&&vt(a,"number",a.value)),v=r?qe(r):window,e){case"focusin":(Dn(v)||"true"===v.contentEditable)&&(ir=v,sr=r,or=null);break;case"focusout":or=sr=ir=null;break;case"mousedown":ar=!0;break;case"contextmenu":case"mouseup":case"dragend":ar=!1,lr(o,n,i);break;case"selectionchange":if(rr)break;case"keydown":case"keyup":lr(o,n,i)}var b;if(_n)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Rn?In(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Tn&&"ko"!==n.locale&&(Rn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Rn&&(b=Gt()):(qt="value"in(Bt=i)?Bt.value:Bt.textContent,Rn=!0)),0<(v=Gu(r,w)).length&&(w=new un(w,e,null,n,i),o.push({event:w,listeners:v}),b?w.data=b:null!==(b=An(n))&&(w.data=b))),(b=En?function(e,t){switch(e){case"compositionend":return An(t);case"keypress":return 32!==t.which?null:(Nn=!0,Cn);case"textInput":return(e=t.data)===Cn&&Nn?null:e;default:return null}}(e,n):function(e,t){if(Rn)return"compositionend"===e||!_n&&In(e,t)?(e=Gt(),Ht=qt=Bt=null,Rn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Tn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(w=Gu(r,"onBeforeInput")).length&&(v=new un("onBeforeInput","beforeinput",null,n,i),o.push({event:v,listeners:w}),v.data=b)),function(e,t,n,r,i){if("submit"===t&&n&&n.stateNode===i){var s=Ru((i[De]||null).action),o=r.submitter;o&&null!==(t=(t=o[De]||null)?Ru(t.formAction):o.getAttribute("formAction"))&&(s=t,o=null);var a=new en("action","action",null,r,i);e.push({event:a,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Su){var e=o?Pu(i,o):new FormData(i);Po(n,{pending:!0,data:e,method:i.method,action:s},null,e)}}else"function"===typeof s&&(a.preventDefault(),e=o?Pu(i,o):new FormData(i),Po(n,{pending:!0,data:e,method:i.method,action:s},s,e))},currentTarget:i}]})}}(o,e,r,n,i)}Mu(o,t)})}function Hu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gu(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;if(5!==(i=i.tag)&&26!==i&&27!==i||null===s||(null!=(i=Mt(e,n))&&r.unshift(Hu(e,i,s)),null!=(i=Mt(e,t))&&r.push(Hu(e,i,s))),3===e.tag)return r;e=e.return}return[]}function Wu(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Ku(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(a=a.tag,null!==l&&l===r)break;5!==a&&26!==a&&27!==a||null===c||(l=c,i?null!=(c=Mt(n,s))&&o.unshift(Hu(n,c,l)):i||null!=(c=Mt(n,s))&&o.push(Hu(n,c,l))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Qu=/\r\n?/g,Yu=/\u0000|\uFFFD/g;function Ju(e){return("string"===typeof e?e:""+e).replace(Qu,"\n").replace(Yu,"")}function Xu(e,t){return t=Ju(t),Ju(e)===t}function $u(){}function Zu(e,t,n,r,i,s){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||St(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&St(e,""+r);break;case"className":nt(e,"class",r);break;case"tabIndex":nt(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,r);break;case"style":Et(e,r,s);break;case"data":if("object"!==t){nt(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=It(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof s&&("formAction"===n?("input"!==t&&Zu(e,t,"name",i.name,i,null),Zu(e,t,"formEncType",i.formEncType,i,null),Zu(e,t,"formMethod",i.formMethod,i,null),Zu(e,t,"formTarget",i.formTarget,i,null)):(Zu(e,t,"encType",i.encType,i,null),Zu(e,t,"method",i.method,i,null),Zu(e,t,"target",i.target,i,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=It(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=$u);break;case"onScroll":null!=r&&Fu("scroll",e);break;case"onScrollEnd":null!=r&&Fu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(o(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=It(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Fu("beforetoggle",e),Fu("toggle",e),tt(e,"popover",r);break;case"xlinkActuate":rt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":rt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":rt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":rt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":rt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":rt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":rt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":rt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":rt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":tt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=Ct.get(n)||n,r)}}function ed(e,t,n,r,i,s){switch(n){case"style":Et(e,r,s);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(o(60));e.innerHTML=n}}break;case"children":"string"===typeof r?St(e,r):("number"===typeof r||"bigint"===typeof r)&&St(e,""+r);break;case"onScroll":null!=r&&Fu("scroll",e);break;case"onScrollEnd":null!=r&&Fu("scrollend",e);break;case"onClick":null!=r&&(e.onclick=$u);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ke.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),"function"===typeof(s=null!=(s=e[De]||null)?s[n]:null)&&e.removeEventListener(t,s,i),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):tt(e,n,r):("function"!==typeof s&&null!==s&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,i)))}}function td(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fu("error",e),Fu("load",e);var r,i=!1,s=!1;for(r in n)if(n.hasOwnProperty(r)){var a=n[r];if(null!=a)switch(r){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Zu(e,t,r,a,n,null)}}return s&&Zu(e,t,"srcSet",n.srcSet,n,null),void(i&&Zu(e,t,"src",n.src,n,null));case"input":Fu("invalid",e);var l=r=a=s=null,c=null,u=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(null!=d)switch(i){case"name":s=d;break;case"type":a=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(o(137,t));break;default:Zu(e,t,i,d,n,null)}}return yt(e,r,l,c,u,a,s,!1),void dt(e);case"select":for(s in Fu("invalid",e),i=a=r=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":r=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:Zu(e,t,s,l,n,null)}return t=r,n=a,e.multiple=!!i,void(null!=t?bt(e,!!i,t,!1):null!=n&&bt(e,!!i,n,!0));case"textarea":for(a in Fu("invalid",e),r=s=i=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":i=l;break;case"defaultValue":s=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(o(91));break;default:Zu(e,t,a,l,n,null)}return xt(e,i,s,r),void dt(e);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(i=n[c]))if("selected"===c)e.selected=i&&"function"!==typeof i&&"symbol"!==typeof i;else Zu(e,t,c,i,n,null);return;case"dialog":Fu("beforetoggle",e),Fu("toggle",e),Fu("cancel",e),Fu("close",e);break;case"iframe":case"object":Fu("load",e);break;case"video":case"audio":for(i=0;i<ju.length;i++)Fu(ju[i],e);break;case"image":Fu("error",e),Fu("load",e);break;case"details":Fu("toggle",e);break;case"embed":case"source":case"link":Fu("error",e),Fu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(i=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Zu(e,t,u,i,n,null)}return;default:if(Tt(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(i=n[d])&&ed(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(i=n[l])&&Zu(e,t,l,i,n,null))}var nd=null,rd=null;function id(e){return 9===e.nodeType?e:e.ownerDocument}function sd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function od(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function ad(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ld=null;var cd="function"===typeof setTimeout?setTimeout:void 0,ud="function"===typeof clearTimeout?clearTimeout:void 0,dd="function"===typeof Promise?Promise:void 0,hd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof dd?function(e){return dd.resolve(null).then(e).catch(fd)}:cd;function fd(e){setTimeout(function(){throw e})}function pd(e){return"head"===e}function md(e,t){var n=t,r=0,i=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0<r&&8>r){n=r;var o=e.ownerDocument;if(1&n&&Sd(o.documentElement),2&n&&Sd(o.body),4&n)for(Sd(n=o.head),o=n.firstChild;o;){var a=o.nextSibling,l=o.nodeName;o[Ue]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===o.rel.toLowerCase()||n.removeChild(o),o=a}}if(0===i)return e.removeChild(s),void Nh(t);i--}else"$"===n||"$?"===n||"$!"===n?i++:r=n.charCodeAt(0)-48;else r=0;n=s}while(n);Nh(t)}function gd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":gd(n),Ve(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function yd(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function vd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var bd=null;function wd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function xd(e,t,n){switch(t=id(n),e){case"html":if(!(e=t.documentElement))throw Error(o(452));return e;case"head":if(!(e=t.head))throw Error(o(453));return e;case"body":if(!(e=t.body))throw Error(o(454));return e;default:throw Error(o(451))}}function Sd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ve(e)}var _d=new Map,kd=new Set;function Ed(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Td=j.d;j.d={f:function(){var e=Td.f(),t=Bc();return e||t},r:function(e){var t=Be(e);null!==t&&5===t.tag&&"form"===t.type?Oo(t):Td.r(e)},D:function(e){Td.D(e),Nd("dns-prefetch",e,null)},C:function(e,t){Td.C(e,t),Nd("preconnect",e,t)},L:function(e,t,n){Td.L(e,t,n);var r=Cd;if(r&&e&&t){var i='link[rel="preload"][as="'+mt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(i+='[imagesrcset="'+mt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(i+='[imagesizes="'+mt(n.imageSizes)+'"]')):i+='[href="'+mt(e)+'"]';var s=i;switch(t){case"style":s=Ad(e);break;case"script":s=Dd(e)}_d.has(s)||(e=h({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),_d.set(s,e),null!==r.querySelector(i)||"style"===t&&r.querySelector(Rd(s))||"script"===t&&r.querySelector(Od(s))||(td(t=r.createElement("link"),"link",e),Ge(t),r.head.appendChild(t)))}},m:function(e,t){Td.m(e,t);var n=Cd;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+mt(r)+'"][href="'+mt(e)+'"]',s=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Dd(e)}if(!_d.has(s)&&(e=h({rel:"modulepreload",href:e},t),_d.set(s,e),null===n.querySelector(i))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Od(s)))return}td(r=n.createElement("link"),"link",e),Ge(r),n.head.appendChild(r)}}},X:function(e,t){Td.X(e,t);var n=Cd;if(n&&e){var r=He(n).hoistableScripts,i=Dd(e),s=r.get(i);s||((s=n.querySelector(Od(i)))||(e=h({src:e,async:!0},t),(t=_d.get(i))&&Fd(e,t),Ge(s=n.createElement("script")),td(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}},S:function(e,t,n){Td.S(e,t,n);var r=Cd;if(r&&e){var i=He(r).hoistableStyles,s=Ad(e);t=t||"default";var o=i.get(s);if(!o){var a={loading:0,preload:null};if(o=r.querySelector(Rd(s)))a.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":t},n),(n=_d.get(s))&&Md(e,n);var l=o=r.createElement("link");Ge(l),td(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){a.loading|=1}),l.addEventListener("error",function(){a.loading|=2}),a.loading|=4,Ld(o,t,r)}o={type:"stylesheet",instance:o,count:1,state:a},i.set(s,o)}}},M:function(e,t){Td.M(e,t);var n=Cd;if(n&&e){var r=He(n).hoistableScripts,i=Dd(e),s=r.get(i);s||((s=n.querySelector(Od(i)))||(e=h({src:e,async:!0,type:"module"},t),(t=_d.get(i))&&Fd(e,t),Ge(s=n.createElement("script")),td(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}}};var Cd="undefined"===typeof document?null:document;function Nd(e,t,n){var r=Cd;if(r&&"string"===typeof t&&t){var i=mt(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"===typeof n&&(i+='[crossorigin="'+n+'"]'),kd.has(i)||(kd.add(i),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(i)&&(td(t=r.createElement("link"),"link",e),Ge(t),r.head.appendChild(t)))}}function Id(e,t,n,r){var i,s,a,l,c=(c=H.current)?Ed(c):null;if(!c)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Ad(n.href),(r=(n=He(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Ad(n.href);var u=He(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Rd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),_d.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},_d.set(e,n),u||(i=c,s=e,a=n,l=d.state,i.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=i.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),td(s,"link",a),Ge(s),i.head.appendChild(s))))),t&&null===r)throw Error(o(528,""));return d}if(t&&null!==r)throw Error(o(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Dd(n),(r=(n=He(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Ad(e){return'href="'+mt(e)+'"'}function Rd(e){return'link[rel="stylesheet"]['+e+"]"}function Pd(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Dd(e){return'[src="'+mt(e)+'"]'}function Od(e){return"script[async]"+e}function jd(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+mt(n.href)+'"]');if(r)return t.instance=r,Ge(r),r;var i=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return Ge(r=(e.ownerDocument||e).createElement("style")),td(r,"style",i),Ld(r,n.precedence,e),t.instance=r;case"stylesheet":i=Ad(n.href);var s=e.querySelector(Rd(i));if(s)return t.state.loading|=4,t.instance=s,Ge(s),s;r=Pd(n),(i=_d.get(i))&&Md(r,i),Ge(s=(e.ownerDocument||e).createElement("link"));var a=s;return a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),td(s,"link",r),t.state.loading|=4,Ld(s,n.precedence,e),t.instance=s;case"script":return s=Dd(n.src),(i=e.querySelector(Od(s)))?(t.instance=i,Ge(i),i):(r=n,(i=_d.get(s))&&Fd(r=h({},n),i),Ge(i=(e=e.ownerDocument||e).createElement("script")),td(i,"link",r),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(o(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Ld(r,n.precedence,e));return t.instance}function Ld(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,s=i,o=0;o<r.length;o++){var a=r[o];if(a.dataset.precedence===t)s=a;else if(s!==i)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Md(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Fd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Ud=null;function Vd(e,t,n){if(null===Ud){var r=new Map,i=Ud=new Map;i.set(n,r)}else(r=(i=Ud).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var s=n[i];if(!(s[Ue]||s[Pe]||"link"===e&&"stylesheet"===s.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==s.namespaceURI){var o=s.getAttribute(t)||"";o=e+o;var a=r.get(o);a?a.push(s):r.set(o,[s])}}return r}function zd(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function Bd(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var qd=null;function Hd(){}function Gd(){if(this.count--,0===this.count)if(this.stylesheets)Kd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Wd=null;function Kd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Wd=new Map,t.forEach(Qd,e),Wd=null,Gd.call(e))}function Qd(e,t){if(!(4&t.state.loading)){var n=Wd.get(e);if(n)var r=n.get(null);else{n=new Map,Wd.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<i.length;s++){var o=i[s];"LINK"!==o.nodeName&&"not all"===o.getAttribute("media")||(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}o=(i=t.instance).getAttribute("data-precedence"),(s=n.get(o)||r)===r&&n.set(null,i),n.set(o,i),this.count++,r=Gd.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),s?s.parentNode.insertBefore(i,s.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var Yd={$$typeof:x,Provider:null,Consumer:null,_currentValue:L,_currentValue2:L,_threadCount:0};function Jd(e,t,n,r,i,s,o,a){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ke(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ke(0),this.hiddenUpdates=ke(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=s,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=a,this.incompleteTransitions=new Map}function Xd(e,t,n,r,i,s,o,a,l,c,u,d){return e=new Jd(e,t,n,o,a,l,c,d),t=1,!0===s&&(t|=24),s=Mr(3,null,null,t),e.current=s,s.stateNode=e,(t=Oi()).refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:r,isDehydrated:n,cache:t},rs(s),e}function $d(e){return e?e=jr:jr}function Zd(e,t,n,r,i,s){i=$d(i),null===r.context?r.context=i:r.pendingContext=i,(r=ss(t)).payload={element:n},null!==(s=void 0===s?null:s)&&(r.callback=s),null!==(n=os(e,r,t))&&(Mc(n,0,t),as(n,e,t))}function eh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function th(e,t){eh(e,t),(e=e.alternate)&&eh(e,t)}function nh(e){if(13===e.tag){var t=Pr(e,67108864);null!==t&&Mc(t,0,67108864),th(e,67108864)}}var rh=!0;function ih(e,t,n,r){var i=O.T;O.T=null;var s=j.p;try{j.p=2,oh(e,t,n,r)}finally{j.p=s,O.T=i}}function sh(e,t,n,r){var i=O.T;O.T=null;var s=j.p;try{j.p=8,oh(e,t,n,r)}finally{j.p=s,O.T=i}}function oh(e,t,n,r){if(rh){var i=ah(r);if(null===i)qu(e,t,r,lh,n),bh(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return hh=wh(hh,e,t,n,r,i),!0;case"dragenter":return fh=wh(fh,e,t,n,r,i),!0;case"mouseover":return ph=wh(ph,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return mh.set(s,wh(mh.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,gh.set(s,wh(gh.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(bh(e,r),4&t&&-1<vh.indexOf(e)){for(;null!==i;){var s=Be(i);if(null!==s)switch(s.tag){case 3:if((s=s.stateNode).current.memoizedState.isDehydrated){var o=ve(s.pendingLanes);if(0!==o){var a=s;for(a.pendingLanes|=2,a.entangledLanes|=2;o;){var l=1<<31-fe(o);a.entanglements[1]|=l,o&=~l}_u(s),0===(6&rc)&&(_c=te()+500,ku(0,!1))}}break;case 13:null!==(a=Pr(s,2))&&Mc(a,0,2),Bc(),th(s,2)}if(null===(s=ah(r))&&qu(e,t,r,lh,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else qu(e,t,r,null,n)}}function ah(e){return ch(e=Rt(e))}var lh=null;function ch(e){if(lh=null,null!==(e=ze(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return lh=e,null}function uh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case re:return 2;case ie:return 8;case se:case oe:return 32;case ae:return 268435456;default:return 32}default:return 32}}var dh=!1,hh=null,fh=null,ph=null,mh=new Map,gh=new Map,yh=[],vh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bh(e,t){switch(e){case"focusin":case"focusout":hh=null;break;case"dragenter":case"dragleave":fh=null;break;case"mouseover":case"mouseout":ph=null;break;case"pointerover":case"pointerout":mh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gh.delete(t.pointerId)}}function wh(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=Be(t))&&nh(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function xh(e){var t=ze(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void function(e,t){var n=j.p;try{return j.p=e,t()}finally{j.p=n}}(e.priority,function(){if(13===n.tag){var e=jc();e=Ne(e);var t=Pr(n,e);null!==t&&Mc(t,0,e),th(n,e)}})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Sh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=ah(e.nativeEvent);if(null!==n)return null!==(t=Be(n))&&nh(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);At=r,n.target.dispatchEvent(r),At=null,t.shift()}return!0}function _h(e,t,n){Sh(e)&&n.delete(t)}function kh(){dh=!1,null!==hh&&Sh(hh)&&(hh=null),null!==fh&&Sh(fh)&&(fh=null),null!==ph&&Sh(ph)&&(ph=null),mh.forEach(_h),gh.forEach(_h)}function Eh(e,t){e.blockedOn===t&&(e.blockedOn=null,dh||(dh=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,kh)))}var Th=null;function Ch(e){Th!==e&&(Th=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Th===e&&(Th=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if("function"!==typeof r){if(null===ch(r||n))continue;break}var s=Be(n);null!==s&&(e.splice(t,3),t-=3,Po(s,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function Nh(e){function t(t){return Eh(t,e)}null!==hh&&Eh(hh,e),null!==fh&&Eh(fh,e),null!==ph&&Eh(ph,e),mh.forEach(t),gh.forEach(t);for(var n=0;n<yh.length;n++){var r=yh[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<yh.length&&null===(n=yh[0]).blockedOn;)xh(n),null===n.blockedOn&&yh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],s=n[r+1],o=i[De]||null;if("function"===typeof s)o||Ch(n);else if(o){var a=null;if(s&&s.hasAttribute("formAction")){if(i=s,o=s[De]||null)a=o.formAction;else if(null!==ch(i))continue}else a=o.action;"function"===typeof a?n[r+1]=a:(n.splice(r,3),r-=3),Ch(n)}}}function Ih(e){this._internalRoot=e}function Ah(e){this._internalRoot=e}Ah.prototype.render=Ih.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Zd(t.current,jc(),e,t,null,null)},Ah.prototype.unmount=Ih.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Zd(e.current,2,null,e,null,null),Bc(),t[Oe]=null}},Ah.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ae();e={blockedOn:null,target:e,priority:t};for(var n=0;n<yh.length&&0!==t&&t<yh[n].priority;n++);yh.splice(n,0,e),0===n&&xh(e)}};var Rh=i.version;if("19.1.1"!==Rh)throw Error(o(527,Rh,"19.1.1"));j.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return u(i),e;if(s===r)return u(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,c=i.child;c;){if(c===n){a=!0,n=i,r=s;break}if(c===r){a=!0,r=i,n=s;break}c=c.sibling}if(!a){for(c=s.child;c;){if(c===n){a=!0,n=s,r=i;break}if(c===r){a=!0,r=s,n=i;break}c=c.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?d(e):null)?null:e.stateNode};var Ph={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.1.1"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Dh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dh.isDisabled&&Dh.supportsFiber)try{ue=Dh.inject(Ph),de=Dh}catch(jh){}}t.createRoot=function(e,t){if(!a(e))throw Error(o(299));var n=!1,r="",i=ba,s=wa,l=xa;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(s=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Xd(e,1,!1,null,0,n,r,i,s,l,0,null),e[Oe]=t.current,zu(e),new Ih(t)},t.hydrateRoot=function(e,t,n){if(!a(e))throw Error(o(299));var r=!1,i="",s=ba,l=wa,c=xa,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onUncaughtError&&(s=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(u=n.formState)),(t=Xd(e,1,!0,t,0,r,i,s,l,c,0,u)).context=$d(null),n=t.current,(i=ss(r=Ne(r=jc()))).callback=null,os(n,i,r),n=r,t.current.lanes=n,Ee(t,n),_u(t),e[Oe]=t.current,zu(e),new Ah(t)},t.version="19.1.1"},43:(e,t,n)=>{e.exports=n(288)},288:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,m(w,y.prototype),w.isPureReactComponent=!0;var x=Array.isArray,S={H:null,A:null,T:null,S:null,V:null},_=Object.prototype.hasOwnProperty;function k(e,t,r,i,s,o){return r=o.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:o}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function N(){}function I(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(a){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case h:return I((u=e._init)(e._payload),t,i,s,o)}}if(u)return o=o(e),u=""===s?"."+C(e,0):s,x(o)?(i="",null!=u&&(i=u.replace(T,"$&/")+"/"),I(o,t,i,"",function(e){return e})):null!=o&&(E(o)&&(l=o,c=i+(null==o.key||e&&e.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+u,o=k(l.type,c,void 0,0,0,l.props)),t.push(o)),1;u=0;var d,p=""===s?".":s+":";if(x(e))for(var m=0;m<e.length;m++)u+=I(s=e[m],t,i,a=p+C(s,m),o);else if("function"===typeof(m=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=f&&d[f]||d["@@iterator"])?d:null))for(e=m.call(e),m=0;!(s=e.next()).done;)u+=I(s=s.value,t,i,a=p+C(s,m++),o);else if("object"===a){if("function"===typeof e.then)return I(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(N,N):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,i,s,o);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function A(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",function(e){return t.call(n,e,i++)}),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function D(){}t.Children={map:A,forEach:function(e,t,n){A(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return S.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=m({},e.props),i=e.key;if(null!=t)for(s in void 0!==t.ref&&void 0,void 0!==t.key&&(i=""+t.key),t)!_.call(t,s)||"key"===s||"__self"===s||"__source"===s||"ref"===s&&void 0===t.ref||(r[s]=t[s]);var s=arguments.length-2;if(1===s)r.children=n;else if(1<s){for(var o=Array(s),a=0;a<s;a++)o[a]=arguments[a+2];r.children=o}return k(e.type,i,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:a,_context:e},e},t.createElement=function(e,t,n){var r,i={},s=null;if(null!=t)for(r in void 0!==t.key&&(s=""+t.key),t)_.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var o=arguments.length-2;if(1===o)i.children=n;else if(1<o){for(var a=Array(o),l=0;l<o;l++)a[l]=arguments[l+2];i.children=a}if(e&&e.defaultProps)for(r in o=e.defaultProps)void 0===i[r]&&(i[r]=o[r]);return k(e,s,void 0,0,0,i)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=S.T,n={};S.T=n;try{var r=e(),i=S.S;null!==i&&i(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(D,P)}catch(s){P(s)}finally{S.T=t}},t.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},t.use=function(e){return S.H.use(e)},t.useActionState=function(e,t,n){return S.H.useActionState(e,t,n)},t.useCallback=function(e,t){return S.H.useCallback(e,t)},t.useContext=function(e){return S.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return S.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var r=S.H;if("function"===typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},t.useId=function(){return S.H.useId()},t.useImperativeHandle=function(e,t,n){return S.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return S.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return S.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return S.H.useMemo(e,t)},t.useOptimistic=function(e,t){return S.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return S.H.useReducer(e,t,n)},t.useRef=function(e){return S.H.useRef(e)},t.useState=function(e){return S.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return S.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return S.H.useTransition()},t.version="19.1.1"},391:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},579:(e,t,n)=>{e.exports=n(799)},672:(e,t,n)=>{var r=n(43);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var o={d:{f:s,r:function(){throw Error(i(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},a=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(i(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:a,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=o.p;try{if(l.T=null,o.p=2,e)return e()}finally{l.T=t,o.p=n,o.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,o.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&o.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),i="string"===typeof t.integrity?t.integrity:void 0,s="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?o.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:s}):"script"===n&&o.d.X(e,{crossOrigin:r,integrity:i,fetchPriority:s,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);o.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&o.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);o.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);o.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else o.d.m(e)},t.requestFormReset=function(e){o.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.1"},799:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(e,t,r){var i=null;if(void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),"key"in t)for(var s in r={},t)"key"!==s&&(r[s]=t[s]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:i,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=i,t.jsxs=i},853:(e,t,n)=>{e.exports=n(896)},896:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,y=!1,v="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function S(e){if(g=!1,x(e),!m)if(null!==r(c))m=!0,k||(k=!0,_());else{var t=r(u);null!==t&&P(S,t.startTime-e)}}var _,k=!1,E=-1,T=5,C=-1;function N(){return!!y||!(t.unstable_now()-C<T)}function I(){if(y=!1,k){var e=t.unstable_now();C=e;var n=!0;try{e:{m=!1,g&&(g=!1,b(E),E=-1),p=!0;var s=f;try{t:{for(x(e),h=r(c);null!==h&&!(h.expirationTime>e&&N());){var o=h.callback;if("function"===typeof o){h.callback=null,f=h.priorityLevel;var a=o(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof a){h.callback=a,x(e),n=!0;break t}h===r(c)&&i(c),x(e)}else i(c);h=r(c)}if(null!==h)n=!0;else{var l=r(u);null!==l&&P(S,l.startTime-e),n=!1}}break e}finally{h=null,f=s,p=!1}n=void 0}}finally{n?_():k=!1}}}if("function"===typeof w)_=function(){w(I)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,R=A.port2;A.port1.onmessage=I,_=function(){R.postMessage(null)}}else _=function(){v(I,0)};function P(e,n){E=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_requestPaint=function(){y=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(b(E),E=-1):g=!0,P(S,s-o))):(e.sortIndex=a,n(c,e),m||p||(m=!0,k||(k=!0,_()))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.m=e,n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+".7c8176c0.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="molecular-genetic-pathology-curriculum:";n.l=(r,i,s,o)=>{if(e[r])e[r].push(i);else{var a,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+s){a=d;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+s),a.src=r),e[r]=[i];var h=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach(e=>e(n)),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var s=new Promise((n,r)=>i=e[t]=[n,r]);r.push(i[2]=s);var o=n.p+n.u(t),a=new Error;n.l(o,r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,i[1](a)}},"chunk-"+t,t)}};var t=(t,r)=>{var i,s,o=r[0],a=r[1],l=r[2],c=0;if(o.some(t=>0!==e[t])){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)l(n)}for(t&&t(r);c<o.length;c++)s=o[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunkmolecular_genetic_pathology_curriculum=self.webpackChunkmolecular_genetic_pathology_curriculum||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n(43),i=n(391);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function o(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}function a(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){a(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const u=[{id:1,topic:"Normal Structure and Function",level:"Core",duration:"4 weeks",subtopics:["Chromosomes","Genes","Exons, Introns, Non-Coding DNA","Repetitive Elements (e.g., STRs, Microsatellite)","mRNA and tRNA","miRNA and lncRNA","Transcription, Translation, and Post-Translational Modification","Mitosis","Meiosis","Gene Nomenclature","Protein Nomenclature","Variant Nomenclature"]},{id:2,topic:"Molecular Genetic Principles",level:"Core",duration:"6 weeks",subtopics:["Ploidy","Copy Number Variants (CNV)","Deletions, Duplications, Inversions","Single Nucleotide Polymorphisms (SNPs)","Methylation, Epigenetics","Trinucleotide Repeats","Multifactorial Events","Mismatch Repair","Point Mutations","Mosaicism","Mendelian Inheritance","Non-Mendelian Inheritance","Oncogenes (Inherited)","Tumor Suppressor Genes (Inherited)","Risk Calculations","Hardy Weinberg Principle","Oncogenes (Somatic)","Tumor Suppressor Genes (Somatic)","Loss of Heterozygosity (LOH)","Microsatellite Instability (MSI)","Clonality","Genomic Instability"]},{id:3,topic:"Techniques and Methods",level:"Core",duration:"8 weeks",subtopics:["Cytogenetics","PCR, RT-PCR, and other NAAT","FISH","Nucleic Acid Isolation & Quantitation","Restriction Enzyme Digestion","Fragment Analysis","Quantitative PCR and RT-PCR","Nucleic Acid Sequencing","Next Generation Sequencing","Constitutional Arrays","Somatic Arrays","Melt Curve Analysis","Tumor Mutational Burden"]},{id:4,topic:"Assay Performance and Validation",level:"Core",duration:"4 weeks",subtopics:["Proficiency Testing","Validation versus Verification","Preanalytical Considerations","Stability","Specimen Selection","Specimen Collection","Anticoagulant","Fixation","Results, Interpretation, & Follow-up Testing","Variant Classification","Reporting"]},{id:5,topic:"Quality",level:"Core",duration:"3 weeks",subtopics:["Quality Assurance","Quality Control","Internal Controls","Quantitative Controls"]},{id:6,topic:"Ethical, Legal, and Regulatory Issues",level:"Advanced Resident",duration:"4 weeks",subtopics:["IRB","Consent","HIPAA","GINA","Gene Patent","CLIA","CAP","CMS","FDA: LDT/LDP, IUO, RUO","CPT","ICD","Laboratory Utilization"]},{id:7,topic:"Indications for Testing",level:"Advanced Resident",duration:"3 weeks",subtopics:["Presymptomatic / Predictive","Diagnostic","Preimplantation Genetic Diagnosis (PGD)","Carrier Screening","Newborn Screening"]}],d={books:[{id:1,title:"Molecular Pathology: The Molecular Basis of Human Disease",author:"William B. Coleman, Gregory J. Tsongalis",publisher:"Academic Press",edition:"3rd Edition",isbn:"978-0123864567",topics:[1,2,3,4]},{id:2,title:"Diagnostic Molecular Pathology: A Guide to Applied Molecular Testing",author:"William B. Coleman, Gregory J. Tsongalis",publisher:"Academic Press",edition:"1st Edition",isbn:"978-0123945853",topics:[3,4,5]},{id:3,title:"Clinical Genomics: Practical Applications in Adult Patient Care",author:"Michael F. Murray, Mark W. Babyatsky",publisher:"McGraw-Hill Education",edition:"1st Edition",isbn:"978-0071622443",topics:[1,2,7]}],journals:[{id:1,title:"The Journal of Molecular Diagnostics",publisher:"American Society for Investigative Pathology",impactFactor:"4.1",url:"https://www.jmdjournal.org/",topics:[1,2,3,4,5,6,7]},{id:2,title:"Genetics in Medicine",publisher:"American College of Medical Genetics and Genomics",impactFactor:"9.9",url:"https://www.nature.com/gim/",topics:[1,2,6,7]},{id:3,title:"Modern Pathology",publisher:"Nature Publishing Group",impactFactor:"6.3",url:"https://www.nature.com/modpathol/",topics:[1,2,3,4,5]}],links:[{id:1,title:"NCBI Gene Database",url:"https://www.ncbi.nlm.nih.gov/gene/",description:"Comprehensive gene information database",topics:[1,2]},{id:2,title:"ClinVar Database",url:"https://www.ncbi.nlm.nih.gov/clinvar/",description:"Public archive of human genetic variants",topics:[2,4,7]},{id:3,title:"ACMG Guidelines",url:"https://www.acmg.net/",description:"American College of Medical Genetics guidelines",topics:[6,7]}]},h=[{id:1,question:"Which of the following best describes the Hardy-Weinberg principle?",options:["A) Allele frequencies remain constant in a population under certain conditions","B) Dominant alleles always increase in frequency over time","C) Recessive alleles are always harmful to the organism","D) Mutations always lead to evolution"],correctAnswer:0,explanation:"The Hardy-Weinberg principle states that allele frequencies in a population remain constant from generation to generation under certain conditions (no mutation, no migration, large population size, random mating, and no selection).",topic:2,subtopic:"Hardy Weinberg Principle",level:"Core",difficulty:"Medium"},{id:2,question:"What is the primary advantage of next-generation sequencing over Sanger sequencing?",options:["A) Higher accuracy","B) Lower cost per base","C) Longer read lengths","D) Better for single gene analysis"],correctAnswer:1,explanation:"Next-generation sequencing provides massively parallel sequencing, allowing for much lower cost per base compared to Sanger sequencing, making it feasible for whole genome or exome sequencing.",topic:3,subtopic:"Next Generation Sequencing",level:"Core",difficulty:"Medium"},{id:3,question:"Which regulatory body oversees laboratory-developed tests (LDTs) in the United States?",options:["A) CLIA","B) CAP","C) FDA","D) CMS"],correctAnswer:2,explanation:"The FDA has regulatory authority over laboratory-developed tests (LDTs), though this is currently under review and may change with new regulations.",topic:6,subtopic:"FDA: LDT/LDP, IUO, RUO",level:"Advanced Resident",difficulty:"Hard"}],f=[{id:1,title:"PCR Optimization Project",description:"Design and optimize a PCR assay for detecting a specific genetic variant",duration:"2 weeks",topic:3,subtopic:"PCR, RT-PCR, and other NAAT",deliverables:["Protocol development","Optimization results","Validation data","Written report"],resources:[1,2],dueDate:"2024-02-15"},{id:2,title:"Variant Interpretation Case Study",description:"Analyze and interpret a complex genetic variant using ACMG guidelines",duration:"1 week",topic:4,subtopic:"Variant Classification",deliverables:["Variant analysis","Classification justification","Clinical significance assessment","Presentation"],resources:[1,3],dueDate:"2024-02-22"},{id:3,title:"Quality Control Assessment",description:"Evaluate quality control procedures for a molecular diagnostic assay",duration:"1 week",topic:5,subtopic:"Quality Control",deliverables:["QC procedure review","Statistical analysis","Recommendations","Implementation plan"],resources:[2],dueDate:"2024-03-01"}],p={year1:[{month:1,name:"January",topics:[{id:1,topic:"Normal Structure and Function",level:"Core",duration:"4 weeks",focus:"Chromosomes, Genes, Basic Structure",subtopics:["Chromosomes","Genes","Exons, Introns, Non-Coding DNA","Repetitive Elements"]}],projects:["Basic Genetics Review Project"],assessments:["Chromosome Structure Quiz"]},{month:2,name:"February",topics:[{id:1,topic:"Normal Structure and Function",level:"Core",duration:"4 weeks",focus:"RNA and Protein Processing",subtopics:["mRNA and tRNA","miRNA and lncRNA","Transcription, Translation","Post-Translational Modification"]}],projects:["RNA Processing Analysis"],assessments:["Protein Synthesis Quiz"]},{month:3,name:"March",topics:[{id:1,topic:"Normal Structure and Function",level:"Core",duration:"4 weeks",focus:"Cell Division and Nomenclature",subtopics:["Mitosis","Meiosis","Gene Nomenclature","Protein Nomenclature","Variant Nomenclature"]}],projects:["Cell Division Simulation"],assessments:["Nomenclature Standards Test"]},{month:4,name:"April",topics:[{id:2,topic:"Molecular Genetic Principles",level:"Core",duration:"6 weeks",focus:"Basic Genetic Variants",subtopics:["Ploidy","Copy Number Variants (CNV)","Deletions, Duplications, Inversions","Single Nucleotide Polymorphisms (SNPs)"]}],projects:["CNV Analysis Project"],assessments:["Genetic Variants Quiz"]},{month:5,name:"May",topics:[{id:2,topic:"Molecular Genetic Principles",level:"Core",duration:"6 weeks",focus:"Epigenetics and Complex Inheritance",subtopics:["Methylation, Epigenetics","Trinucleotide Repeats","Multifactorial Events","Mismatch Repair"]}],projects:["Epigenetics Research Project"],assessments:["Epigenetics Assessment"]},{month:6,name:"June",topics:[{id:2,topic:"Molecular Genetic Principles",level:"Core",duration:"6 weeks",focus:"Inheritance Patterns",subtopics:["Point Mutations","Mosaicism","Mendelian Inheritance","Non-Mendelian Inheritance"]}],projects:["Pedigree Analysis Project"],assessments:["Inheritance Patterns Exam"]},{month:7,name:"July",topics:[{id:2,topic:"Molecular Genetic Principles",level:"Core",duration:"6 weeks",focus:"Cancer Genetics",subtopics:["Oncogenes (Inherited)","Tumor Suppressor Genes (Inherited)","Risk Calculations","Hardy Weinberg Principle"]}],projects:["Cancer Risk Assessment"],assessments:["Cancer Genetics Quiz"]},{month:8,name:"August",topics:[{id:2,topic:"Molecular Genetic Principles",level:"Core",duration:"6 weeks",focus:"Somatic Mutations",subtopics:["Oncogenes (Somatic)","Tumor Suppressor Genes (Somatic)","Loss of Heterozygosity (LOH)","Microsatellite Instability (MSI)"]}],projects:["Somatic Mutation Analysis"],assessments:["Somatic Genetics Test"]},{month:9,name:"September",topics:[{id:2,topic:"Molecular Genetic Principles",level:"Core",duration:"6 weeks",focus:"Genomic Instability",subtopics:["Clonality","Genomic Instability"]},{id:3,topic:"Techniques and Methods",level:"Core",duration:"8 weeks",focus:"Basic Techniques",subtopics:["Cytogenetics","PCR, RT-PCR, and other NAAT"]}],projects:["Genomic Instability Study"],assessments:["Principles Comprehensive Exam"]},{month:10,name:"October",topics:[{id:3,topic:"Techniques and Methods",level:"Core",duration:"8 weeks",focus:"Fluorescence and Analysis",subtopics:["FISH","Nucleic Acid Isolation & Quantitation","Restriction Enzyme Digestion","Fragment Analysis"]}],projects:["FISH Technique Project"],assessments:["Molecular Techniques Quiz"]},{month:11,name:"November",topics:[{id:3,topic:"Techniques and Methods",level:"Core",duration:"8 weeks",focus:"Quantitative Methods",subtopics:["Quantitative PCR and RT-PCR","Nucleic Acid Sequencing","Next Generation Sequencing"]}],projects:["NGS Data Analysis Project"],assessments:["Quantitative Methods Test"]},{month:12,name:"December",topics:[{id:3,topic:"Techniques and Methods",level:"Core",duration:"8 weeks",focus:"Advanced Techniques",subtopics:["Constitutional Arrays","Somatic Arrays","Melt Curve Analysis","Tumor Mutational Burden"]}],projects:["Array Analysis Project"],assessments:["Year 1 Comprehensive Exam"]}],year2:[{month:13,name:"January",topics:[{id:4,topic:"Assay Performance and Validation",level:"Core",duration:"4 weeks",focus:"Validation Principles",subtopics:["Proficiency Testing","Validation versus Verification","Preanalytical Considerations"]}],projects:["Assay Validation Project"],assessments:["Validation Principles Quiz"]},{month:14,name:"February",topics:[{id:4,topic:"Assay Performance and Validation",level:"Core",duration:"4 weeks",focus:"Specimen Handling",subtopics:["Stability","Specimen Selection","Specimen Collection","Anticoagulant","Fixation"]}],projects:["Specimen Stability Study"],assessments:["Specimen Handling Test"]},{month:15,name:"March",topics:[{id:4,topic:"Assay Performance and Validation",level:"Core",duration:"4 weeks",focus:"Results and Reporting",subtopics:["Results, Interpretation, & Follow-up Testing","Variant Classification","Reporting"]}],projects:["Variant Classification Project"],assessments:["Reporting Standards Quiz"]},{month:16,name:"April",topics:[{id:5,topic:"Quality",level:"Core",duration:"3 weeks",focus:"Quality Systems",subtopics:["Quality Assurance","Quality Control","Internal Controls","Quantitative Controls"]}],projects:["Quality System Audit"],assessments:["Quality Management Test"]},{month:17,name:"May",topics:[{id:6,topic:"Ethical, Legal, and Regulatory Issues",level:"Advanced Resident",duration:"4 weeks",focus:"Regulatory Framework",subtopics:["IRB","Consent","HIPAA","GINA","Gene Patent"]}],projects:["Regulatory Compliance Review"],assessments:["Regulatory Knowledge Quiz"]},{month:18,name:"June",topics:[{id:6,topic:"Ethical, Legal, and Regulatory Issues",level:"Advanced Resident",duration:"4 weeks",focus:"Laboratory Standards",subtopics:["CLIA","CAP","CMS","FDA: LDT/LDP, IUO, RUO"]}],projects:["Laboratory Accreditation Project"],assessments:["Laboratory Standards Exam"]},{month:19,name:"July",topics:[{id:6,topic:"Ethical, Legal, and Regulatory Issues",level:"Advanced Resident",duration:"4 weeks",focus:"Billing and Utilization",subtopics:["CPT","ICD","Laboratory Utilization"]}],projects:["Billing Analysis Project"],assessments:["Billing and Coding Quiz"]},{month:20,name:"August",topics:[{id:7,topic:"Indications for Testing",level:"Advanced Resident",duration:"3 weeks",focus:"Predictive and Diagnostic Testing",subtopics:["Presymptomatic / Predictive","Diagnostic"]}],projects:["Testing Indication Case Studies"],assessments:["Testing Indications Quiz"]},{month:21,name:"September",topics:[{id:7,topic:"Indications for Testing",level:"Advanced Resident",duration:"3 weeks",focus:"Specialized Testing",subtopics:["Preimplantation Genetic Diagnosis (PGD)","Carrier Screening","Newborn Screening"]}],projects:["Specialized Testing Protocol"],assessments:["Specialized Testing Exam"]},{month:22,name:"October",topics:[{id:1,topic:"Normal Structure and Function",level:"Core",duration:"Review",focus:"Comprehensive Review",subtopics:["All Core Concepts Review"]}],projects:["Comprehensive Case Study 1"],assessments:["Mock Board Exam 1"]},{month:23,name:"November",topics:[{id:2,topic:"Molecular Genetic Principles",level:"Core",duration:"Review",focus:"Advanced Principles Review",subtopics:["All Principles Review"]}],projects:["Comprehensive Case Study 2"],assessments:["Mock Board Exam 2"]},{month:24,name:"December",topics:[{id:3,topic:"Techniques and Methods",level:"Core",duration:"Review",focus:"Final Review and Preparation",subtopics:["All Techniques Review"]}],projects:["Final Capstone Project"],assessments:["Final Board Exam"]}]},m=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},g={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let d=(15&o)<<2|l>>6,h=63&l;a||(h=64,s||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(m(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new y;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class y extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const v=function(e){return function(e){const t=m(e);return g.encodeByteArray(t,!0)}(e).replace(/\./g,"")},b=function(e){try{return g.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function w(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const x=()=>{try{return w().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&b(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},S=e=>{var t;return null===(t=x())||void 0===t||null===(t=t.emulatorHosts)||void 0===t?void 0:t[e]},_=e=>{const t=S(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},k=()=>{var e;return null===(e=x())||void 0===e?void 0:e.config},E=e=>{var t;return null===(t=x())||void 0===t?void 0:t["_".concat(e)]};class T{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function C(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function N(e){return(await fetch(e,{credentials:"include"})).ok}function I(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=c({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[v(JSON.stringify({alg:"none",type:"JWT"})),v(JSON.stringify(s)),""].join(".")}const A={};let R=!1;function P(e,t){if("undefined"===typeof window||"undefined"===typeof document||!C(window.location.host)||A[e]===t||A[e]||R)return;function n(e){return"__firebase__banner__".concat(e)}A[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(A))A[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{R=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function o(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),o=document.getElementById(t)||document.createElement("span"),a=n("learnmore"),l=document.getElementById(a)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,a);const n=s();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,o,l,n),document.body.appendChild(t)}i?(o.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',o.innerText="Preview backend running in this workspace."),o.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",o):o()}function D(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function O(){var e;const t=null===(e=x())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function j(){return!O()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function L(){try{return"object"===typeof indexedDB}catch(e){return!1}}class M extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,M.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,F.prototype.create)}}class F{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(U,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new M(n,s,t)}}const U=/\{\$([^}]+)}/g;function V(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(z(n)&&z(s)){if(!V(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function z(e){return null!==e&&"object"===typeof e}function B(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function q(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function H(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class G{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=W),void 0===r.error&&(r.error=W),void 0===r.complete&&(r.complete=W);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function W(){}function K(e){return e&&e._delegate?e._delegate:e}class Q{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Y="[DEFAULT]";class J{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new T;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Y})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===Y?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(s){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y;return this.component?this.component.multipleInstances?e:Y:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class X{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new J(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const $=[];var Z;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Z||(Z={}));const ee={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},te=Z.INFO,ne={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},re=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=ne[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class ie{constructor(e){this.name=e,this._logLevel=te,this._logHandler=re,this._userLogHandler=null,$.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Z))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?ee[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...t),this._logHandler(this,Z.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...t),this._logHandler(this,Z.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Z.INFO,...t),this._logHandler(this,Z.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Z.WARN,...t),this._logHandler(this,Z.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...t),this._logHandler(this,Z.ERROR,...t)}}let se,oe;const ae=new WeakMap,le=new WeakMap,ce=new WeakMap,ue=new WeakMap,de=new WeakMap;let he={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return le.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ce.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return me(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function fe(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(oe||(oe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(ge(this),n),me(ae.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return me(e.apply(ge(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(ge(this),t,...r);return ce.set(s,t.sort?t.sort():[t]),me(s)}}function pe(e){return"function"===typeof e?fe(e):(e instanceof IDBTransaction&&function(e){if(le.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});le.set(e,t)}(e),t=e,(se||(se=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,he):e);var t}function me(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(me(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&ae.set(t,e)}).catch(()=>{}),de.set(t,e),t}(e);if(ue.has(e))return ue.get(e);const t=pe(e);return t!==e&&(ue.set(e,t),de.set(t,e)),t}const ge=e=>de.get(e);const ye=["get","getKey","getAll","getAllKeys","count"],ve=["put","add","delete","clear"],be=new Map;function we(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(be.get(t))return be.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=ve.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!ye.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return be.set(t,s),s}he=(e=>c(c({},e),{},{get:(t,n,r)=>we(t,n)||e.get(t,n,r),has:(t,n)=>!!we(t,n)||e.has(t,n)}))(he);class xe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const Se="@firebase/app",_e="0.14.4",ke=new ie("@firebase/app"),Ee="@firebase/app-compat",Te="@firebase/analytics-compat",Ce="@firebase/analytics",Ne="@firebase/app-check-compat",Ie="@firebase/app-check",Ae="@firebase/auth",Re="@firebase/auth-compat",Pe="@firebase/database",De="@firebase/data-connect",Oe="@firebase/database-compat",je="@firebase/functions",Le="@firebase/functions-compat",Me="@firebase/installations",Fe="@firebase/installations-compat",Ue="@firebase/messaging",Ve="@firebase/messaging-compat",ze="@firebase/performance",Be="@firebase/performance-compat",qe="@firebase/remote-config",He="@firebase/remote-config-compat",Ge="@firebase/storage",We="@firebase/storage-compat",Ke="@firebase/firestore",Qe="@firebase/ai",Ye="@firebase/firestore-compat",Je="firebase",Xe="[DEFAULT]",$e={[Se]:"fire-core",[Ee]:"fire-core-compat",[Ce]:"fire-analytics",[Te]:"fire-analytics-compat",[Ie]:"fire-app-check",[Ne]:"fire-app-check-compat",[Ae]:"fire-auth",[Re]:"fire-auth-compat",[Pe]:"fire-rtdb",[De]:"fire-data-connect",[Oe]:"fire-rtdb-compat",[je]:"fire-fn",[Le]:"fire-fn-compat",[Me]:"fire-iid",[Fe]:"fire-iid-compat",[Ue]:"fire-fcm",[Ve]:"fire-fcm-compat",[ze]:"fire-perf",[Be]:"fire-perf-compat",[qe]:"fire-rc",[He]:"fire-rc-compat",[Ge]:"fire-gcs",[We]:"fire-gcs-compat",[Ke]:"fire-fst",[Ye]:"fire-fst-compat",[Qe]:"fire-vertex","fire-js":"fire-js",[Je]:"fire-js-all"},Ze=new Map,et=new Map,tt=new Map;function nt(e,t){try{e.container.addComponent(t)}catch(n){ke.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function rt(e){const t=e.name;if(tt.has(t))return ke.debug("There were multiple attempts to register component ".concat(t,".")),!1;tt.set(t,e);for(const n of Ze.values())nt(n,e);for(const n of et.values())nt(n,e);return!0}function it(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function st(e){return null!==e&&void 0!==e&&void 0!==e.settings}const ot=new F("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class at{constructor(e,t,n){this._isDeleted=!1,this._options=c({},e),this._config=c({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Q("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ot.create("app-deleted",{appName:this._name})}}const lt="12.4.0";function ct(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=c({name:Xe,automaticDataCollectionEnabled:!0},t),i=r.name;if("string"!==typeof i||!i)throw ot.create("bad-app-name",{appName:String(i)});if(n||(n=k()),!n)throw ot.create("no-options");const s=Ze.get(i);if(s){if(V(n,s.options)&&V(r,s.config))return s;throw ot.create("duplicate-app",{appName:i})}const o=new X(i);for(const l of tt.values())o.addComponent(l);const a=new at(n,r,o);return Ze.set(i,a),a}function ut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe;const t=Ze.get(e);if(!t&&e===Xe&&k())return ct();if(!t)throw ot.create("no-app",{appName:e});return t}function dt(e,t,n){var r;let i=null!==(r=$e[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void ke.warn(e.join(" "))}rt(new Q("".concat(i,"-version"),()=>({library:i,version:t}),"VERSION"))}const ht="firebase-heartbeat-store";let ft=null;function pt(){return ft||(ft=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=me(o);return r&&o.addEventListener("upgradeneeded",e=>{r(me(o.result),e.oldVersion,e.newVersion,me(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(ht)}catch(n){console.warn(n)}}}).catch(e=>{throw ot.create("idb-open",{originalErrorMessage:e.message})})),ft}async function mt(e,t){try{const n=(await pt()).transaction(ht,"readwrite"),r=n.objectStore(ht);await r.put(t,gt(e)),await n.done}catch(n){if(n instanceof M)ke.warn(n.message);else{const e=ot.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});ke.warn(e.message)}}}function gt(e){return"".concat(e.name,"!").concat(e.options.appId)}class yt{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new bt(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=vt();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){ke.warn(n)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=vt(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),wt(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),wt(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=v(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return ke.warn(t),""}}}function vt(){return(new Date).toISOString().substring(0,10)}class bt{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!L()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await pt()).transaction(ht),n=await t.objectStore(ht).get(gt(e));return await t.done,n}catch(t){if(t instanceof M)ke.warn(t.message);else{const e=ot.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});ke.warn(e.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return mt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return mt(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function wt(e){return v(JSON.stringify({version:2,heartbeats:e})).length}var xt;xt="",rt(new Q("platform-logger",e=>new xe(e),"PRIVATE")),rt(new Q("heartbeat",e=>new yt(e),"PRIVATE")),dt(Se,_e,xt),dt(Se,_e,"esm2020"),dt("fire-js","");var St,_t,kt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Et={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}function n(e,t,n){n||(n=0);const r=Array(16);if("string"===typeof t)for(var i=0;i<16;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;i<16;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];let s,o=e.g[3];s=t+(o^n&(i^o))+r[0]+3614090360&4294967295,s=o+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[1]+3905402710&4294967295,o=t+(s<<12&4294967295|s>>>20),s=i+(n^o&(t^n))+r[2]+606105819&4294967295,s=n+(t^(i=o+(s<<17&4294967295|s>>>15))&(o^t))+r[3]+3250441966&4294967295,s=t+(o^(n=i+(s<<22&4294967295|s>>>10))&(i^o))+r[4]+4118548399&4294967295,s=o+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[5]+1200080426&4294967295,o=t+(s<<12&4294967295|s>>>20),s=i+(n^o&(t^n))+r[6]+2821735955&4294967295,s=n+(t^(i=o+(s<<17&4294967295|s>>>15))&(o^t))+r[7]+4249261313&4294967295,s=t+(o^(n=i+(s<<22&4294967295|s>>>10))&(i^o))+r[8]+1770035416&4294967295,s=o+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[9]+2336552879&4294967295,o=t+(s<<12&4294967295|s>>>20),s=i+(n^o&(t^n))+r[10]+4294925233&4294967295,s=n+(t^(i=o+(s<<17&4294967295|s>>>15))&(o^t))+r[11]+2304563134&4294967295,s=t+(o^(n=i+(s<<22&4294967295|s>>>10))&(i^o))+r[12]+1804603682&4294967295,s=o+(i^(t=n+(s<<7&4294967295|s>>>25))&(n^i))+r[13]+4254626195&4294967295,o=t+(s<<12&4294967295|s>>>20),s=i+(n^o&(t^n))+r[14]+2792965006&4294967295,s=n+(t^(i=o+(s<<17&4294967295|s>>>15))&(o^t))+r[15]+1236535329&4294967295,s=t+(i^o&((n=i+(s<<22&4294967295|s>>>10))^i))+r[1]+4129170786&4294967295,s=o+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[6]+3225465664&4294967295,o=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(o^t))+r[11]+643717713&4294967295,s=n+(o^t&((i=o+(s<<14&4294967295|s>>>18))^o))+r[0]+3921069994&4294967295,s=t+(i^o&((n=i+(s<<20&4294967295|s>>>12))^i))+r[5]+3593408605&4294967295,s=o+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[10]+38016083&4294967295,o=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(o^t))+r[15]+3634488961&4294967295,s=n+(o^t&((i=o+(s<<14&4294967295|s>>>18))^o))+r[4]+3889429448&4294967295,s=t+(i^o&((n=i+(s<<20&4294967295|s>>>12))^i))+r[9]+568446438&4294967295,s=o+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[14]+3275163606&4294967295,o=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(o^t))+r[3]+4107603335&4294967295,s=n+(o^t&((i=o+(s<<14&4294967295|s>>>18))^o))+r[8]+1163531501&4294967295,s=t+(i^o&((n=i+(s<<20&4294967295|s>>>12))^i))+r[13]+2850285829&4294967295,s=o+(n^i&((t=n+(s<<5&4294967295|s>>>27))^n))+r[2]+4243563512&4294967295,o=t+(s<<9&4294967295|s>>>23),s=i+(t^n&(o^t))+r[7]+1735328473&4294967295,s=n+(o^t&((i=o+(s<<14&4294967295|s>>>18))^o))+r[12]+2368359562&4294967295,s=t+((n=i+(s<<20&4294967295|s>>>12))^i^o)+r[5]+4294588738&4294967295,s=o+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[8]+2272392833&4294967295,o=t+(s<<11&4294967295|s>>>21),s=i+(o^t^n)+r[11]+1839030562&4294967295,s=n+((i=o+(s<<16&4294967295|s>>>16))^o^t)+r[14]+4259657740&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^o)+r[1]+2763975236&4294967295,s=o+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[4]+1272893353&4294967295,o=t+(s<<11&4294967295|s>>>21),s=i+(o^t^n)+r[7]+4139469664&4294967295,s=n+((i=o+(s<<16&4294967295|s>>>16))^o^t)+r[10]+3200236656&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^o)+r[13]+681279174&4294967295,s=o+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[0]+3936430074&4294967295,o=t+(s<<11&4294967295|s>>>21),s=i+(o^t^n)+r[3]+3572445317&4294967295,s=n+((i=o+(s<<16&4294967295|s>>>16))^o^t)+r[6]+76029189&4294967295,s=t+((n=i+(s<<23&4294967295|s>>>9))^i^o)+r[9]+3654602809&4294967295,s=o+((t=n+(s<<4&4294967295|s>>>28))^n^i)+r[12]+3873151461&4294967295,o=t+(s<<11&4294967295|s>>>21),s=i+(o^t^n)+r[15]+530742520&4294967295,s=n+((i=o+(s<<16&4294967295|s>>>16))^o^t)+r[2]+3299628645&4294967295,s=t+(i^((n=i+(s<<23&4294967295|s>>>9))|~o))+r[0]+4096336452&4294967295,s=o+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[7]+1126891415&4294967295,o=t+(s<<10&4294967295|s>>>22),s=i+(t^(o|~n))+r[14]+2878612391&4294967295,s=n+(o^((i=o+(s<<15&4294967295|s>>>17))|~t))+r[5]+4237533241&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~o))+r[12]+1700485571&4294967295,s=o+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[3]+2399980690&4294967295,o=t+(s<<10&4294967295|s>>>22),s=i+(t^(o|~n))+r[10]+4293915773&4294967295,s=n+(o^((i=o+(s<<15&4294967295|s>>>17))|~t))+r[1]+2240044497&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~o))+r[8]+1873313359&4294967295,s=o+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[15]+4264355552&4294967295,o=t+(s<<10&4294967295|s>>>22),s=i+(t^(o|~n))+r[6]+2734768916&4294967295,s=n+(o^((i=o+(s<<15&4294967295|s>>>17))|~t))+r[13]+1309151649&4294967295,s=t+(i^((n=i+(s<<21&4294967295|s>>>11))|~o))+r[4]+4149444226&4294967295,s=o+(n^((t=n+(s<<6&4294967295|s>>>26))|~i))+r[11]+3174756917&4294967295,o=t+(s<<10&4294967295|s>>>22),s=i+(t^(o|~n))+r[2]+718787259&4294967295,s=n+(o^((i=o+(s<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+o&4294967295}function r(e,t){this.h=t;const n=[];let r=!0;for(let i=e.length-1;i>=0;i--){const s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.v=function(e,t){void 0===t&&(t=e.length);const r=t-this.blockSize,i=this.C;let s=this.h,o=0;for(;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.A=function(){var e=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=8*this.o;for(var n=e.length-8;n<e.length;++n)e[n]=255&t,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};var i={};function s(e){return-128<=e&&e<128?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],e<0?-1:0)}):new r([0|e],e<0?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(e<0)return h(o(-e));const t=[];let n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new r(t,0)}var a=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(let t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){const t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(a,a);if(d(e))return t=g(h(e),t),new m(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new m(h(t.g),t.h);if(e.g.length>30){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;r.l(e)<=0;)n=y(n),r=y(r);var i=v(n,1),s=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=s.add(r);c.l(e)<=0&&(i=i.add(n),s=c),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=a;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=(r=Math.ceil(Math.log(n)/Math.LN2))<=48?1:Math.pow(2,r-48),c=(s=o(n)).j(t);d(c)||c.l(e)>0;)c=(s=o(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=f(e,c)}return new m(i,e)}function y(e){const t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new r(n,e.h)}function v(e,t){const n=t>>5;t%=32;const i=e.g.length-n,s=[];for(let r=0;r<i;r++)s[r]=t>0?e.i(r+n)>>>t|e.i(r+n+1)<<32-t:e.i(r+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){const r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if((e=e||10)<2||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);const t=o(Math.pow(e,6));var n=this;let r="";for(;;){const i=g(n,t).g;let s=(((n=f(n,i.j(t))).g.length>0?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;s.length<6;)s="0"+s;r=s+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){const t=Math.max(this.g.length,e.g.length),n=[];let i=0;for(let r=0;r<=t;r++){let t=i+(65535&this.i(r))+(65535&e.i(r)),s=(t>>>16)+(this.i(r)>>>16)+(e.i(r)>>>16);i=s>>>16,t&=65535,s&=65535,n[r]=s<<16|t}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(this.l(c)<0&&e.l(c)<0)return o(this.m()*e.m());const t=this.g.length+e.g.length,n=[];for(var i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(let t=0;t<e.g.length;t++){const r=this.i(i)>>>16,s=65535&this.i(i),o=e.i(t)>>>16,a=65535&e.i(t);n[2*i+2*t]+=s*a,p(n,2*i+2*t),n[2*i+2*t+1]+=r*a,p(n,2*i+2*t+1),n[2*i+2*t+1]+=s*o,p(n,2*i+2*t+1),n[2*i+2*t+2]+=r*o,p(n,2*i+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new r(n,0)},e.B=function(e){return g(this,e).h},e.and=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new r(n,this.h&e.h)},e.or=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new r(n,this.h|e.h)},e.xor=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.A,t.prototype.reset=t.prototype.u,t.prototype.update=t.prototype.v,_t=Et.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.B,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if((n=n||10)<2||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(t.indexOf("-")>=0)throw Error('number format error: interior "-" character');const r=o(Math.pow(n,8));let i=a;for(let a=0;a<t.length;a+=8){var s=Math.min(8,t.length-a);const e=parseInt(t.substring(a,a+s),n);s<8?(s=o(Math.pow(n,s)),i=i.j(s).add(o(e))):(i=i.j(r),i=i.add(o(e)))}return i},St=Et.Integer=r}).apply("undefined"!==typeof kt?kt:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Tt,Ct,Nt,It,At,Rt,Pt,Dt,Ot="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},jt={};(function(){var e,t=Object.defineProperty;var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Ot&&Ot];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function r(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}r("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(e){return e||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push([t,e[t]]);return n}});var i=i||{},s=this||self;function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return(l=a).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function u(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}var d="undefined"!==typeof AsyncContext&&"function"===typeof AsyncContext.Snapshot?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function h(e){const t=e.length;if(t>0){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let r=1;r<arguments.length;r++){const t=arguments[r];var n=typeof t;if("array"==(n="object"!=n?n:t?Array.isArray(t)?"array":n:"null")||"object"==n&&"number"==typeof t.length){n=e.length||0;const r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){s.setTimeout(()=>{throw e},0)}function m(){var e=w;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var g=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new y,e=>e.reset());class y{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let v,b=!1,w=new class{constructor(){this.h=this.g=null}add(e,t){const n=g.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},x=()=>{const e=Promise.resolve(void 0);v=()=>{e.then(S)}};function S(){for(var e;e=m();){try{e.h.call(e.g)}catch(n){p(n)}var t=g;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}b=!1}function _(){this.u=this.u,this.C=this.C}function k(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}_.prototype.u=!1,_.prototype.dispose=function(){this.u||(this.u=!0,this.N())},_.prototype[Symbol.dispose]=function(){this.dispose()},_.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},k.prototype.h=function(){this.defaultPrevented=!0};var E=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(n){}return e}();function T(e){return/^[\s\xa0]*$/.test(e)}function C(e,t){k.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e&&this.init(e,t)}u(C,k),C.prototype.init=function(e,t){const n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,(t=e.relatedTarget)||("mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&C.Z.h.call(this)},C.prototype.h=function(){C.Z.h.call(this);const e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var N="closure_listenable_"+(1e6*Math.random()|0),I=0;function A(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++I,this.da=this.fa=!1}function R(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function P(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function D(e){const t={};for(const n in e)t[n]=e[n];return t}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<O.length;t++)n=O[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function L(e){this.src=e,this.g={},this.h=0}function M(e,t){const n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=s>=0)&&Array.prototype.splice.call(i,s,1),r&&(R(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function F(e,t,n,r){for(let i=0;i<e.length;++i){const s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}L.prototype.add=function(e,t,n,r,i){const s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);const o=F(e,t,r,i);return o>-1?(t=e[o],n||(t.fa=!1)):((t=new A(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var U="closure_lm_"+(1e6*Math.random()|0),V={};function z(e,t,n,r,i){if(r&&r.once)return q(e,t,n,r,i);if(Array.isArray(t)){for(let s=0;s<t.length;s++)z(e,t[s],n,r,i);return null}return n=J(n),e&&e[N]?e.J(t,n,o(r)?!!r.capture:!!r,i):B(e,t,n,!1,r,i)}function B(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");const a=o(i)?!!i.capture:!!i;let l=Q(e);if(l||(e[U]=l=new L(e)),(n=l.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=K;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)E||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(W(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function q(e,t,n,r,i){if(Array.isArray(t)){for(let s=0;s<t.length;s++)q(e,t[s],n,r,i);return null}return n=J(n),e&&e[N]?e.K(t,n,o(r)?!!r.capture:!!r,i):B(e,t,n,!0,r,i)}function H(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)H(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=J(n),e&&e[N]?(e=e.i,(s=String(t).toString())in e.g&&((n=F(t=e.g[s],n,r,i))>-1&&(R(t[n]),Array.prototype.splice.call(t,n,1),0==t.length&&(delete e.g[s],e.h--)))):e&&(e=Q(e))&&(t=e.g[t.toString()],e=-1,t&&(e=F(t,n,r,i)),(n=e>-1?t[e]:null)&&G(n))}function G(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[N])M(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(W(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Q(t))?(M(n,e),0==n.h&&(n.src=null,t[U]=null)):R(e)}}}function W(e){return e in V?V[e]:V[e]="on"+e}function K(e,t){if(e.da)e=!0;else{t=new C(t,this);const n=e.listener,r=e.ha||e.src;e.fa&&G(e),e=n.call(r,t)}return e}function Q(e){return(e=e[U])instanceof L?e:null}var Y="__closure_events_fn_"+(1e9*Math.random()>>>0);function J(e){return"function"===typeof e?e:(e[Y]||(e[Y]=function(t){return e.handleEvent(t)}),e[Y])}function X(){_.call(this),this.i=new L(this),this.M=this,this.G=null}function $(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new k(t,e);else if(t instanceof k)t.target=t.target||e;else{var i=t;j(t=new k(r,e),i)}let s,o;if(i=!0,n)for(o=n.length-1;o>=0;o--)s=t.g=n[o],i=Z(s,r,!0,t)&&i;if(s=t.g=e,i=Z(s,r,!0,t)&&i,i=Z(s,r,!1,t)&&i,n)for(o=0;o<n.length;o++)s=t.g=n[o],i=Z(s,r,!1,t)&&i}function Z(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();let i=!0;for(let s=0;s<t.length;++s){const o=t[s];if(o&&!o.da&&o.capture==n){const t=o.listener,n=o.ha||o.src;o.fa&&M(e.i,o),i=!1!==t.call(n,r)&&i}}return i&&!r.defaultPrevented}function ee(e){e.g=function(e,t){if("function"!==typeof e){if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=l(e.handleEvent,e)}return Number(t)>2147483647?-1:s.setTimeout(e,t||0)}(()=>{e.g=null,e.i&&(e.i=!1,ee(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}u(X,_),X.prototype[N]=!0,X.prototype.removeEventListener=function(e,t,n,r){H(this,e,t,n,r)},X.prototype.N=function(){if(X.Z.N.call(this),this.i){var e=this.i;for(const t in e.g){const n=e.g[t];for(let e=0;e<n.length;e++)R(n[e]);delete e.g[t],e.h--}}this.G=null},X.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},X.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class te extends _{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ee(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ne(e){_.call(this),this.h=e,this.g={}}u(ne,_);var re=[];function ie(e){P(e.g,function(e,t){this.g.hasOwnProperty(t)&&G(e)},e),e.g={}}ne.prototype.N=function(){ne.Z.N.call(this),ie(this)},ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var se=s.JSON.stringify,oe=s.JSON.parse,ae=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function le(){}function ce(){}var ue={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function de(){k.call(this,"d")}function he(){k.call(this,"c")}u(de,k),u(he,k);var fe={},pe=null;function me(){return pe=pe||new X}function ge(e){k.call(this,fe.Ia,e)}function ye(e){const t=me();$(t,new ge(t))}function ve(e,t){k.call(this,fe.STAT_EVENT,e),this.stat=t}function be(e){const t=me();$(t,new ve(t,e))}function we(e,t){k.call(this,fe.Ja,e),this.size=t}function xe(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){e()},t)}function Se(){this.g=!0}function _e(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{const s=JSON.parse(t);if(s)for(e=0;e<s.length;e++)if(Array.isArray(s[e])){var n=s[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var i=r[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(let e=1;e<r.length;e++)r[e]=""}}}return se(s)}catch(s){return t}}(e,n)+(r?" "+r:"")})}fe.Ia="serverreachability",u(ge,k),fe.STAT_EVENT="statevent",u(ve,k),fe.Ja="timingevent",u(we,k),Se.prototype.ua=function(){this.g=!1},Se.prototype.info=function(){};var ke,Ee={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Te={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function Ce(){}function Ne(e){return encodeURIComponent(String(e))}function Ie(e){var t=1;e=e.split(":");const n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Ae(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new ne(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Re}function Re(){this.i=null,this.g="",this.h=!1}u(Ce,le),Ce.prototype.g=function(){return new XMLHttpRequest},ke=new Ce;var Pe={},De={};function Oe(e,t,n){e.M=1,e.A=st(et(t)),e.u=n,e.R=!0,je(e,null)}function je(e,t){e.F=Date.now(),Fe(e),e.B=et(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),bt(n.i,"t",r),e.C=0,n=e.j.L,e.h=new Re,e.g=vn(e.j,n?t:null,!e.u),e.P>0&&(e.O=new te(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var i="readystatechange";Array.isArray(i)||(i&&(re[0]=i.toString()),i=re);for(let s=0;s<i.length;s++){const e=z(n,i[s],r||t.handleEvent,!1,t.h||t);if(!e)break;t.g[e.key]=e}t=e.J?D(e.J):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.B,e.v,e.u,t)):(e.v="GET",e.g.ea(e.B,e.v,null,t)),ye(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s){var o="",a=s.split("&");for(let e=0;e<a.length;e++){var l=a[e].split("=");if(l.length>1){const e=l[0];l=l[1];const t=e.split("_");o=t.length>=2&&"type"==t[1]?o+(e+"=")+l+"&":o+(e+"=redacted&")}}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.i,e.v,e.B,e.l,e.S,e.u)}function Le(e){return!!e.g&&("GET"==e.v&&2!=e.M&&e.j.Aa)}function Me(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?De:(n=Number(t.substring(n,r)),isNaN(n)?Pe:(r+=1)+n>t.length?De:(t=t.slice(r,r+n),e.C=r+n,t))}function Fe(e){e.T=Date.now()+e.H,Ue(e,e.H)}function Ue(e,t){if(null!=e.D)throw Error("WatchDog timer not null");e.D=xe(l(e.aa,e),t)}function Ve(e){e.D&&(s.clearTimeout(e.D),e.D=null)}function ze(e){0==e.j.I||e.K||hn(e.j,e)}function Be(e){Ve(e);var t=e.O;t&&"function"==typeof t.dispose&&t.dispose(),e.O=null,ie(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function qe(e,t){try{var n=e.j;if(0!=n.I&&(n.g==e||Qe(n.h,e)))if(!e.L&&Qe(n.h,e)&&3==n.I){try{var r=n.Ba.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.v){if(n.g){if(!(n.g.F+3e3<e.F))break e;dn(n),en(n)}ln(n),be(18)}}else n.xa=i[1],0<n.xa-n.K&&i[2]<37500&&n.F&&0==n.A&&!n.C&&(n.C=xe(l(n.Va,n),6e3));Ke(n.h)<=1&&n.ta&&(n.ta=void 0)}else pn(n,11)}else if((e.L||n.g==e)&&dn(n),!T(t))for(i=n.Ba.g.parse(t),t=0;t<i.length;t++){let l=i[t];const u=l[0];if(!(u<=n.K))if(n.K=u,l=l[1],2==n.I)if("c"==l[0]){n.M=l[1],n.ba=l[2];const t=l[3];null!=t&&(n.ka=t,n.j.info("VER="+n.ka));const i=l[4];null!=i&&(n.za=i,n.j.info("SVER="+n.za));const u=l[5];null!=u&&"number"===typeof u&&u>0&&(r=1.5*u,n.O=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Ye(s,s.h),s.h=null))}if(r.G){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.wa=e,it(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info("Handshake RTT: "+n.T+"ms"));var o=e;if((r=n).na=yn(r,r.L?r.ba:null,r.W),o.L){Je(r.h,o);var a=o,c=r.O;c&&(a.H=c),a.D&&(Ve(a),Fe(a)),r.g=o}else an(r);n.i.length>0&&nn(n)}else"stop"!=l[0]&&"close"!=l[0]||pn(n,7);else 3==n.I&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?pn(n,7):Zt(n):"noop"!=l[0]&&n.l&&n.l.qa(l),n.A=0)}ye()}catch(u){}}Ae.prototype.ba=function(e){e=e.target;const t=this.O;t&&3==Yt(e)?t.j():this.Y(e)},Ae.prototype.Y=function(e){try{if(e==this.g)e:{const l=Yt(this.g),c=this.g.ya();this.g.ca();if(!(l<3)&&(3!=l||this.g&&(this.h.h||this.g.la()||Jt(this.g)))){this.K||4!=l||7==c||ye(),Ve(this);var t=this.g.ca();this.X=t;var n=function(e){if(!Le(e))return e.g.la();const t=Jt(e.g);if(""===t)return"";let n="";const r=t.length,i=4==Yt(e.g);if(!e.h.i){if("undefined"===typeof TextDecoder)return Be(e),ze(e),"";e.h.i=new s.TextDecoder}for(let s=0;s<r;s++)e.h.h=!0,n+=e.h.i.decode(t[s],{stream:!(i&&s==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}(this);if(this.o=200==t,function(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o})}(this.i,this.v,this.B,this.l,this.S,l,t),this.o){if(this.U&&!this.L){t:{if(this.g){var r,i=this.g;if((r=i.g?i.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(r)){var o=r;break t}}o=null}if(!(e=o)){this.o=!1,this.m=3,be(12),Be(this),ze(this);break e}_e(this.i,this.l,e,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,qe(this,e)}if(this.R){let t;for(e=!0;!this.K&&this.C<n.length;){if(t=Me(this,n),t==De){4==l&&(this.m=4,be(14),e=!1),_e(this.i,this.l,null,"[Incomplete Response]");break}if(t==Pe){this.m=4,be(15),_e(this.i,this.l,n,"[Invalid Chunk]"),e=!1;break}_e(this.i,this.l,t,null),qe(this,t)}if(Le(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=l||0!=n.length||this.h.h||(this.m=1,be(16),e=!1),this.o=this.o&&e,e){if(n.length>0&&!this.W){this.W=!0;var a=this.j;a.g==this&&a.aa&&!a.P&&(a.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),cn(a),a.P=!0,be(11))}}else _e(this.i,this.l,n,"[Invalid Chunked Response]"),Be(this),ze(this)}else _e(this.i,this.l,n,null),qe(this,n);4==l&&Be(this),this.o&&!this.K&&(4==l?hn(this.j,this):(this.o=!1,Fe(this)))}else(function(e){const t={};e=(e.g&&Yt(e)>=2&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(T(e[r]))continue;var n=Ie(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==t&&n.indexOf("Unknown SID")>0?(this.m=3,be(12)):(this.m=0,be(13)),Be(this),ze(this)}}}catch(gn){}},Ae.prototype.cancel=function(){this.K=!0,Be(this)},Ae.prototype.aa=function(){this.D=null;const e=Date.now();e-this.T>=0?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.B),2!=this.M&&(ye(),be(17)),Be(this),this.m=2,ze(this)):Ue(this,this.T-e)};var He=class{constructor(e,t){this.g=e,this.map=t}};function Ge(e){this.l=e||10,s.PerformanceNavigationTiming?e=(e=s.performance.getEntriesByType("navigation")).length>0&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function We(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ke(e){return e.h?1:e.g?e.g.size:0}function Qe(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ye(e,t){e.g?e.g.add(t):e.h=t}function Je(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Xe(e){if(null!=e.h)return e.i.concat(e.h.G);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.G);return t}return h(e.i)}Ge.prototype.cancel=function(){if(this.i=Xe(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var $e=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ze(e){let t;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,e instanceof Ze?(this.l=e.l,tt(this,e.j),this.o=e.o,this.g=e.g,nt(this,e.u),this.h=e.h,rt(this,wt(e.i)),this.m=e.m):e&&(t=String(e).match($e))?(this.l=!1,tt(this,t[1]||"",!0),this.o=ot(t[2]||""),this.g=ot(t[3]||"",!0),nt(this,t[4]),this.h=ot(t[5]||"",!0),rt(this,t[6]||"",!0),this.m=ot(t[7]||"")):(this.l=!1,this.i=new pt(null,this.l))}function et(e){return new Ze(e)}function tt(e,t,n){e.j=n?ot(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function nt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.u=t}else e.u=null}function rt(e,t,n){t instanceof pt?(e.i=t,function(e,t){t&&!e.j&&(mt(e),e.i=null,e.g.forEach(function(e,t){const n=t.toLowerCase();t!=n&&(gt(this,t),bt(this,n,e))},e)),e.j=t}(e.i,e.l)):(n||(t=at(t,ht)),e.i=new pt(t,e.l))}function it(e,t,n){e.i.set(t,n)}function st(e){return it(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ot(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function at(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,lt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function lt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ze.prototype.toString=function(){const e=[];var t=this.j;t&&e.push(at(t,ct,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(at(t,ct,!0),"@"),e.push(Ne(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.u)&&e.push(":",String(n))),(n=this.h)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(at(n,"/"==n.charAt(0)?dt:ut,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",at(n,ft)),e.join("")},Ze.prototype.resolve=function(e){const t=et(this);let n=!!e.j;n?tt(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=null!=e.u;var r=e.h;if(n)nt(t,e.u);else if(n=!!e.h){if("/"!=r.charAt(0))if(this.g&&!this.h)r="/"+r;else{var i=t.h.lastIndexOf("/");-1!=i&&(r=t.h.slice(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");const e=[];for(let t=0;t<i.length;){const n=i[t++];"."==n?r&&t==i.length&&e.push(""):".."==n?((e.length>1||1==e.length&&""!=e[0])&&e.pop(),r&&t==i.length&&e.push("")):(e.push(n),r=!0)}r=e.join("/")}else r=i}return n?t.h=r:n=""!==e.i.toString(),n?rt(t,wt(e.i)):n=!!e.m,n&&(t.m=e.m),t};var ct=/[#\/\?@]/g,ut=/[#\?:]/g,dt=/[#\?]/g,ht=/[#\?@]/g,ft=/#/g;function pt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function mt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(let n=0;n<e.length;n++){const r=e[n].indexOf("=");let i,s=null;r>=0?(i=e[n].substring(0,r),s=e[n].substring(r+1)):i=e[n],t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function gt(e,t){mt(e),t=xt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function yt(e,t){return mt(e),t=xt(e,t),e.g.has(t)}function vt(e,t){mt(e);let n=[];if("string"===typeof t)yt(e,t)&&(n=n.concat(e.g.get(xt(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}function bt(e,t,n){gt(e,t),n.length>0&&(e.i=null,e.g.set(xt(e,t),h(n)),e.h+=n.length)}function wt(e){const t=new pt;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function xt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function St(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function _t(){this.g=new ae}function kt(e){this.i=e.Sb||null,this.h=e.ab||!1}function Et(e,t){X.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function Lt(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}function Ft(e){e.readyState=4,e.l=null,e.j=null,e.B=null,Ut(e)}function Ut(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Vt(e){let t="";return P(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function zt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Vt(n),"string"===typeof e?null!=n&&Ne(n):it(e,t,n))}function Bt(e){X.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(e=pt.prototype).add=function(e,t){mt(this),this.i=null,e=xt(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){mt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.set=function(e,t){return mt(this),this.i=null,yt(this,e=xt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&(e=vt(this,e)).length>0?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];const i=Ne(n);n=vt(this,n);for(let t=0;t<n.length;t++){let r=i;""!==n[t]&&(r+="="+Ne(n[t])),e.push(r)}}return this.i=e.join("&")},u(kt,le),kt.prototype.g=function(){return new Et(this.i,this.h)},u(Et,X),(e=Et.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=e,this.D=t,this.readyState=1,Ut(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||s).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,Ft(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ut(this)),this.g&&(this.readyState=3,Ut(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Lt(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))},e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ft(this):Ut(this),3==this.readyState&&Lt(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,Ft(this))},e.Na=function(e){this.g&&(this.response=e,Ft(this))},e.ga=function(){this.g&&Ft(this)},e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Et.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),u(Bt,X);var qt=/^https?$/i,Ht=["POST","PUT"];function Gt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,Wt(e),Qt(e)}function Wt(e){e.A||(e.A=!0,$(e,"complete"),$(e,"error"))}function Kt(e){if(e.h&&"undefined"!=typeof i)if(e.v&&4==Yt(e))setTimeout(e.Ca.bind(e),0);else if($(e,"readystatechange"),4==Yt(e)){e.h=!1;try{const i=e.ca();e:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===i){let t=String(e.D).match($e)[1]||null;!t&&s.self&&s.self.location&&(t=s.self.location.protocol.slice(0,-1)),r=!qt.test(t?t.toLowerCase():"")}n=r}if(n)$(e,"complete"),$(e,"success");else{e.o=6;try{var o=Yt(e)>2?e.g.statusText:""}catch(a){o=""}e.l=o+" ["+e.ca()+"]",Wt(e)}}finally{Qt(e)}}}function Qt(e,t){if(e.g){e.m&&(clearTimeout(e.m),e.m=null);const r=e.g;e.g=null,t||$(e,"ready");try{r.onreadystatechange=null}catch(n){}}}function Yt(e){return e.g?e.g.readyState:0}function Jt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.F){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Xt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function $t(e){this.za=0,this.i=[],this.j=new Se,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Xt("failFast",!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Xt("baseRetryDelayMs",5e3,e),this.Za=Xt("retryDelaySeedMs",1e4,e),this.Ta=Xt("forwardChannelMaxRetries",2,e),this.va=Xt("forwardChannelRequestTimeoutMs",2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M="",this.h=new Ge(e&&e.concurrentRequestLimit),this.Ba=new _t,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function Zt(e){if(tn(e),3==e.I){var t=e.V++,n=et(e.J);if(it(n,"SID",e.M),it(n,"RID",t),it(n,"TYPE","terminate"),sn(e,n),(t=new Ae(e,e.j,t)).M=2,t.A=st(et(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&s.Image&&((new Image).src=t.A,n=!0),n||(t.g=vn(t.j,null),t.g.ea(t.A)),t.F=Date.now(),Fe(t)}mn(e)}function en(e){e.g&&(cn(e),e.g.cancel(),e.g=null)}function tn(e){en(e),e.v&&(s.clearTimeout(e.v),e.v=null),dn(e),e.h.cancel(),e.m&&("number"===typeof e.m&&s.clearTimeout(e.m),e.m=null)}function nn(e){if(!We(e.h)&&!e.m){e.m=!0;var t=e.Ea;v||x(),b||(v(),b=!0),w.add(t,e),e.D=0}}function rn(e,t){var n;n=t?t.l:e.V++;const r=et(e.J);it(r,"SID",e.M),it(r,"RID",n),it(r,"AID",e.K),sn(e,r),e.u&&e.o&&zt(r,e.u,e.o),n=new Ae(e,e.j,n,e.D+1),null===e.u&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=on(e,n,1e3),n.H=Math.round(.5*e.va)+Math.round(.5*e.va*Math.random()),Ye(e.h,n),Oe(n,r,t)}function sn(e,t){e.H&&P(e.H,function(e,n){it(t,n,e)}),e.l&&P({},function(e,n){it(t,n,e)})}function on(e,t,n){n=Math.min(e.i.length,n);const r=e.l?l(e.l.Ka,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?n>0?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let l=!0;for(let c=0;c<n;c++){var s=i[c].g;const n=i[c].map;if((s-=t)<0)t=Math.max(0,i[c].g-100),l=!1;else try{s="req"+s+"_"||0;try{var a=n instanceof Map?n:Object.entries(n);for(const[t,n]of a){let r=n;o(n)&&(r=se(n)),e.push(s+t+"="+encodeURIComponent(r))}}catch(Mt){throw e.push(s+"type="+encodeURIComponent("_badmap")),Mt}}catch(Mt){r&&r(n)}}if(l){a=e.join("&");break e}}a=void 0}return e=e.i.splice(0,n),t.G=e,a}function an(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;v||x(),b||(v(),b=!0),w.add(t,e),e.A=0}}function ln(e){return!(e.g||e.v||e.A>=3)&&(e.Y++,e.v=xe(l(e.Da,e),fn(e,e.A)),e.A++,!0)}function cn(e){null!=e.B&&(s.clearTimeout(e.B),e.B=null)}function un(e){e.g=new Ae(e,e.j,"rpc",e.Y),null===e.u&&(e.g.J=e.o),e.g.P=0;var t=et(e.na);it(t,"RID","rpc"),it(t,"SID",e.M),it(t,"AID",e.K),it(t,"CI",e.F?"0":"1"),!e.F&&e.ia&&it(t,"TO",e.ia),it(t,"TYPE","xmlhttp"),sn(e,t),e.u&&e.o&&zt(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=st(et(t)),n.u=null,n.R=!0,je(n,e)}function dn(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function hn(e,t){var n=null;if(e.g==t){dn(e),cn(e),e.g=null;var r=2}else{if(!Qe(e.h,t))return;n=t.G,Je(e.h,t),r=1}if(0!=e.I)if(t.o)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.F;var i=e.D;$(r=me(),new we(r,n)),nn(e)}else an(e);else if(3==(i=t.m)||0==i&&t.X>0||!(1==r&&function(e,t){return!(Ke(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.G.concat(e.i),!0):!(1==e.I||2==e.I||e.D>=(e.Sa?0:e.Ta))&&(e.m=xe(l(e.Ea,e,t),fn(e,e.D)),e.D++,!0))}(e,t)||2==r&&ln(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),i){case 1:pn(e,5);break;case 4:pn(e,10);break;case 3:pn(e,6);break;default:pn(e,2)}}function fn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function pn(e,t){if(e.j.info("Error code "+t),2==t){var n=l(e.bb,e),r=e.Ua;const t=!r;r=new Ze(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||tt(r,"https"),st(r),t?function(e,t){const n=new Se;if(s.Image){const r=new Image;r.onload=c(St,n,"TestLoadImage: loaded",!0,t,r),r.onerror=c(St,n,"TestLoadImage: error",!1,t,r),r.onabort=c(St,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=c(St,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Se;const n=new AbortController,r=setTimeout(()=>{n.abort(),St(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?St(0,0,!0,t):St(0,0,!1,t)}).catch(()=>{clearTimeout(r),St(0,0,!1,t)})}(r.toString(),n)}else be(2);e.I=0,e.l&&e.l.pa(t),mn(e),tn(e)}function mn(e){if(e.I=0,e.ja=[],e.l){const t=Xe(e.h);0==t.length&&0==e.i.length||(f(e.ja,t),f(e.ja,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.oa()}}function yn(e,t,n){var r=n instanceof Ze?et(n):new Ze(n);if(""!=r.g)t&&(r.g=t+"."+r.g),nt(r,r.u);else{var i=s.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;const e=new Ze(null);r&&tt(e,r),t&&(e.g=t),i&&nt(e,i),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&it(r,n,t),it(r,"VER",e.ka),sn(e,r),r}function vn(e,t,n){if(t&&!e.L)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Aa&&!e.ma?new Bt(new kt({ab:n})):new Bt(e.ma)).Fa(e.L),t}function bn(){}function wn(){}function xn(e,t){X.call(this),this.g=new $t(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e["X-WebChannel-Client-Profile"]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!T(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!T(t)&&(this.g.G=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new kn(this)}function Sn(e){de.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function _n(){he.call(this),this.status=1}function kn(e){this.g=e}(e=Bt.prototype).Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ke.g(),this.g.onreadystatechange=d(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void Gt(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=s.FormData&&e instanceof s.FormData,!(Array.prototype.indexOf.call(Ht,t,void 0)>=0)||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of n)this.g.setRequestHeader(s,a);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(e),this.v=!1}catch(o){Gt(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,$(this,"complete"),$(this,"abort"),Qt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qt(this,!0)),Bt.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Kt(this):this.Xa())},e.Xa=function(){Kt(this)},e.isActive=function(){return!!this.g},e.ca=function(){try{return Yt(this)>2?this.g.status:-1}catch(e){return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),oe(t)}},e.ya=function(){return this.o},e.Ha=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=$t.prototype).ka=8,e.I=1,e.connect=function(e,t,n,r){be(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=yn(this,null,this.W),nn(this)},e.Ea=function(e){if(this.m)if(this.m=null,1==this.I){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const i=new Ae(this,this.j,e);let s=this.o;if(this.U&&(s?(s=D(s),j(s,this.U)):s=this.U),null!==this.u||this.R||(i.J=s,s=null),this.S)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if((t+=r)>4096){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=on(this,i,t),it(n=et(this.J),"RID",e),it(n,"CVER",22),this.G&&it(n,"X-HTTP-Session-Id",this.G),sn(this,n),s&&(this.R?t="headers="+Ne(Vt(s))+"&"+t:this.u&&zt(n,this.u,s)),Ye(this.h,i),this.Ra&&it(n,"TYPE","init"),this.S?(it(n,"$req",t),it(n,"SID","null"),i.U=!0,Oe(i,n,null)):Oe(i,n,t),this.I=2}}else 3==this.I&&(e?rn(this,e):0==this.i.length||We(this.h)||rn(this))},e.Da=function(){if(this.v=null,un(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var e=4*this.T;this.j.info("BP detection timer enabled: "+e),this.B=xe(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,be(10),en(this),un(this))},e.Va=function(){null!=this.C&&(this.C=null,en(this),ln(this),be(19))},e.bb=function(e){e?(this.j.info("Successfully pinged google.com"),be(2)):(this.j.info("Failed to ping google.com"),be(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=bn.prototype).ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){},wn.prototype.g=function(e,t){return new xn(e,t)},u(xn,X),xn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},xn.prototype.close=function(){Zt(this.g)},xn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=se(e),e=n);t.i.push(new He(t.Ya++,e)),3==t.I&&nn(t)},xn.prototype.N=function(){this.g.l=null,delete this.j,Zt(this.g),delete this.g,xn.Z.N.call(this)},u(Sn,de),u(_n,he),u(kn,bn),kn.prototype.ra=function(){$(this.g,"a")},kn.prototype.qa=function(e){$(this.g,new Sn(e))},kn.prototype.pa=function(e){$(this.g,new _n)},kn.prototype.oa=function(){$(this.g,"b")},wn.prototype.createWebChannel=wn.prototype.g,xn.prototype.send=xn.prototype.o,xn.prototype.open=xn.prototype.m,xn.prototype.close=xn.prototype.close,Dt=jt.createWebChannelTransport=function(){return new wn},Pt=jt.getStatEventTarget=function(){return me()},Rt=jt.Event=fe,At=jt.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ee.NO_ERROR=0,Ee.TIMEOUT=8,Ee.HTTP_ERROR=6,It=jt.ErrorCode=Ee,Te.COMPLETE="complete",Nt=jt.EventType=Te,ce.EventType=ue,ue.OPEN="a",ue.CLOSE="b",ue.ERROR="c",ue.MESSAGE="d",X.prototype.listen=X.prototype.J,Ct=jt.WebChannel=ce,jt.FetchXmlHttpFactory=kt,Bt.prototype.listenOnce=Bt.prototype.K,Bt.prototype.getLastError=Bt.prototype.Ha,Bt.prototype.getLastErrorCode=Bt.prototype.ya,Bt.prototype.getStatus=Bt.prototype.ca,Bt.prototype.getResponseJson=Bt.prototype.La,Bt.prototype.getResponseText=Bt.prototype.la,Bt.prototype.send=Bt.prototype.ea,Bt.prototype.setWithCredentials=Bt.prototype.Fa,Tt=jt.XhrIo=Bt}).apply("undefined"!==typeof Ot?Ot:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Lt="@firebase/firestore",Mt="4.9.2";class Ft{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ft.UNAUTHENTICATED=new Ft(null),Ft.GOOGLE_CREDENTIALS=new Ft("google-credentials-uid"),Ft.FIRST_PARTY=new Ft("first-party-uid"),Ft.MOCK_USER=new Ft("mock-user");let Ut="12.3.0";const Vt=new ie("@firebase/firestore");function zt(){return Vt.logLevel}function Bt(e){if(Vt.logLevel<=Z.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Gt);Vt.debug("Firestore (".concat(Ut,"): ").concat(e),...i)}}function qt(e){if(Vt.logLevel<=Z.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Gt);Vt.error("Firestore (".concat(Ut,"): ").concat(e),...i)}}function Ht(e){if(Vt.logLevel<=Z.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Gt);Vt.warn("Firestore (".concat(Ut,"): ").concat(e),...i)}}function Gt(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Wt(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,Kt(e,r,n)}function Kt(e,t,n){let r="FIRESTORE (".concat(Ut,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw qt(r),new Error(r)}function Qt(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||Kt(t,i,r)}function Yt(e,t){return e}const Jt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Xt extends M{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class $t{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Zt{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class en{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ft.UNAUTHENTICATED))}shutdown(){}}class tn{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class nn{constructor(e){this.t=e,this.currentUser=Ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Qt(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new $t;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new $t,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},o=e=>{Bt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Bt("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new $t)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Bt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Qt("string"==typeof t.accessToken,31837,{l:t}),new Zt(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qt(null===e||"string"==typeof e,2055,{h:e}),new Ft(e)}}class rn{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Ft.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class sn{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new rn(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Ft.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class on{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class an{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,st(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Qt(void 0===this.o,3512);const n=e=>{null!=e.error&&Bt("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,Bt("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{Bt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):Bt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new on(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Qt("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new on(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function ln(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class cn{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=ln(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function un(e,t){return e<t?-1:e>t?1:0}function dn(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),i=t.charAt(r);if(n!==i)return pn(n)===pn(i)?un(n,i):pn(n)?1:-1}return un(e.length,t.length)}const hn=55296,fn=57343;function pn(e){const t=e.charCodeAt(0);return t>=hn&&t<=fn}function mn(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const gn="__name__";class yn{constructor(e,t,n){void 0===t?t=0:t>e.length&&Wt(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&Wt(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===yn.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof yn?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=yn.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return un(e.length,t.length)}static compareSegments(e,t){const n=yn.isNumericId(e),r=yn.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?yn.extractNumericId(e).compare(yn.extractNumericId(t)):dn(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return St.fromString(e.substring(4,e.length-2))}}class vn extends yn{construct(e,t,n){return new vn(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Xt(Jt.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new vn(e)}static emptyPath(){return new vn([])}}const bn=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class wn extends yn{construct(e,t,n){return new wn(e,t,n)}static isValidIdentifier(e){return bn.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),wn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===gn}static keyField(){return new wn([gn])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Xt(Jt.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Xt(Jt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Xt(Jt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Xt(Jt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new wn(t)}static emptyPath(){return new wn([])}}class xn{constructor(e){this.path=e}static fromPath(e){return new xn(vn.fromString(e))}static fromName(e){return new xn(vn.fromString(e).popFirst(5))}static empty(){return new xn(vn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===vn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return vn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xn(new vn(e.slice()))}}function Sn(e,t,n){if(!n)throw new Xt(Jt.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function _n(e){if(!xn.isDocumentKey(e))throw new Xt(Jt.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function kn(e){if(xn.isDocumentKey(e))throw new Xt(Jt.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function En(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function Tn(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Wt(12329,{type:typeof e})}function Cn(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Xt(Jt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Tn(e);throw new Xt(Jt.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Nn(e,t){const n={typeString:e};return t&&(n.value=t),n}function In(e,t){if(!En(e))throw new Xt(Jt.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const o=e[r];if(i&&typeof o!==i){n="JSON field '".concat(r,"' must be a ").concat(i,".");break}if(void 0!==s&&o!==s.value){n="Expected '".concat(r,"' field to equal '").concat(s.value,"'");break}}if(n)throw new Xt(Jt.INVALID_ARGUMENT,n);return!0}const An=-62135596800,Rn=1e6;class Pn{static now(){return Pn.fromMillis(Date.now())}static fromDate(e){return Pn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Rn);return new Pn(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Xt(Jt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Xt(Jt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<An)throw new Xt(Jt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Xt(Jt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Rn}_compareTo(e){return this.seconds===e.seconds?un(this.nanoseconds,e.nanoseconds):un(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Pn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(In(e,Pn._jsonSchema))return new Pn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-An;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Pn._jsonSchemaVersion="firestore/timestamp/1.0",Pn._jsonSchema={type:Nn("string",Pn._jsonSchemaVersion),seconds:Nn("number"),nanoseconds:Nn("number")};class Dn{static fromTimestamp(e){return new Dn(e)}static min(){return new Dn(new Pn(0,0))}static max(){return new Dn(new Pn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const On=-1;class jn{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}jn.UNKNOWN_ID=-1;function Ln(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Dn.fromTimestamp(1e9===r?new Pn(n+1,0):new Pn(n,r));return new Fn(i,xn.empty(),t)}function Mn(e){return new Fn(e.readTime,e.key,On)}class Fn{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Fn(Dn.min(),xn.empty(),On)}static max(){return new Fn(Dn.max(),xn.empty(),On)}}function Un(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=xn.comparator(e.documentKey,t.documentKey),0!==n?n:un(e.largestBatchId,t.largestBatchId))}const Vn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zn{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Bn(e){if(e.code!==Jt.FAILED_PRECONDITION||e.message!==Vn)throw e;Bt("LocalStore","Unexpectedly lost primary lease")}class qn{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Wt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new qn((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof qn?t:qn.resolve(t)}catch(e){return qn.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):qn.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):qn.reject(t)}static resolve(e){return new qn((t,n)=>{t(e)})}static reject(e){return new qn((t,n)=>{n(e)})}static waitFor(e){return new qn((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=qn.resolve(!1);for(const n of e)t=t.next(e=>e?qn.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new qn((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next(e=>{s[l]=e,++o,o===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new qn((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function Hn(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Gn(e){return"IndexedDbTransactionError"===e.name}class Wn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Wn.ce=-1;const Kn=-1;function Qn(e){return null==e}function Yn(e){return 0===e&&1/e==-1/0}function Jn(e){return"number"==typeof e&&Number.isInteger(e)&&!Yn(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const Xn="\x01";function $n(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=er(t)),t=Zn(e.get(n),t);return er(t)}function Zn(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case Xn:n+="\x01\x11";break;default:n+=t}}return n}function er(e){return e+Xn+"\x01"}const tr="remoteDocuments",nr="owner",rr="mutationQueues",ir="mutations";const sr="documentMutations",or="remoteDocumentsV14",ar="remoteDocumentGlobal",lr="targets",cr="targetDocuments",ur="targetGlobal",dr="collectionParents",hr="clientMetadata",fr="bundles",pr="namedQueries",mr="indexConfiguration",gr="indexState",yr="indexEntries",vr="documentOverlays",br="globals",wr=[rr,ir,sr,tr,lr,nr,ur,cr,hr,ar,dr,fr,pr],xr=[rr,ir,sr,or,lr,nr,ur,cr,hr,ar,dr,fr,pr,vr],Sr=xr,_r=[...Sr,mr,gr,yr];function kr(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Er(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Tr(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Cr{constructor(e,t){this.comparator=e,this.root=t||Ir.EMPTY}insert(e,t){return new Cr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ir.BLACK,null,null))}remove(e){return new Cr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ir.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Nr(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Nr(this.root,e,this.comparator,!1)}getReverseIterator(){return new Nr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Nr(this.root,e,this.comparator,!0)}}class Nr{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ir{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Ir.RED,this.left=null!=r?r:Ir.EMPTY,this.right=null!=i?i:Ir.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Ir(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ir.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Ir.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ir.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ir.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Wt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Wt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Wt(27949);return e+(this.isRed()?0:1)}}Ir.EMPTY=null,Ir.RED=!0,Ir.BLACK=!1,Ir.EMPTY=new class{constructor(){this.size=0}get key(){throw Wt(57766)}get value(){throw Wt(16141)}get color(){throw Wt(16727)}get left(){throw Wt(29726)}get right(){throw Wt(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new Ir(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ar{constructor(e){this.comparator=e,this.data=new Cr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Rr(this.data.getIterator())}getIteratorFrom(e){return new Rr(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Ar))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ar(this.comparator);return t.data=e,t}}class Rr{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Pr{constructor(e){this.fields=e,e.sort(wn.comparator)}static empty(){return new Pr([])}unionWith(e){let t=new Ar(wn.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Pr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return mn(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Dr extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Or{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Dr("Invalid base64 string: "+e):e}}(e);return new Or(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Or(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return un(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Or.EMPTY_BYTE_STRING=new Or("");const jr=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Lr(e){if(Qt(!!e,39018),"string"==typeof e){let t=0;const n=jr.exec(e);if(Qt(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Mr(e.seconds),nanos:Mr(e.nanos)}}function Mr(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Fr(e){return"string"==typeof e?Or.fromBase64String(e):Or.fromUint8Array(e)}const Ur="server_timestamp",Vr="__type__",zr="__previous_value__",Br="__local_write_time__";function qr(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[Vr])||void 0===t?void 0:t.stringValue)===Ur}function Hr(e){const t=e.mapValue.fields[zr];return qr(t)?Hr(t):t}function Gr(e){const t=Lr(e.mapValue.fields[Br].timestampValue);return new Pn(t.seconds,t.nanos)}class Wr{constructor(e,t,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l,this.isUsingEmulator=c}}const Kr="(default)";class Qr{constructor(e,t){this.projectId=e,this.database=t||Kr}static empty(){return new Qr("","")}get isDefaultDatabase(){return this.database===Kr}isEqual(e){return e instanceof Qr&&e.projectId===this.projectId&&e.database===this.database}}const Yr="__type__",Jr="__max__",Xr={mapValue:{fields:{__type__:{stringValue:Jr}}}},$r="__vector__",Zr="value";function ei(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?qr(e)?4:yi(e)?9007199254740991:mi(e)?10:11:Wt(28295,{value:e})}function ti(e,t){if(e===t)return!0;const n=ei(e);if(n!==ei(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Gr(e).isEqual(Gr(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Lr(e.timestampValue),r=Lr(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Fr(e.bytesValue).isEqual(Fr(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Mr(e.geoPointValue.latitude)===Mr(t.geoPointValue.latitude)&&Mr(e.geoPointValue.longitude)===Mr(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Mr(e.integerValue)===Mr(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Mr(e.doubleValue),r=Mr(t.doubleValue);return n===r?Yn(n)===Yn(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return mn(e.arrayValue.values||[],t.arrayValue.values||[],ti);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(kr(n)!==kr(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!ti(n[i],r[i])))return!1;return!0}(e,t);default:return Wt(52216,{left:e})}}function ni(e,t){return void 0!==(e.values||[]).find(e=>ti(e,t))}function ri(e,t){if(e===t)return 0;const n=ei(e),r=ei(t);if(n!==r)return un(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return un(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Mr(e.integerValue||e.doubleValue),r=Mr(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ii(e.timestampValue,t.timestampValue);case 4:return ii(Gr(e),Gr(t));case 5:return dn(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Fr(e),r=Fr(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=un(n[i],r[i]);if(0!==e)return e}return un(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=un(Mr(e.latitude),Mr(t.latitude));return 0!==n?n:un(Mr(e.longitude),Mr(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return si(e.arrayValue,t.arrayValue);case 10:return function(e,t,n,r,i,s){const o=e.fields||{},a=t.fields||{},l=null===(n=o[Zr])||void 0===n?void 0:n.arrayValue,c=null===(r=a[Zr])||void 0===r?void 0:r.arrayValue,u=un((null===l||void 0===l||null===(i=l.values)||void 0===i?void 0:i.length)||0,(null===c||void 0===c||null===(s=c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:si(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Xr.mapValue&&t===Xr.mapValue)return 0;if(e===Xr.mapValue)return 1;if(t===Xr.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=dn(r[o],s[o]);if(0!==e)return e;const t=ri(n[r[o]],i[s[o]]);if(0!==t)return t}return un(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Wt(23264,{he:n})}}function ii(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return un(e,t);const n=Lr(e),r=Lr(t),i=un(n.seconds,r.seconds);return 0!==i?i:un(n.nanos,r.nanos)}function si(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=ri(n[i],r[i]);if(e)return e}return un(n.length,r.length)}function oi(e){return ai(e)}function ai(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Lr(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Fr(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return xn.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=ai(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(ai(e.fields[i]));return n+"}"}(e.mapValue):Wt(61005,{value:e})}function li(e){switch(ei(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Hr(e);return t?16+li(t):16;case 5:return 2*e.stringValue.length;case 6:return Fr(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+li(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return Er(e.fields,(e,n)=>{t+=e.length+li(n)}),t}(e.mapValue);default:throw Wt(13486,{value:e})}}function ci(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function ui(e){return!!e&&"integerValue"in e}function di(e){return!!e&&"arrayValue"in e}function hi(e){return!!e&&"nullValue"in e}function fi(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function pi(e){return!!e&&"mapValue"in e}function mi(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[Yr])||void 0===t?void 0:t.stringValue)===$r}function gi(e){if(e.geoPointValue)return{geoPointValue:c({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:c({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Er(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=gi(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=gi(e.arrayValue.values[n]);return t}return c({},e)}function yi(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Jr}class vi{constructor(e){this.value=e}static empty(){return new vi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!pi(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=gi(t)}setAll(e){let t=wn.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=gi(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());pi(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ti(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];pi(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Er(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new vi(gi(this.value))}}function bi(e){const t=[];return Er(e.fields,(e,n)=>{const r=new wn([e]);if(pi(n)){const e=bi(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Pr(t)}class wi{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new wi(e,0,Dn.min(),Dn.min(),Dn.min(),vi.empty(),0)}static newFoundDocument(e,t,n,r){return new wi(e,1,t,Dn.min(),n,r,0)}static newNoDocument(e,t){return new wi(e,2,t,Dn.min(),Dn.min(),vi.empty(),0)}static newUnknownDocument(e,t){return new wi(e,3,t,Dn.min(),Dn.min(),vi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Dn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Dn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof wi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class xi{constructor(e,t){this.position=e,this.inclusive=t}}function Si(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?xn.comparator(xn.fromName(o.referenceValue),n.key):ri(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function _i(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ti(e.position[n],t.position[n]))return!1;return!0}class ki{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Ei(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Ti{}class Ci extends Ti{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new ji(e,t,n):"array-contains"===t?new Ui(e,n):"in"===t?new Vi(e,n):"not-in"===t?new zi(e,n):"array-contains-any"===t?new Bi(e,n):new Ci(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Li(e,n):new Mi(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(ri(t,this.value)):null!==t&&ei(this.value)===ei(t)&&this.matchesComparison(ri(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Wt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ni extends Ti{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ni(e,t)}matches(e){return Ii(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Ii(e){return"and"===e.op}function Ai(e){return Ri(e)&&Ii(e)}function Ri(e){for(const t of e.filters)if(t instanceof Ni)return!1;return!0}function Pi(e){if(e instanceof Ci)return e.field.canonicalString()+e.op.toString()+oi(e.value);if(Ai(e))return e.filters.map(e=>Pi(e)).join(",");{const t=e.filters.map(e=>Pi(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function Di(e,t){return e instanceof Ci?function(e,t){return t instanceof Ci&&e.op===t.op&&e.field.isEqual(t.field)&&ti(e.value,t.value)}(e,t):e instanceof Ni?function(e,t){return t instanceof Ni&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Di(n,t.filters[r]),!0)}(e,t):void Wt(19439)}function Oi(e){return e instanceof Ci?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(oi(e.value))}(e):e instanceof Ni?function(e){return e.op.toString()+" {"+e.getFilters().map(Oi).join(" ,")+"}"}(e):"Filter"}class ji extends Ci{constructor(e,t,n){super(e,t,n),this.key=xn.fromName(n.referenceValue)}matches(e){const t=xn.comparator(e.key,this.key);return this.matchesComparison(t)}}class Li extends Ci{constructor(e,t){super(e,"in",t),this.keys=Fi("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Mi extends Ci{constructor(e,t){super(e,"not-in",t),this.keys=Fi("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Fi(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>xn.fromName(e.referenceValue))}class Ui extends Ci{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return di(t)&&ni(t.arrayValue,this.value)}}class Vi extends Ci{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&ni(this.value.arrayValue,t)}}class zi extends Ci{constructor(e,t){super(e,"not-in",t)}matches(e){if(ni(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!ni(this.value.arrayValue,t)}}class Bi extends Ci{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!di(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>ni(this.value.arrayValue,e))}}class qi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.Te=null}}function Hi(e){return new qi(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Gi(e){const t=Yt(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Pi(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Qn(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>oi(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>oi(e)).join(",")),t.Te=e}return t.Te}function Wi(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Ei(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Di(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!_i(e.startAt,t.startAt)&&_i(e.endAt,t.endAt)}function Ki(e){return xn.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Qi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Yi(e,t,n,r,i,s,o,a){return new Qi(e,t,n,r,i,s,o,a)}function Ji(e){return new Qi(e)}function Xi(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function $i(e){return null!==e.collectionGroup}function Zi(e){const t=Yt(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Ar(wn.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new ki(r,n))}),e.has(wn.keyField().canonicalString())||t.Ie.push(new ki(wn.keyField(),n))}return t.Ie}function es(e){const t=Yt(e);return t.Ee||(t.Ee=ts(t,Zi(e))),t.Ee}function ts(e,t){if("F"===e.limitType)return Hi(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new ki(e.field,t)});const n=e.endAt?new xi(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new xi(e.startAt.position,e.startAt.inclusive):null;return Hi(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function ns(e,t){const n=e.filters.concat([t]);return new Qi(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function rs(e,t,n){return new Qi(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function is(e,t){return Wi(es(e),es(t))&&e.limitType===t.limitType}function ss(e){return"".concat(Gi(es(e)),"|lt:").concat(e.limitType)}function os(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>Oi(e)).join(", "),"]")),Qn(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>oi(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>oi(e)).join(",")),"Target(".concat(t,")")}(es(e)),"; limitType=").concat(e.limitType,")")}function as(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):xn.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Zi(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Si(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Zi(e),t))&&!(e.endAt&&!function(e,t,n){const r=Si(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Zi(e),t))}(e,t)}function ls(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function cs(e){return(t,n)=>{let r=!1;for(const i of Zi(e)){const e=us(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function us(e,t,n){const r=e.field.isKeyField()?xn.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?ri(r,i):Wt(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Wt(19790,{direction:e.dir})}}class ds{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Er(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return Tr(this.inner)}size(){return this.innerSize}}const hs=new Cr(xn.comparator);function fs(){return hs}const ps=new Cr(xn.comparator);function ms(){let e=ps;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function gs(e){let t=ps;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function ys(){return bs()}function vs(){return bs()}function bs(){return new ds(e=>e.toString(),(e,t)=>e.isEqual(t))}const ws=new Cr(xn.comparator),xs=new Ar(xn.comparator);function Ss(){let e=xs;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const _s=new Ar(un);function ks(){return _s}function Es(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yn(t)?"-0":t}}function Ts(e){return{integerValue:""+e}}function Cs(e,t){return Jn(t)?Ts(t):Es(e,t)}class Ns{constructor(){this._=void 0}}function Is(e,t,n){return e instanceof Ps?function(e,t){const n={fields:{[Vr]:{stringValue:Ur},[Br]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&qr(t)&&(t=Hr(t)),t&&(n.fields[zr]=t),{mapValue:n}}(n,t):e instanceof Ds?Os(e,t):e instanceof js?Ls(e,t):function(e,t){const n=Rs(e,t),r=Fs(n)+Fs(e.Ae);return ui(n)&&ui(e.Ae)?Ts(r):Es(e.serializer,r)}(e,t)}function As(e,t,n){return e instanceof Ds?Os(e,t):e instanceof js?Ls(e,t):n}function Rs(e,t){return e instanceof Ms?function(e){return ui(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Ps extends Ns{}class Ds extends Ns{constructor(e){super(),this.elements=e}}function Os(e,t){const n=Us(t);for(const r of e.elements)n.some(e=>ti(e,r))||n.push(r);return{arrayValue:{values:n}}}class js extends Ns{constructor(e){super(),this.elements=e}}function Ls(e,t){let n=Us(t);for(const r of e.elements)n=n.filter(e=>!ti(e,r));return{arrayValue:{values:n}}}class Ms extends Ns{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Fs(e){return Mr(e.integerValue||e.doubleValue)}function Us(e){return di(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Vs{constructor(e,t){this.version=e,this.transformResults=t}}class zs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new zs}static exists(e){return new zs(void 0,e)}static updateTime(e){return new zs(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Bs(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class qs{}function Hs(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new eo(e.key,zs.none()):new Ys(e.key,e.data,zs.none());{const n=e.data,r=vi.empty();let i=new Ar(wn.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Js(e.key,r,new Pr(i.toArray()),zs.none())}}function Gs(e,t,n){e instanceof Ys?function(e,t,n){const r=e.value.clone(),i=$s(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Js?function(e,t,n){if(!Bs(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=$s(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Xs(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Ws(e,t,n,r){return e instanceof Ys?function(e,t,n,r){if(!Bs(e.precondition,t))return n;const i=e.value.clone(),s=Zs(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Js?function(e,t,n,r){if(!Bs(e.precondition,t))return n;const i=Zs(e.fieldTransforms,r,t),s=t.data;return s.setAll(Xs(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Bs(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Ks(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Rs(r.transform,e||null);null!=i&&(null===n&&(n=vi.empty()),n.set(r.field,i))}return n||null}function Qs(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&mn(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Ds&&t instanceof Ds||e instanceof js&&t instanceof js?mn(e.elements,t.elements,ti):e instanceof Ms&&t instanceof Ms?ti(e.Ae,t.Ae):e instanceof Ps&&t instanceof Ps}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Ys extends qs{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Js extends qs{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Xs(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function $s(e,t,n){const r=new Map;Qt(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,As(o,a,n[i]))}return r}function Zs(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Is(e,s,t))}return r}class eo extends qs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class to extends qs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class no{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Gs(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Ws(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Ws(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=vs();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Hs(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(Dn.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ss())}isEqual(e){return this.batchId===e.batchId&&mn(this.mutations,e.mutations,(e,t)=>Qs(e,t))&&mn(this.baseMutations,e.baseMutations,(e,t)=>Qs(e,t))}}class ro{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Qt(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=ws;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new ro(e,t,n,r)}}class io{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class so{constructor(e,t){this.count=e,this.unchangedNames=t}}var oo,ao;function lo(e){switch(e){case Jt.OK:return Wt(64938);case Jt.CANCELLED:case Jt.UNKNOWN:case Jt.DEADLINE_EXCEEDED:case Jt.RESOURCE_EXHAUSTED:case Jt.INTERNAL:case Jt.UNAVAILABLE:case Jt.UNAUTHENTICATED:return!1;case Jt.INVALID_ARGUMENT:case Jt.NOT_FOUND:case Jt.ALREADY_EXISTS:case Jt.PERMISSION_DENIED:case Jt.FAILED_PRECONDITION:case Jt.ABORTED:case Jt.OUT_OF_RANGE:case Jt.UNIMPLEMENTED:case Jt.DATA_LOSS:return!0;default:return Wt(15467,{code:e})}}function co(e){if(void 0===e)return qt("GRPC error has no .code"),Jt.UNKNOWN;switch(e){case oo.OK:return Jt.OK;case oo.CANCELLED:return Jt.CANCELLED;case oo.UNKNOWN:return Jt.UNKNOWN;case oo.DEADLINE_EXCEEDED:return Jt.DEADLINE_EXCEEDED;case oo.RESOURCE_EXHAUSTED:return Jt.RESOURCE_EXHAUSTED;case oo.INTERNAL:return Jt.INTERNAL;case oo.UNAVAILABLE:return Jt.UNAVAILABLE;case oo.UNAUTHENTICATED:return Jt.UNAUTHENTICATED;case oo.INVALID_ARGUMENT:return Jt.INVALID_ARGUMENT;case oo.NOT_FOUND:return Jt.NOT_FOUND;case oo.ALREADY_EXISTS:return Jt.ALREADY_EXISTS;case oo.PERMISSION_DENIED:return Jt.PERMISSION_DENIED;case oo.FAILED_PRECONDITION:return Jt.FAILED_PRECONDITION;case oo.ABORTED:return Jt.ABORTED;case oo.OUT_OF_RANGE:return Jt.OUT_OF_RANGE;case oo.UNIMPLEMENTED:return Jt.UNIMPLEMENTED;case oo.DATA_LOSS:return Jt.DATA_LOSS;default:return Wt(39323,{code:e})}}(ao=oo||(oo={}))[ao.OK=0]="OK",ao[ao.CANCELLED=1]="CANCELLED",ao[ao.UNKNOWN=2]="UNKNOWN",ao[ao.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ao[ao.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ao[ao.NOT_FOUND=5]="NOT_FOUND",ao[ao.ALREADY_EXISTS=6]="ALREADY_EXISTS",ao[ao.PERMISSION_DENIED=7]="PERMISSION_DENIED",ao[ao.UNAUTHENTICATED=16]="UNAUTHENTICATED",ao[ao.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ao[ao.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ao[ao.ABORTED=10]="ABORTED",ao[ao.OUT_OF_RANGE=11]="OUT_OF_RANGE",ao[ao.UNIMPLEMENTED=12]="UNIMPLEMENTED",ao[ao.INTERNAL=13]="INTERNAL",ao[ao.UNAVAILABLE=14]="UNAVAILABLE",ao[ao.DATA_LOSS=15]="DATA_LOSS";let uo=null;function ho(){return new TextEncoder}const fo=new St([4294967295,4294967295],0);function po(e){const t=ho().encode(e),n=new _t;return n.update(t),new Uint8Array(n.digest())}function mo(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new St([n,r],0),new St([i,s],0)]}class go{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new yo("Invalid padding: ".concat(t));if(n<0)throw new yo("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new yo("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new yo("Invalid padding when bitmap length is 0: ".concat(t));this.ge=8*e.length-t,this.pe=St.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(St.fromNumber(n)));return 1===r.compare(fo)&&(r=new St([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=po(e),[n,r]=mo(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new go(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.ge)return;const t=po(e),[n,r]=mo(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class yo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class vo{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,bo.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new vo(Dn.min(),r,new Cr(un),fs(),Ss())}}class bo{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new bo(n,t,Ss(),Ss(),Ss())}}class wo{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class xo{constructor(e,t){this.targetId=e,this.Ce=t}}class So{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Or.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class _o{constructor(){this.ve=0,this.Fe=To(),this.Me=Or.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ss(),t=Ss(),n=Ss();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Wt(38017,{changeType:i})}}),new bo(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=To()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Qt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class ko{constructor(e){this.Ge=e,this.ze=new Map,this.je=fs(),this.Je=Eo(),this.He=Eo(),this.Ye=new Cr(un)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:Wt(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const s=r.target;if(Ki(s))if(0===n){const e=new xn(s.path);this.et(t,e,wi.newNoDocument(e,Dn.min()))}else Qt(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){var i;const n=this.ut(e),s=n?this.ct(n,e,r):1;if(0!==s){this.it(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}null===(i=uo)||void 0===i||i.lt(function(e,t,n,r,i,s,o,a,l,c){const u={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(u.bloomFilter={applied:0===i,hashCount:null!==(s=null===d||void 0===d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(o=null===d||void 0===d||null===(a=d.bits)||void 0===a||null===(a=a.bitmap)||void 0===a?void 0:a.length)&&void 0!==o?o:0,padding:null!==(l=null===d||void 0===d||null===(c=d.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:e=>{var t;return null!==(t=null===r||void 0===r?void 0:r.mightContain(e))&&void 0!==t&&t}}),u}(r,e.Ce,this.Ge.ht(),n,s))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=Fr(n).toUint8Array()}catch(e){if(e instanceof Dr)return Ht("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new go(s,r,i)}catch(e){return Ht(e instanceof yo?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.ge?null:o}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Ge.ht(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const i=this.ot(r);if(i){if(n.current&&Ki(i.target)){const t=new xn(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,wi.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}});let n=Ss();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new vo(e,t,this.Ye,this.je,n);return this.je=fs(),this.Je=Eo(),this.He=Eo(),this.Ye=new Cr(un),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new _o,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Ar(un),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Ar(un),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||Bt("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new _o),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Eo(){return new Cr(xn.comparator)}function To(){return new Cr(xn.comparator)}const Co={asc:"ASCENDING",desc:"DESCENDING"},No={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Io={and:"AND",or:"OR"};class Ao{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ro(e,t){return e.useProto3Json||Qn(t)?t:{value:t}}function Po(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Do(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Oo(e,t){return Po(e,t.toTimestamp())}function jo(e){return Qt(!!e,49232),Dn.fromTimestamp(function(e){const t=Lr(e);return new Pn(t.seconds,t.nanos)}(e))}function Lo(e,t){return Mo(e,t).canonicalString()}function Mo(e,t){const n=function(e){return new vn(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Fo(e){const t=vn.fromString(e);return Qt(ia(t),10190,{key:t.toString()}),t}function Uo(e,t){return Lo(e.databaseId,t.path)}function Vo(e,t){const n=Fo(t);if(n.get(1)!==e.databaseId.projectId)throw new Xt(Jt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Xt(Jt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new xn(Ho(n))}function zo(e,t){return Lo(e.databaseId,t)}function Bo(e){const t=Fo(e);return 4===t.length?vn.emptyPath():Ho(t)}function qo(e){return new vn(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ho(e){return Qt(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Go(e,t,n){return{name:Uo(e,t),fields:n.value.mapValue.fields}}function Wo(e,t){let n;if(t instanceof Ys)n={update:Go(e,t.key,t.value)};else if(t instanceof eo)n={delete:Uo(e,t.key)};else if(t instanceof Js)n={update:Go(e,t.key,t.data),updateMask:ra(t.fieldMask)};else{if(!(t instanceof to))return Wt(16599,{Vt:t.type});n={verify:Uo(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Ps)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ds)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof js)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ms)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw Wt(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Oo(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Wt(27497)}(e,t.precondition)),n}function Ko(e,t){return{documents:[zo(e,t.path)]}}function Qo(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=zo(e,i);const s=function(e){if(0!==e.length)return na(Ni.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:ea(e.field),direction:Xo(e.dir)}}(e))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Ro(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function Yo(e){let t=Bo(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Qt(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Jo(e);return t instanceof Ni&&Ai(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map(e=>function(e){return new ki(ta(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Qn(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new xi(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new xi(n,t)}(n.endAt)),Yi(t,i,o,s,a,"F",l,c)}function Jo(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=ta(e.unaryFilter.field);return Ci.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=ta(e.unaryFilter.field);return Ci.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ta(e.unaryFilter.field);return Ci.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=ta(e.unaryFilter.field);return Ci.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Wt(61313);default:return Wt(60726)}}(e):void 0!==e.fieldFilter?function(e){return Ci.create(ta(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Wt(58110);default:return Wt(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Ni.create(e.compositeFilter.filters.map(e=>Jo(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Wt(1026)}}(e.compositeFilter.op))}(e):Wt(30097,{filter:e})}function Xo(e){return Co[e]}function $o(e){return No[e]}function Zo(e){return Io[e]}function ea(e){return{fieldPath:e.canonicalString()}}function ta(e){return wn.fromServerFormat(e.fieldPath)}function na(e){return e instanceof Ci?function(e){if("=="===e.op){if(fi(e.value))return{unaryFilter:{field:ea(e.field),op:"IS_NAN"}};if(hi(e.value))return{unaryFilter:{field:ea(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(fi(e.value))return{unaryFilter:{field:ea(e.field),op:"IS_NOT_NAN"}};if(hi(e.value))return{unaryFilter:{field:ea(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ea(e.field),op:$o(e.op),value:e.value}}}(e):e instanceof Ni?function(e){const t=e.getFilters().map(e=>na(e));return 1===t.length?t[0]:{compositeFilter:{op:Zo(e.op),filters:t}}}(e):Wt(54877,{filter:e})}function ra(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function ia(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class sa{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Dn.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Dn.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Or.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new sa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new sa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new sa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new sa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class oa{constructor(e){this.yt=e}}function aa(e){const t=Yo({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?rs(t,t.limit,"L"):t}class la{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Mr(e.integerValue));else if("doubleValue"in e){const n=Mr(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),Yn(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=Lr(n)),t.xt("".concat(n.seconds||"")),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Fr(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?yi(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):mi(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Wt(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){var n;const r=e.fields||{};this.Ft(t,53);const i=Zr,s=(null===(n=r[i].arrayValue)||void 0===n||null===(n=n.values)||void 0===n?void 0:n.length)||0;this.Ft(t,15),t.Mt(Mr(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),xn.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}la.Kt=new la;class ca{constructor(){this.Cn=new ua}addToCollectionParentIndex(e,t){return this.Cn.add(t),qn.resolve()}getCollectionParents(e,t){return qn.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return qn.resolve()}deleteFieldIndex(e,t){return qn.resolve()}deleteAllFieldIndexes(e){return qn.resolve()}createTargetIndexes(e,t){return qn.resolve()}getDocumentsMatchingTarget(e,t){return qn.resolve(null)}getIndexType(e,t){return qn.resolve(0)}getFieldIndexes(e,t){return qn.resolve([])}getNextCollectionGroupToUpdate(e){return qn.resolve(null)}getMinOffset(e,t){return qn.resolve(Fn.min())}getMinOffsetFromCollectionGroup(e,t){return qn.resolve(Fn.min())}updateCollectionGroup(e,t,n){return qn.resolve()}updateIndexEntries(e,t){return qn.resolve()}}class ua{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Ar(vn.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Ar(vn.comparator)).toArray()}}new Uint8Array(0);const da={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ha=41943040;class fa{static withCacheSize(e){return new fa(e,fa.DEFAULT_COLLECTION_PERCENTILE,fa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}fa.DEFAULT_COLLECTION_PERCENTILE=10,fa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fa.DEFAULT=new fa(ha,fa.DEFAULT_COLLECTION_PERCENTILE,fa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fa.DISABLED=new fa(-1,0,0);class pa{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new pa(0)}static cr(){return new pa(-1)}}const ma="LruGarbageCollector",ga=1048576;function ya(e,t){let[n,r]=e,[i,s]=t;const o=un(n,i);return 0===o?un(r,s):o}class va{constructor(e){this.Ir=e,this.buffer=new Ar(ya),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();ya(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ba{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){Bt(ma,"Garbage collection scheduled in ".concat(e,"ms")),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Gn(e)?Bt(ma,"Ignoring IndexedDB error during garbage collection: ",e):await Bn(e)}await this.Vr(3e5)})}}class wa{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return qn.resolve(Wn.ce);const n=new va(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Bt("LruGarbageCollector","Garbage collection skipped; disabled"),qn.resolve(da)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Bt("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),da):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,i,s,o,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(Bt("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,o=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),zt()<=Z.DEBUG&&Bt("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),qn.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}function xa(e,t){return new wa(e,t)}class Sa{constructor(){this.changes=new ds(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,wi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?qn.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class _a{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ka{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Ws(n.mutation,e,Pr.empty(),Pn.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Ss()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ss();const r=ys();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=ms();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=ys();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Ss()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=fs();const s=bs(),o=bs();return t.forEach((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Js)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Ws(o.mutation,t,o.mutation.getFieldMask(),Pn.now())):s.set(t.key,Pr.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return o.set(e,new _a(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),o))}recalculateAndSaveOverlays(e,t){const n=bs();let r=new Cr((e,t)=>e-t),i=Ss();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Pr.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||Ss()).add(e);r=r.insert(i.batchId,a)})}).next(()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=vs();l.forEach(e=>{if(!i.has(e)){const r=Hs(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return qn.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return xn.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):$i(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):qn.resolve(ys());let o=On,a=i;return s.next(t=>qn.forEach(t,(t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?qn.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,a,t,Ss())).next(e=>({batchId:o,changes:gs(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new xn(t)).next(e=>{let t=ms();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=ms();return this.indexManager.getCollectionParents(e,i).next(o=>qn.forEach(o,o=>{const a=function(e,t){return new Qi(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,wi.newInvalidDocument(r)))});let n=ms();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&Ws(s.mutation,r,Pr.empty(),Pn.now()),as(t,r)&&(n=n.insert(e,r))}),n})}}class Ea{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return qn.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:jo(e.createTime)}}(t)),qn.resolve()}getNamedQuery(e,t){return qn.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:aa(e.bundledQuery),readTime:jo(e.readTime)}}(t)),qn.resolve()}}class Ta{constructor(){this.overlays=new Cr(xn.comparator),this.qr=new Map}getOverlay(e,t){return qn.resolve(this.overlays.get(t))}getOverlays(e,t){const n=ys();return qn.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),qn.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),qn.resolve()}getOverlaysForCollection(e,t,n){const r=ys(),i=t.length+1,s=new xn(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return qn.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Cr((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=ys(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=ys(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=r)););return qn.resolve(o)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new io(t,n));let i=this.qr.get(t);void 0===i&&(i=Ss(),this.qr.set(t,i)),this.qr.set(t,i.add(n.key))}}class Ca{constructor(){this.sessionToken=Or.EMPTY_BYTE_STRING}getSessionToken(e){return qn.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,qn.resolve()}}class Na{constructor(){this.Qr=new Ar(Ia.$r),this.Ur=new Ar(Ia.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new Ia(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new Ia(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new xn(new vn([])),n=new Ia(t,e),r=new Ia(t,e+1),i=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),i.push(e.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new xn(new vn([])),n=new Ia(t,e),r=new Ia(t,e+1);let i=Ss();return this.Ur.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new Ia(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Ia{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return xn.comparator(e.key,t.key)||un(e.Yr,t.Yr)}static Kr(e,t){return un(e.Yr,t.Yr)||xn.comparator(e.key,t.key)}}class Aa{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Ar(Ia.$r)}checkEmpty(e){return qn.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new no(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.Zr=this.Zr.add(new Ia(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return qn.resolve(s)}lookupMutationBatch(e,t){return qn.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),i=r<0?0:r;return qn.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return qn.resolve(0===this.mutationQueue.length?Kn:this.tr-1)}getAllMutationBatches(e){return qn.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Ia(t,0),r=new Ia(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);i.push(t)}),qn.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Ar(un);return t.forEach(e=>{const t=new Ia(e,0),r=new Ia(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),qn.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;xn.isDocumentKey(i)||(i=i.child(""));const s=new Ia(new xn(i),0);let o=new Ar(un);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Yr)),!0)},s),qn.resolve(this.ti(o))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Qt(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return qn.forEach(t.mutations,r=>{const i=new Ia(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new Ia(t,0),r=this.Zr.firstAfterOrEqual(n);return qn.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,qn.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Ra{constructor(e){this.ri=e,this.docs=new Cr(xn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return qn.resolve(n?n.document.mutableCopy():wi.newInvalidDocument(t))}getEntries(e,t){let n=fs();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():wi.newInvalidDocument(e))}),qn.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=fs();const s=t.path,o=new xn(s.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Un(Mn(o),n)<=0||(r.has(o.key)||as(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return qn.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Wt(9500)}ii(e,t){return qn.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Pa(this)}getSize(e){return qn.resolve(this.size)}}class Pa extends Sa{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),qn.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class Da{constructor(e){this.persistence=e,this.si=new ds(e=>Gi(e),Wi),this.lastRemoteSnapshotVersion=Dn.min(),this.highestTargetId=0,this.oi=0,this._i=new Na,this.targetCount=0,this.ai=pa.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),qn.resolve()}getLastRemoteSnapshotVersion(e){return qn.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return qn.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),qn.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),qn.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new pa(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,qn.resolve()}updateTargetData(e,t){return this.Pr(t),qn.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,qn.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.si.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.si.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),qn.waitFor(i).next(()=>r)}getTargetCount(e){return qn.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return qn.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),qn.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),qn.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),qn.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return qn.resolve(n)}containsKey(e,t){return qn.resolve(this._i.containsKey(t))}}class Oa{constructor(e,t){this.ui={},this.overlays={},this.ci=new Wn(0),this.li=!1,this.li=!0,this.hi=new Ca,this.referenceDelegate=e(this),this.Pi=new Da(this),this.indexManager=new ca,this.remoteDocumentCache=function(e){return new Ra(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new oa(t),this.Ii=new Ea(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Ta,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new Aa(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){Bt("MemoryPersistence","Starting transaction:",e);const r=new ja(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return qn.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class ja extends zn{constructor(e){super(),this.currentSequenceNumber=e}}class La{constructor(e){this.persistence=e,this.Ri=new Na,this.Vi=null}static mi(e){return new La(e)}get fi(){if(this.Vi)return this.Vi;throw Wt(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),qn.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),qn.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),qn.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return qn.forEach(this.fi,n=>{const r=xn.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,Dn.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return qn.or([()=>qn.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Ma{constructor(e,t){this.persistence=e,this.pi=new ds(e=>$n(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=xa(this,t)}static mi(e,t){return new Ma(e,t)}Ei(){}di(e){return qn.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return qn.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?qn.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,i.removeEntry(r,Dn.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),qn.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),qn.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),qn.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),qn.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=li(e.data.value)),t}br(e,t,n){return qn.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return qn.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Fa{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=Ss(),r=Ss();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Fa(e,t.fromCache,n,r)}}class Ua{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Va{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=j()?8:Hn(D())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ys(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ws(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new Ua;return this.Ss(e,t,n).next(r=>{if(i.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>i.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(zt()<=Z.DEBUG&&Bt("QueryEngine","SDK will not create cache indexes for query:",os(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),qn.resolve()):(zt()<=Z.DEBUG&&Bt("QueryEngine","Query:",os(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(zt()<=Z.DEBUG&&Bt("QueryEngine","The SDK decides to create cache indexes for query:",os(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,es(t))):qn.resolve())}ys(e,t){if(Xi(t))return qn.resolve(null);let n=es(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=rs(t,null,"F"),n=es(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=Ss(...r);return this.ps.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.Ds(t,r);return this.Cs(t,s,i,n.readTime)?this.ys(e,rs(t,null,"F")):this.vs(e,s,t,n)}))})))}ws(e,t,n,r){return Xi(t)||r.isEqual(Dn.min())?qn.resolve(null):this.ps.getDocuments(e,n).next(i=>{const s=this.Ds(t,i);return this.Cs(t,s,n,r)?qn.resolve(null):(zt()<=Z.DEBUG&&Bt("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),os(t)),this.vs(e,s,t,Ln(r,On)).next(e=>e))})}Ds(e,t){let n=new Ar(cs(e));return t.forEach((t,r)=>{as(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return zt()<=Z.DEBUG&&Bt("QueryEngine","Using full collection scan to execute query:",os(t)),this.ps.getDocumentsMatchingQuery(e,t,Fn.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const za="LocalStore";class Ba{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new Cr(un),this.xs=new ds(e=>Gi(e),Wi),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ka(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function qa(e,t,n,r){return new Ba(e,t,n,r)}async function Ha(e,t){const n=Yt(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let o=Ss();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next(e=>({Ls:e,removedBatchIds:i,addedBatchIds:s}))})})}function Ga(e){const t=Yt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function Wa(e,t,n){let r=Ss(),i=Ss();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=fs();return n.forEach((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Dn.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Bt(za,"Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)}),{ks:r,qs:i}})}function Ka(e,t){const n=Yt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=Kn),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function Qa(e,t){const n=Yt(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Pi.getTargetData(e,t).next(i=>i?(r=i,qn.resolve(r)):n.Pi.allocateTargetId(e).next(i=>(r=new sa(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}async function Ya(e,t,n){const r=Yt(e),i=r.Ms.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!Gn(e))throw e;Bt(za,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function Ja(e,t,n){const r=Yt(e);let i=Dn.min(),s=Ss();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=Yt(e),i=r.xs.get(n);return void 0!==i?qn.resolve(r.Ms.get(i)):r.Pi.getTargetData(t,n)}(r,e,es(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Fs.getDocumentsMatchingQuery(e,t,n?i:Dn.min(),n?s:Ss())).next(e=>(Xa(r,ls(t),e),{documents:e,Qs:s})))}function Xa(e,t,n){let r=e.Os.get(t)||Dn.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Os.set(t,r)}class $a{constructor(){this.activeTargetIds=ks()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Za{constructor(){this.Mo=new $a,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new $a,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class el{Oo(e){}shutdown(){}}const tl="ConnectivityMonitor";class nl{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Bt(tl,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Bt(tl,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let rl=null;function il(){return null===rl?rl=268435456+Math.round(2147483648*Math.random()):rl++,"0x"+rl.toString(16)}const sl="RestConnection",ol={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class al{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko="projects/".concat(n,"/databases/").concat(r),this.Wo=this.databaseId.database===Kr?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Go(e,t,n,r,i){const s=il(),o=this.zo(e,t.toUriEncodedString());Bt(sl,"Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(a,r,i);const{host:l}=new URL(o),c=C(l);return this.Jo(e,o,a,n,c).then(t=>(Bt(sl,"Received RPC '".concat(e,"' ").concat(s,": "),t),t),t=>{throw Ht(sl,"RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t})}Ho(e,t,n,r,i,s){return this.Go(e,t,n,r,i)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ut,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=ol[e];return"".concat(this.Uo,"/v1/").concat(t,":").concat(n)}terminate(){}}class ll{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const cl="WebChannelConnection";class ul extends al{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){const s=il();return new Promise((i,o)=>{const a=new Tt;a.setWithCredentials(!0),a.listenOnce(Nt.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case It.NO_ERROR:const n=a.getResponseJson();Bt(cl,"XHR for RPC '".concat(e,"' ").concat(s," received:"),JSON.stringify(n)),i(n);break;case It.TIMEOUT:Bt(cl,"RPC '".concat(e,"' ").concat(s," timed out")),o(new Xt(Jt.DEADLINE_EXCEEDED,"Request time out"));break;case It.HTTP_ERROR:const r=a.getStatus();if(Bt(cl,"RPC '".concat(e,"' ").concat(s," failed with status:"),r,"response text:",a.getResponseText()),r>0){var t;let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const n=null===(t=e)||void 0===t?void 0:t.error;if(n&&n.status&&n.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Jt).indexOf(t)>=0?t:Jt.UNKNOWN}(n.status);o(new Xt(e,n.message))}else o(new Xt(Jt.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Xt(Jt.UNAVAILABLE,"Connection failed."));break;default:Wt(9055,{l_:e,streamId:s,h_:a.getLastErrorCode(),P_:a.getLastError()})}}finally{Bt(cl,"RPC '".concat(e,"' ").concat(s," completed."))}});const l=JSON.stringify(r);Bt(cl,"RPC '".concat(e,"' ").concat(s," sending request:"),r),a.send(t,"POST",l,n,15)})}T_(e,t,n){const r=il(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Dt(),o=Pt(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.jo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");Bt(cl,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=s.createWebChannel(c,a);this.I_(u);let d=!1,h=!1;const f=new ll({Yo:t=>{h?Bt(cl,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(Bt(cl,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),Bt(cl,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Zo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,Ct.EventType.OPEN,()=>{h||(Bt(cl,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.o_())}),p(u,Ct.EventType.CLOSE,()=>{h||(h=!0,Bt(cl,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.a_(),this.E_(u))}),p(u,Ct.EventType.ERROR,t=>{h||(h=!0,Ht(cl,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),f.a_(new Xt(Jt.UNAVAILABLE,"The operation could not be completed")))}),p(u,Ct.EventType.MESSAGE,t=>{if(!h){var n;const i=t.data[0];Qt(!!i,16349);const s=i,o=(null===s||void 0===s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Bt(cl,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=oo[e];if(void 0!==t)return co(t)}(t),i=o.message;void 0===n&&(n=Jt.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),h=!0,f.a_(new Xt(n,i)),u.close()}else Bt(cl,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.u_(i)}}),p(o,Rt.STAT_EVENT,t=>{t.stat===At.PROXY?Bt(cl,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===At.NOPROXY&&Bt(cl,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.__()},0),f}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function dl(){return"undefined"!=typeof document?document:null}function hl(e){return new Ao(e,!0)}class fl{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&Bt("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.V_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const pl="PersistentStream";class ml{constructor(e,t,n,r,i,s,o,a){this.Mi=e,this.S_=n,this.b_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new fl(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===Jt.RESOURCE_EXHAUSTED?(qt(t.toString()),qt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Jt.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new Xt(Jt.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Bt(pl,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(Bt(pl,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class gl extends ml{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Wt(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Qt(void 0===t||"string"==typeof t,58123),Or.fromBase64String(t||"")):(Qt(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),Or.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Jt.UNKNOWN:co(e.code);return new Xt(t,e.message||"")}(o);n=new So(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Vo(e,r.document.name),s=jo(r.document.updateTime),o=r.document.createTime?jo(r.document.createTime):Dn.min(),a=new vi({mapValue:{fields:r.document.fields}}),l=wi.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new wo(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Vo(e,r.document),s=r.readTime?jo(r.readTime):Dn.min(),o=wi.newNoDocument(i,s),a=r.removedTargetIds||[];n=new wo([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Vo(e,r.document),s=r.removedTargetIds||[];n=new wo([],s,i,null)}else{if(!("filter"in t))return Wt(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new so(r,i),o=e.targetId;n=new xo(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Dn.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Dn.min():t.readTime?jo(t.readTime):Dn.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=qo(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Ki(r)?{documents:Ko(e,r)}:{query:Qo(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Do(e,t.resumeToken);const r=Ro(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Dn.min())>0){n.readTime=Po(e,t.snapshotVersion.toTimestamp());const r=Ro(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Wt(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=qo(this.serializer),t.removeTarget=e,this.q_(t)}}class yl extends ml{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Qt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Qt(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){Qt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(Qt(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?jo(e.updateTime):jo(t);return n.isEqual(Dn.min())&&(n=jo(t)),new Vs(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=jo(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=qo(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Wo(this.serializer,e))};this.q_(t)}}class vl{}class bl extends vl{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Xt(Jt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[s,o]=i;return this.connection.Go(e,Mo(t,n),r,s,o)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Jt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Xt(Jt.UNKNOWN,e.toString())})}Ho(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[o,a]=s;return this.connection.Ho(e,Mo(t,n),r,o,a,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Jt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Xt(Jt.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class wl{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?(qt(t),this.aa=!1):Bt("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const xl="RemoteStore";class Sl{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{Rl(this)&&(Bt(xl,"Restarting streams for network reachability change."),await async function(e){const t=Yt(e);t.Ea.add(4),await kl(t),t.Ra.set("Unknown"),t.Ea.delete(4),await _l(t)}(this))})}),this.Ra=new wl(n,r)}}async function _l(e){if(Rl(e))for(const t of e.da)await t(!0)}async function kl(e){for(const t of e.da)await t(!1)}function El(e,t){const n=Yt(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Al(n)?Il(n):Jl(n).O_()&&Cl(n,t))}function Tl(e,t){const n=Yt(e),r=Jl(n);n.Ia.delete(t),r.O_()&&Nl(n,t),0===n.Ia.size&&(r.O_()?r.L_():Rl(n)&&n.Ra.set("Unknown"))}function Cl(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Dn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Jl(e).Y_(t)}function Nl(e,t){e.Va.Ue(t),Jl(e).Z_(t)}function Il(e){e.Va=new ko({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Jl(e).start(),e.Ra.ua()}function Al(e){return Rl(e)&&!Jl(e).x_()&&e.Ia.size>0}function Rl(e){return 0===Yt(e).Ea.size}function Pl(e){e.Va=void 0}async function Dl(e){e.Ra.set("Online")}async function Ol(e){e.Ia.forEach((t,n)=>{Cl(e,t)})}async function jl(e,t){Pl(e),Al(e)?(e.Ra.ha(t),Il(e)):e.Ra.set("Unknown")}async function Ll(e,t,n){if(e.Ra.set("Online"),t instanceof So&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){Bt(xl,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Ml(e,n)}else if(t instanceof wo?e.Va.Ze(t):t instanceof xo?e.Va.st(t):e.Va.tt(t),!n.isEqual(Dn.min()))try{const t=await Ga(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(Or.EMPTY_BYTE_STRING,r.snapshotVersion)),Nl(e,t);const i=new sa(r.target,t,n,r.sequenceNumber);Cl(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Bt(xl,"Failed to raise snapshot:",t),await Ml(e,t)}}async function Ml(e,t,n){if(!Gn(t))throw t;e.Ea.add(1),await kl(e),e.Ra.set("Offline"),n||(n=()=>Ga(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Bt(xl,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await _l(e)})}function Fl(e,t){return t().catch(n=>Ml(e,n,t))}async function Ul(e){const t=Yt(e),n=Xl(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Kn;for(;Vl(t);)try{const e=await Ka(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,zl(t,e)}catch(e){await Ml(t,e)}Bl(t)&&ql(t)}function Vl(e){return Rl(e)&&e.Ta.length<10}function zl(e,t){e.Ta.push(t);const n=Xl(e);n.O_()&&n.X_&&n.ea(t.mutations)}function Bl(e){return Rl(e)&&!Xl(e).x_()&&e.Ta.length>0}function ql(e){Xl(e).start()}async function Hl(e){Xl(e).ra()}async function Gl(e){const t=Xl(e);for(const n of e.Ta)t.ea(n.mutations)}async function Wl(e,t,n){const r=e.Ta.shift(),i=ro.from(r,t,n);await Fl(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await Ul(e)}async function Kl(e,t){t&&Xl(e).X_&&await async function(e,t){if(function(e){return lo(e)&&e!==Jt.ABORTED}(t.code)){const n=e.Ta.shift();Xl(e).B_(),await Fl(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Ul(e)}}(e,t),Bl(e)&&ql(e)}async function Ql(e,t){const n=Yt(e);n.asyncQueue.verifyOperationInProgress(),Bt(xl,"RemoteStore received new credentials");const r=Rl(n);n.Ea.add(3),await kl(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await _l(n)}async function Yl(e,t){const n=Yt(e);t?(n.Ea.delete(2),await _l(n)):t||(n.Ea.add(2),await kl(n),n.Ra.set("Unknown"))}function Jl(e){return e.ma||(e.ma=function(e,t,n){const r=Yt(e);return r.sa(),new gl(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:Dl.bind(null,e),t_:Ol.bind(null,e),r_:jl.bind(null,e),H_:Ll.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),Al(e)?Il(e):e.Ra.set("Unknown")):(await e.ma.stop(),Pl(e))})),e.ma}function Xl(e){return e.fa||(e.fa=function(e,t,n){const r=Yt(e);return r.sa(),new yl(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Hl.bind(null,e),r_:Kl.bind(null,e),ta:Gl.bind(null,e),na:Wl.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Ul(e)):(await e.fa.stop(),e.Ta.length>0&&(Bt(xl,"Stopping write stream with ".concat(e.Ta.length," pending writes")),e.Ta=[]))})),e.fa}class $l{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new $t,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new $l(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Xt(Jt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zl(e,t){if(qt("AsyncQueue","".concat(t,": ").concat(e)),Gn(e))return new Xt(Jt.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class ec{static emptySet(e){return new ec(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||xn.comparator(t.key,n.key):(e,t)=>xn.comparator(e.key,t.key),this.keyedMap=ms(),this.sortedSet=new Cr(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ec))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new ec;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class tc{constructor(){this.ga=new Cr(xn.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Wt(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class nc{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new nc(e,t,ec.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&is(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class rc{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class ic{constructor(){this.queries=sc(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=Yt(e),r=n.queries;n.queries=sc(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new Xt(Jt.ABORTED,"Firestore shutting down"))}}function sc(){return new ds(e=>ss(e),is)}async function oc(e,t){const n=Yt(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.ba()&&t.Da()&&(r=2):(s=new rc,r=t.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Zl(e,"Initialization of query '".concat(os(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.Sa.push(t),t.va(n.onlineState),s.wa&&t.Fa(s.wa)&&uc(n)}async function ac(e,t){const n=Yt(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.Sa.indexOf(t);e>=0&&(s.Sa.splice(e,1),0===s.Sa.length?i=t.Da()?0:1:!s.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function lc(e,t){const n=Yt(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(i)&&(r=!0);t.wa=i}}r&&uc(n)}function cc(e,t,n){const r=Yt(e),i=r.queries.get(t);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(t)}function uc(e){e.Ca.forEach(e=>{e.next()})}var dc,hc;(hc=dc||(dc={})).Ma="default",hc.Cache="cache";class fc{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new nc(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=nc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==dc.Cache}}class pc{constructor(e){this.key=e}}class mc{constructor(e){this.key=e}}class gc{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ss(),this.mutatedKeys=Ss(),this.eu=cs(e),this.tu=new ec(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new tc,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=as(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.su(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.eu(u,a)>0||l&&this.eu(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=h?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:s,iu:n,Cs:o,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Wt(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=null!==r&&void 0!==r&&r;const o=t&&!r?this._u():[],a=0===this.Xa.size&&this.current&&!r?1:0,l=a!==this.Za;return this.Za=a,0!==s.length||l?{snapshot:new nc(this.query,e.tu,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new tc,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ss(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new mc(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new pc(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=Ss();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return nc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const yc="SyncEngine";class vc{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class bc{constructor(e){this.key=e,this.hu=!1}}class wc{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new ds(e=>ss(e),is),this.Iu=new Map,this.Eu=new Set,this.du=new Cr(xn.comparator),this.Au=new Map,this.Ru=new Na,this.Vu={},this.mu=new Map,this.fu=pa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function xc(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Bc(e);let i;const s=r.Tu.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await _c(r,t,n,!0),i}async function Sc(e,t){const n=Bc(e);await _c(n,t,!0,!1)}async function _c(e,t,n,r){const i=await Qa(e.localStore,es(t)),s=i.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await kc(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&El(e.remoteStore,i),a}async function kc(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Cs&&(i=await Ja(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,i)}));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return Lc(e,t.targetId,a.au),a.snapshot}(e,t,n,r);const s=await Ja(e.localStore,t,!0),o=new gc(t,s.Qs),a=o.ru(s.documents),l=bo.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);Lc(e,n,c.au);const u=new vc(t,n,o);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),c.snapshot}async function Ec(e,t,n){const r=Yt(e),i=r.Tu.get(t),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(e=>!is(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Ya(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Tl(r.remoteStore,i.targetId),Oc(r,i.targetId)}).catch(Bn)):(Oc(r,i.targetId),await Ya(r.localStore,i.targetId,!0))}async function Tc(e,t){const n=Yt(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Tl(n.remoteStore,r.targetId))}async function Cc(e,t){const n=Yt(e);try{const e=await function(e,t){const n=Yt(e),r=t.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const o=[];t.targetChanges.forEach((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Pi.removeMatchingKeys(e,s.removedDocuments,a).next(()=>n.Pi.addMatchingKeys(e,s.addedDocuments,a)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(Or.EMPTY_BYTE_STRING,Dn.min()).withLastLimboFreeSnapshotVersion(Dn.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,s)&&o.push(n.Pi.updateTargetData(e,c))});let a=fs(),l=Ss();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(Wa(e,s,t.documentUpdates).next(e=>{a=e.ks,l=e.qs})),!r.isEqual(Dn.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return qn.waitFor(o).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,l)).next(()=>a)}).then(e=>(n.Ms=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(Qt(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?Qt(r.hu,14607):e.removedDocuments.size>0&&(Qt(r.hu,42227),r.hu=!1))}),await Uc(n,e,t)}catch(e){await Bn(e)}}function Nc(e,t,n){const r=Yt(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=Yt(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.Sa)i.va(t)&&(r=!0)}),r&&uc(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Ic(e,t,n){const r=Yt(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Au.get(t),s=i&&i.key;if(s){let e=new Cr(xn.comparator);e=e.insert(s,wi.newNoDocument(s,Dn.min()));const n=Ss().add(s),i=new vo(Dn.min(),new Map,new Cr(un),e,n);await Cc(r,i),r.du=r.du.remove(s),r.Au.delete(t),Fc(r)}else await Ya(r.localStore,t,!1).then(()=>Oc(r,t,n)).catch(Bn)}async function Ac(e,t){const n=Yt(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Yt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=qn.resolve();return s.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);Qt(null!==s,48541),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Ss();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);Dc(n,r,null),Pc(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Uc(n,e)}catch(e){await Bn(e)}}async function Rc(e,t,n){const r=Yt(e);try{const e=await function(e,t){const n=Yt(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(Qt(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);Dc(r,t,n),Pc(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Uc(r,e)}catch(n){await Bn(n)}}function Pc(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function Dc(e,t,n){const r=Yt(e);let i=r.Vu[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function Oc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||jc(e,t)})}function jc(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(Tl(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Fc(e))}function Lc(e,t,n){for(const r of n)r instanceof pc?(e.Ru.addReference(r.key,t),Mc(e,r)):r instanceof mc?(Bt(yc,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||jc(e,r.key)):Wt(19791,{wu:r})}function Mc(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(Bt(yc,"New document in limbo: "+n),e.Eu.add(r),Fc(e))}function Fc(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new xn(vn.fromString(t)),r=e.fu.next();e.Au.set(r,new bc(n)),e.du=e.du.insert(n,r),El(e.remoteStore,new sa(es(Ji(n.path)),r,"TargetPurposeLimboResolution",Wn.ce))}}async function Uc(e,t,n){const r=Yt(e),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((e,a)=>{o.push(r.pu(a,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){var t;const i=e?!e.fromCache:null===n||void 0===n||null===(t=n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Fa.As(a.targetId,e);s.push(t)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(e,t){const n=Yt(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>qn.forEach(t,t=>qn.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>qn.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Gn(e))throw e;Bt(za,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,i)}}}(r.localStore,s))}async function Vc(e,t){const n=Yt(e);if(!n.currentUser.isEqual(t)){Bt(yc,"User change. New user:",t.toKey());const e=await Ha(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new Xt(Jt.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Uc(n,e.Ls)}}function zc(e,t){const n=Yt(e),r=n.Au.get(t);if(r&&r.hu)return Ss().add(r.key);{let e=Ss();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function Bc(e){const t=Yt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Cc.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=zc.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Ic.bind(null,t),t.Pu.H_=lc.bind(null,t.eventManager),t.Pu.yu=cc.bind(null,t.eventManager),t}function qc(e){const t=Yt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Ac.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Rc.bind(null,t),t}class Hc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=hl(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return qa(this.persistence,new Va,e.initialUser,this.serializer)}Cu(e){return new Oa(La.mi,this.serializer)}Du(e){return new Za}async terminate(){var e,t;null!==(e=this.gcScheduler)&&void 0!==e&&e.stop(),null!==(t=this.indexBackfillerScheduler)&&void 0!==t&&t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Hc.provider={build:()=>new Hc};class Gc extends Hc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Qt(this.persistence.referenceDelegate instanceof Ma,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new ba(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?fa.withCacheSize(this.cacheSizeBytes):fa.DEFAULT;return new Oa(e=>Ma.mi(e,t),this.serializer)}}class Wc{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Nc(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Vc.bind(null,this.syncEngine),await Yl(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new ic}createDatastore(e){const t=hl(e.databaseInfo.databaseId),n=function(e){return new ul(e)}(e.databaseInfo);return function(e,t,n,r){return new bl(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Sl(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>Nc(this.syncEngine,e,0),nl.v()?new nl:new el)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new wc(e,t,n,r,i,s);return o&&(a.gu=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Yt(e);Bt(xl,"RemoteStore shutting down."),t.Ea.add(5),await kl(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),null!==(e=this.datastore)&&void 0!==e&&e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Wc.provider={build:()=>new Wc};class Kc{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):qt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const Qc="FirestoreClient";class Yc{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Ft.UNAUTHENTICATED,this.clientId=cn.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{Bt(Qc,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(Bt(Qc,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new $t;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Zl(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Jc(e,t){e.asyncQueue.verifyOperationInProgress(),Bt(Qc,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Ha(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Xc(e,t){e.asyncQueue.verifyOperationInProgress();const n=await $c(e);Bt(Qc,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Ql(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Ql(t.remoteStore,n)),e._onlineComponents=t}async function $c(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Bt(Qc,"Using user provided OfflineComponentProvider");try{await Jc(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===Jt.FAILED_PRECONDITION||e.code===Jt.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;Ht("Error using user provided cache. Falling back to memory cache: "+n),await Jc(e,new Hc)}}else Bt(Qc,"Using default OfflineComponentProvider"),await Jc(e,new Gc(void 0));return e._offlineComponents}async function Zc(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Bt(Qc,"Using user provided OnlineComponentProvider"),await Xc(e,e._uninitializedComponentsProvider._online)):(Bt(Qc,"Using default OnlineComponentProvider"),await Xc(e,new Wc))),e._onlineComponents}function eu(e){return Zc(e).then(e=>e.syncEngine)}async function tu(e){const t=await Zc(e),n=t.eventManager;return n.onListen=xc.bind(null,t.syncEngine),n.onUnlisten=Ec.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Sc.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Tc.bind(null,t.syncEngine),n}function nu(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new $t;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new Kc({next:n=>{s.Nu(),t.enqueueAndForget(()=>ac(e,o)),n.fromCache&&"server"===r.source?i.reject(new Xt(Jt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new fc(n,s,{includeMetadataChanges:!0,qa:!0});return oc(e,o)}(await tu(e),e.asyncQueue,t,n,r)),r.promise}function ru(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const iu=new Map,su="firestore.googleapis.com",ou=!0;class au{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Xt(Jt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=su,this.ssl=ou}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:ou;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=ha;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<ga)throw new Xt(Jt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Xt(Jt.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ru(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Xt(Jt.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Xt(Jt.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Xt(Jt.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class lu{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new au({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Xt(Jt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Xt(Jt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new au(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new en;switch(e.type){case"firstParty":return new sn(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Xt(Jt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=iu.get(e);t&&(Bt("ComponentProvider","Removing Datastore"),iu.delete(e),t.terminate())}(this),Promise.resolve()}}class cu{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new cu(this.firestore,e,this._query)}}class uu{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new du(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new uu(this.firestore,e,this._key)}toJSON(){return{type:uu._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(In(t,uu._jsonSchema))return new uu(e,n||null,new xn(vn.fromString(t.referencePath)))}}uu._jsonSchemaVersion="firestore/documentReference/1.0",uu._jsonSchema={type:Nn("string",uu._jsonSchemaVersion),referencePath:Nn("string")};class du extends cu{constructor(e,t,n){super(e,t,Ji(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new uu(this.firestore,null,new xn(e))}withConverter(e){return new du(this.firestore,e,this._path)}}function hu(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=K(e),Sn("collection","path",t),e instanceof lu){const n=vn.fromString(t,...r);return kn(n),new du(e,null,n)}{if(!(e instanceof uu||e instanceof du))throw new Xt(Jt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(vn.fromString(t,...r));return kn(n),new du(e.firestore,null,n)}}function fu(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=K(e),1===arguments.length&&(t=cn.newId()),Sn("doc","path",t),e instanceof lu){const n=vn.fromString(t,...r);return _n(n),new uu(e,null,new xn(n))}{if(!(e instanceof uu||e instanceof du))throw new Xt(Jt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(vn.fromString(t,...r));return _n(n),new uu(e.firestore,e instanceof du?e.converter:null,new xn(n))}}const pu="AsyncQueue";class mu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new fl(this,"async_queue_retry"),this._c=()=>{const e=dl();e&&Bt(pu,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=dl();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=dl();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new $t;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Gn(e))throw e;Bt(pu,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,qt("INTERNAL UNHANDLED ERROR: ",gu(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=$l.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&Wt(47125,{Pc:gu(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function gu(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class yu extends lu{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new mu,this._persistenceKey=(null===r||void 0===r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mu(e),this._firestoreClient=void 0,await e}}}function vu(e){if(e._terminated)throw new Xt(Jt.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||bu(e),e._firestoreClient}function bu(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Wr(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,ru(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new Yc(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null===e||void 0===e?void 0:e._online.build();return{_offline:null===e||void 0===e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class wu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wu(Or.fromBase64String(e))}catch(e){throw new Xt(Jt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new wu(Or.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:wu._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(In(e,wu._jsonSchema))return wu.fromBase64String(e.bytes)}}wu._jsonSchemaVersion="firestore/bytes/1.0",wu._jsonSchema={type:Nn("string",wu._jsonSchemaVersion),bytes:Nn("string")};class xu{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Xt(Jt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wn(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Su{constructor(e){this._methodName=e}}class _u{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Xt(Jt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Xt(Jt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return un(this._lat,e._lat)||un(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:_u._jsonSchemaVersion}}static fromJSON(e){if(In(e,_u._jsonSchema))return new _u(e.latitude,e.longitude)}}_u._jsonSchemaVersion="firestore/geoPoint/1.0",_u._jsonSchema={type:Nn("string",_u._jsonSchemaVersion),latitude:Nn("number"),longitude:Nn("number")};class ku{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:ku._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(In(e,ku._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new ku(e.vectorValues);throw new Xt(Jt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ku._jsonSchemaVersion="firestore/vectorValue/1.0",ku._jsonSchema={type:Nn("string",ku._jsonSchemaVersion),vectorValues:Nn("object")};const Eu=/^__.*__$/;class Tu{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Js(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ys(e,this.data,t,this.fieldTransforms)}}class Cu{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Js(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Nu(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Wt(40011,{Ac:e})}}class Iu{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Iu(c(c({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Hu(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(Nu(this.Ac)&&Eu.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Au{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||hl(e)}Cc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Iu({Ac:e,methodName:t,Dc:n,path:wn.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ru(e){const t=e._freezeSettings(),n=hl(e._databaseId);return new Au(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Pu(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Cc(s.merge||s.mergeFields?2:0,t,n,i);Vu("Data must be an object, but it was:",o,r);const a=Fu(r,o);let l,c;if(s.merge)l=new Pr(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=zu(t,r,n);if(!o.contains(i))throw new Xt(Jt.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Gu(e,i)||e.push(i)}l=new Pr(e),c=o.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=o.fieldTransforms;return new Tu(new vi(a),l,c)}class Du extends Su{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Sc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Du}}function Ou(e,t,n,r){const i=e.Cc(1,t,n);Vu("Data must be an object, but it was:",i,r);const s=[],o=vi.empty();Er(r,(e,r)=>{const a=qu(t,e,n);r=K(r);const l=i.yc(a);if(r instanceof Du)s.push(a);else{const e=Mu(r,l);null!=e&&(s.push(a),o.set(a,e))}});const a=new Pr(s);return new Cu(o,a,i.fieldTransforms)}function ju(e,t,n,r,i,s){const o=e.Cc(1,t,n),a=[zu(t,r,n)],l=[i];if(s.length%2!=0)throw new Xt(Jt.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<s.length;h+=2)a.push(zu(t,s[h])),l.push(s[h+1]);const c=[],u=vi.empty();for(let h=a.length-1;h>=0;--h)if(!Gu(c,a[h])){const e=a[h];let t=l[h];t=K(t);const n=o.yc(e);if(t instanceof Du)c.push(e);else{const r=Mu(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new Pr(c);return new Cu(u,d,o.fieldTransforms)}function Lu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Mu(n,e.Cc(r?4:3,t))}function Mu(e,t){if(Uu(e=K(e)))return Vu("Unsupported field value:",t,e),Fu(e,t);if(e instanceof Su)return function(e,t){if(!Nu(t.Ac))throw t.Sc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Sc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Mu(i,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=K(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Cs(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Pn.fromDate(e);return{timestampValue:Po(t.serializer,n)}}if(e instanceof Pn){const n=new Pn(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Po(t.serializer,n)}}if(e instanceof _u)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof wu)return{bytesValue:Do(t.serializer,e._byteString)};if(e instanceof uu){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Lo(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof ku)return function(e,t){return{mapValue:{fields:{[Yr]:{stringValue:$r},[Zr]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return Es(t.serializer,e)})}}}}}}(e,t);throw t.Sc("Unsupported field value: ".concat(Tn(e)))}(e,t)}function Fu(e,t){const n={};return Tr(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Er(e,(e,r)=>{const i=Mu(r,t.mc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function Uu(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Pn||e instanceof _u||e instanceof wu||e instanceof uu||e instanceof Su||e instanceof ku)}function Vu(e,t,n){if(!Uu(n)||!En(n)){const r=Tn(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function zu(e,t,n){if((t=K(t))instanceof xu)return t._internalPath;if("string"==typeof t)return qu(e,t);throw Hu("Field path arguments must be of type string or ",e,!1,void 0,n)}const Bu=new RegExp("[~\\*/\\[\\]]");function qu(e,t,n){if(t.search(Bu)>=0)throw Hu("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new xu(...t.split("."))._internalPath}catch(r){throw Hu("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Hu(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new Xt(Jt.INVALID_ARGUMENT,a+e+l)}function Gu(e,t){return e.some(e=>e.isEqual(t))}class Wu{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new uu(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Ku(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Qu("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Ku extends Wu{data(){return super.data()}}function Qu(e,t){return"string"==typeof t?qu(e,t):t instanceof xu?t._internalPath:t._delegate._internalPath}function Yu(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Xt(Jt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ju{}class Xu extends Ju{}function $u(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof Ju&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof ed).length,n=e.filter(e=>e instanceof Zu).length;if(t>1||t>0&&n>0)throw new Xt(Jt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class Zu extends Xu{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Zu(e,t,n)}_apply(e){const t=this._parse(e);return sd(e._query,t),new cu(e.firestore,e.converter,ns(e._query,t))}_parse(e){const t=Ru(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Xt(Jt.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){id(o,s);const t=[];for(const n of o)t.push(rd(r,e,n));a={arrayValue:{values:t}}}else a=rd(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||id(o,s),a=Lu(n,t,o,"in"===s||"not-in"===s);return Ci.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class ed extends Ju{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ed(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:Ni.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)sd(n,i),n=ns(n,i)}(e._query,t),new cu(e.firestore,e.converter,ns(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class td extends Xu{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new td(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Xt(Jt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Xt(Jt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ki(t,n)}(e._query,this._field,this._direction);return new cu(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Qi(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function nd(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Qu("orderBy",e);return td._create(n,t)}function rd(e,t,n){if("string"==typeof(n=K(n))){if(""===n)throw new Xt(Jt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$i(t)&&-1!==n.indexOf("/"))throw new Xt(Jt.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(vn.fromString(n));if(!xn.isDocumentKey(r))throw new Xt(Jt.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return ci(e,new xn(r))}if(n instanceof uu)return ci(e,n._key);throw new Xt(Jt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Tn(n),"."))}function id(e,t){if(!Array.isArray(e)||0===e.length)throw new Xt(Jt.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function sd(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Xt(Jt.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Xt(Jt.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class od{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(ei(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Mr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Fr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Wt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Er(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t;const n=null===(t=e.fields)||void 0===t||null===(t=t[Zr].arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(e=>Mr(e.doubleValue));return new ku(n)}convertGeoPoint(e){return new _u(Mr(e.latitude),Mr(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Hr(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Gr(e));default:return null}}convertTimestamp(e){const t=Lr(e);return new Pn(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=vn.fromString(e);Qt(ia(n),9688,{name:e});const r=new Qr(n.get(1),n.get(3)),i=new xn(n.popFirst(5));return r.isEqual(t)||qt("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function ad(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class ld{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class cd extends Wu{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new ud(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Qu("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Xt(Jt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=cd._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}cd._jsonSchemaVersion="firestore/documentSnapshot/1.0",cd._jsonSchema={type:Nn("string",cd._jsonSchemaVersion),bundleSource:Nn("string","DocumentSnapshot"),bundleName:Nn("string"),bundle:Nn("string")};class ud extends cd{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class dd{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new ld(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new ud(this._firestore,this._userDataWriter,n.key,n,new ld(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Xt(Jt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new ud(e._firestore,e._userDataWriter,n.doc.key,n.doc,new ld(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new ud(e._firestore,e._userDataWriter,t.doc.key,t.doc,new ld(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:hd(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Xt(Jt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=dd._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=cn.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function hd(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Wt(61501,{type:e})}}dd._jsonSchemaVersion="firestore/querySnapshot/1.0",dd._jsonSchema={type:Nn("string",dd._jsonSchemaVersion),bundleSource:Nn("string","QuerySnapshot"),bundleName:Nn("string"),bundle:Nn("string")};class fd extends od{constructor(e){super(),this.firestore=e}convertBytes(e){return new wu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new uu(this.firestore,null,t)}}function pd(e){e=Cn(e,cu);const t=Cn(e.firestore,yu),n=vu(t),r=new fd(t);return Yu(e._query),nu(n,e._query).then(n=>new dd(t,r,e,n))}function md(e,t,n){e=Cn(e,uu);const r=Cn(e.firestore,yu),i=ad(e.converter,t,n);return vd(r,[Pu(Ru(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,zs.none())])}function gd(e){return vd(Cn(e.firestore,yu),[new eo(e._key,zs.none())])}function yd(e,t){const n=Cn(e.firestore,yu),r=fu(e),i=ad(e.converter,t);return vd(n,[Pu(Ru(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,zs.exists(!1))]).then(()=>r)}function vd(e,t){return function(e,t){const n=new $t;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=qc(e);try{const e=await function(e,t){const n=Yt(e),r=Pn.now(),i=t.reduce((e,t)=>e.add(t.key),Ss());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=fs(),l=Ss();return n.Ns.getEntries(e,i).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(i=>{s=i;const o=[];for(const e of t){const t=Ks(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Js(e.key,t,bi(t.value.mapValue),zs.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)}).next(t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:o.batchId,changes:gs(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new Cr(un)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await Uc(r,e.changes),await Ul(r.remoteStore)}catch(e){const t=Zl(e,"Failed to persist write");n.reject(t)}}(await eu(e),t,n)),n.promise}(vu(e),t)}class bd{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ru(e)}set(e,t,n){this._verifyNotCommitted();const r=wd(e,this._firestore),i=ad(r.converter,t,n),s=Pu(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,zs.none())),this}update(e,t,n){this._verifyNotCommitted();const r=wd(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=K(t))||t instanceof xu?ju(this._dataReader,"WriteBatch.update",r._key,t,n,o):Ou(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,zs.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=wd(e,this._firestore);return this._mutations=this._mutations.concat(new eo(t._key,zs.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Xt(Jt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function wd(e,t){if((e=K(e)).firestore!==t)throw new Xt(Jt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function xd(e){return vu(e=Cn(e,yu)),new bd(e,t=>vd(e,t))}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Ut=e}(lt),rt(new Q("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new yu(new nn(e.getProvider("auth-internal")),new an(s,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Xt(Jt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qr(e.options.projectId,t)}(s,r),s);return i=c({useFetchStreams:t},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),dt(Lt,Mt,e),dt(Lt,Mt,"esm2020")}();function Sd(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}dt("firebase","12.4.0","app");const _d=["providerId"],kd=["uid","auth","stsTokenManager"],Ed=["providerId","signInMethod"];function Td(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Cd=Td,Nd=new F("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Id=new ie("@firebase/auth");function Ad(e){if(Id.logLevel<=Z.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Id.error("Auth (".concat(lt,"): ").concat(e),...n)}}function Rd(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw jd(e,...n)}function Pd(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return jd(e,...n)}function Dd(e,t,n){const r=c(c({},Cd()),{},{[t]:n});return new F("auth","Firebase",r).create(t,{appName:e.name})}function Od(e){return Dd(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function jd(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Nd.create(e,...n)}function Ld(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw jd(t,...r)}}function Md(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Ad(t),new Error(t)}function Fd(e,t){e||Md(t)}function Ud(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Vd(){return"http:"===zd()||"https:"===zd()}function zd(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Bd(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Vd()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class qd{constructor(e,t){this.shortDelay=e,this.longDelay=t,Fd(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(D())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return Bd()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Hd(e,t){Fd(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Gd{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Md("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Md("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Md("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Wd={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Kd=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Qd=new qd(3e4,6e4);function Yd(e,t){return e.tenantId&&!t.tenantId?c(c({},t),{},{tenantId:e.tenantId}):t}async function Jd(e,t,n,r){return Xd(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=B(c({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode);const l=c({method:t,headers:a},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&C(e.emulatorConfig.host)&&(l.credentials="include"),Gd.fetch()(await Zd(e,e.config.apiHost,n,o),l)})}async function Xd(e,t,n){e._canInitEmulator=!1;const r=c(c({},Wd),t);try{const t=new th(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw nh(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw nh(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw nh(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw nh(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Dd(e,a,o);Rd(e,a)}}catch(i){if(i instanceof M)throw i;Rd(e,"network-request-failed",{message:String(i)})}}async function $d(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Jd(e,t,n,r,i);return"mfaPendingCredential"in s&&Rd(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function Zd(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r),s=e,o=s.config.emulator?Hd(e.config,i):"".concat(e.config.apiScheme,"://").concat(i);if(Kd.includes(n)&&(await s._persistenceManagerAvailable,"COOKIE"===s._getPersistenceType())){return s._getPersistence()._getFinalTarget(o).toString()}return o}function eh(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class th{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Pd(this.auth,"network-request-failed")),Qd.get())})}}function nh(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Pd(e,t,r);return i.customData._tokenResponse=n,i}function rh(e){return void 0!==e&&void 0!==e.enterprise}class ih{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return eh(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function sh(e,t){return Jd(e,"GET","/v2/recaptchaConfig",Yd(e,t))}async function oh(e,t){return Jd(e,"POST","/v1/accounts:lookup",t)}function ah(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function lh(e){return 1e3*Number(e)}function ch(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Ad("JWT malformed, contained fewer than 3 sections"),null;try{const e=b(n);return e?JSON.parse(e):(Ad("Failed to decode base64 JWT payload"),null)}catch(i){return Ad("Caught error parsing JWT payload as JSON",null===i||void 0===i?void 0:i.toString()),null}}function uh(e){const t=ch(e);return Ld(t,"internal-error"),Ld("undefined"!==typeof t.exp,"internal-error"),Ld("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function dh(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof M&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class hh{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{var t;this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class fh{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ah(this.lastLoginAt),this.creationTime=ah(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ph(e){var t;const n=e.auth,r=await e.getIdToken(),i=await dh(e,oh(n,{idToken:r}));Ld(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=null!==(t=s.providerUserInfo)&&void 0!==t&&t.length?mh(s.providerUserInfo):[],a=(l=e.providerData,c=o,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&s.passwordHash)&&!(null!==a&&void 0!==a&&a.length),h=!!u&&d,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new fh(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function mh(e){return e.map(e=>{let{providerId:t}=e,n=Sd(e,_d);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class gh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ld(e.idToken,"internal-error"),Ld("undefined"!==typeof e.idToken,"internal-error"),Ld("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):uh(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ld(0!==e.length,"internal-error");const t=uh(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Ld(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Xd(e,{},async()=>{const n=B({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=await Zd(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const a={method:"POST",headers:o,body:n};return e.emulatorConfig&&C(e.emulatorConfig.host)&&(a.credentials="include"),Gd.fetch()(s,a)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new gh;return n&&(Ld("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Ld("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Ld("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new gh,this.toJSON())}_performRefresh(){return Md("not implemented")}}function yh(e,t){Ld("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class vh{constructor(e){let{uid:t,auth:n,stsTokenManager:r}=e,i=Sd(e,kd);this.providerId="firebase",this.proactiveRefresh=new hh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new fh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await dh(this,this.stsTokenManager.getToken(this.auth,e));return Ld(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=K(e),r=await n.getIdToken(t),i=ch(r);Ld(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:ah(lh(i.auth_time)),issuedAtTime:ah(lh(i.iat)),expirationTime:ah(lh(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=K(e);await ph(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Ld(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>c({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new vh(c(c({},this),{},{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ld(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await ph(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(st(this.auth.app))return Promise.reject(Od(this.auth));const e=await this.getIdToken();return await dh(this,async function(e,t){return Jd(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return c(c({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>c({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{},{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,u;const d=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,f=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,p=null!==(s=t.photoURL)&&void 0!==s?s:void 0,m=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,y=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:b,emailVerified:w,isAnonymous:x,providerData:S,stsTokenManager:_}=t;Ld(b&&_,e,"internal-error");const k=gh.fromJSON(this.name,_);Ld("string"===typeof b,e,"internal-error"),yh(d,e.name),yh(h,e.name),Ld("boolean"===typeof w,e,"internal-error"),Ld("boolean"===typeof x,e,"internal-error"),yh(f,e.name),yh(p,e.name),yh(m,e.name),yh(g,e.name),yh(y,e.name),yh(v,e.name);const E=new vh({uid:b,auth:e,email:h,emailVerified:w,displayName:d,isAnonymous:x,photoURL:p,phoneNumber:f,tenantId:m,stsTokenManager:k,createdAt:y,lastLoginAt:v});return S&&Array.isArray(S)&&(E.providerData=S.map(e=>c({},e))),g&&(E._redirectEventId=g),E}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new gh;r.updateFromServerResponse(t);const i=new vh({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await ph(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Ld(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?mh(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length),o=new gh;o.updateFromIdToken(n);const a=new vh({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new fh(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length)};return Object.assign(a,l),a}}const bh=new Map;function wh(e){Fd(e instanceof Function,"Expected a class definition");let t=bh.get(e);return t?(Fd(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,bh.set(e,t),t)}class xh{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}xh.type="NONE";const Sh=xh;function _h(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class kh{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=_h(this.userKey,r.apiKey,i),this.fullPersistenceKey=_h("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await oh(this.auth,{idToken:e}).catch(()=>{});return t?vh._fromGetAccountInfoResponse(this.auth,t,e):null}return vh._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new kh(wh(Sh),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||wh(Sh);const s=_h(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){let n;if("string"===typeof t){const r=await oh(e,{idToken:t}).catch(()=>{});if(!r)break;n=await vh._fromGetAccountInfoResponse(e,r,t)}else n=vh._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(l){}const a=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(t){}})),new kh(i,e,n)):new kh(i,e,n)}}function Eh(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Ih(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Th(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Rh(t))return"Blackberry";if(Ph(t))return"Webos";if(Ch(t))return"Safari";if((t.includes("chrome/")||Nh(t))&&!t.includes("edge/"))return"Chrome";if(Ah(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Th(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D();return/firefox\//i.test(e)}function Ch(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:D()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Nh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D();return/crios\//i.test(e)}function Ih(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D();return/iemobile/i.test(e)}function Ah(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D();return/android/i.test(e)}function Rh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D();return/blackberry/i.test(e)}function Ph(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D();return/webos/i.test(e)}function Dh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Oh(){return function(){const e=D();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function jh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D();return Dh(e)||Ah(e)||Ph(e)||Rh(e)||/windows phone/i.test(e)||Ih(e)}function Lh(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Eh(D());break;case"Worker":t="".concat(Eh(D()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(lt,"/").concat(r)}class Mh{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(i){r(i)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class Fh{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(n=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==n?n:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Uh{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zh(this),this.idTokenSubscription=new zh(this),this.beforeStateQueue=new Mh(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Nd,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=wh(t)),this._initializationPromise=this.queue(async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await kh.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null!==(r=this._popupRedirectResolver)&&void 0!==r&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(s){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await oh(this,{idToken:e}),n=await vh._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(st(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){var i,s;await this.getOrInitRedirectPersistenceManager();const t=null===(i=this.redirectUser)||void 0===i?void 0:i._redirectEventId,o=null===(s=n)||void 0===s?void 0:s._redirectEventId,a=await this.tryRedirectSignIn(e);t&&t!==o||null===a||void 0===a||!a.user||(n=a.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(o){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Ld(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ph(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(st(this.app))return Promise.reject(Od(this));const t=e?K(e):null;return t&&Ld(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Ld(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return st(this.app)?Promise.reject(Od(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return st(this.app)?Promise.reject(Od(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(wh(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Jd(e,"GET","/v2/passwordPolicy",Yd(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Fh(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new F("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Jd(e,"POST","/v2/accounts:revokeToken",Yd(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&wh(e)||this._popupRedirectResolver;Ld(t,this,"argument-error"),this.redirectPersistenceManager=await kh.create(this,[wh(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ld(o,this,"internal-error"),o.then(()=>{s||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ld(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Lh(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(st(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return null!==t&&void 0!==t&&t.error&&function(e){if(Id.logLevel<=Z.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Id.warn("Auth (".concat(lt,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Vh(e){return K(e)}class zh{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new G(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return Ld(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Bh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function qh(e){return Bh.loadJS(e)}function Hh(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Gh{constructor(){this.enterprise=new Wh}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Wh{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Kh="NO_RECAPTCHA";class Qh{constructor(e){this.type="recaptcha-enterprise",this.auth=Vh(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;rh(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Kh)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Gh).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{sh(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new ih(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&rh(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Bh.recaptchaEnterpriseScript;0!==t.length&&(t+=i),qh(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Yh(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=new Qh(e);let o;if(i)o=Kh;else try{o=await s.verify(n)}catch(l){o=await s.verify(n,!0)}const a=c({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in a){const e=a.phoneEnrollmentInfo.phoneNumber,t=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const e=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Jh(e,t,n,r,i){if("EMAIL_PASSWORD_PROVIDER"===i){var s;if(null!==(s=e._getRecaptchaConfig())&&void 0!==s&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Yh(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await Yh(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}if("PHONE_PROVIDER"===i){var o;if(null!==(o=e._getRecaptchaConfig())&&void 0!==o&&o.isProviderEnabled("PHONE_PROVIDER")){const i=await Yh(e,t,n);return r(e,i).catch(async i=>{var s;if("AUDIT"===(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))&&(i.code==="auth/".concat("missing-recaptcha-token")||i.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const i=await Yh(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}{const i=await Yh(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function Xh(e){const t=Vh(e),n=await sh(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new ih(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new Qh(t).verify()}}function $h(e,t,n){const r=Vh(e);Ld(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!(null===n||void 0===n||!n.disableWarnings),s=Zh(t),{host:o,port:a}=function(e){const t=Zh(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:ef(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:ef(t)}}}(t),l=null===a?"":":".concat(a),c={url:"".concat(s,"//").concat(o).concat(l,"/")},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return Ld(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void Ld(V(c,r.config.emulator)&&V(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,C(o)?(N("".concat(s,"//").concat(o).concat(l)),P("Auth",!0)):i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Zh(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ef(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class tf{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Md("not implemented")}_getIdTokenResponse(e){return Md("not implemented")}_linkToIdToken(e,t){return Md("not implemented")}_getReauthenticationResolver(e){return Md("not implemented")}}async function nf(e,t){return Jd(e,"POST","/v1/accounts:signUp",t)}async function rf(e,t){return $d(e,"POST","/v1/accounts:signInWithPassword",Yd(e,t))}class sf extends tf{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new sf(e,t,"password")}static _fromEmailAndCode(e,t){return new sf(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(null!==t&&void 0!==t&&t.email&&null!==t&&void 0!==t&&t.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Jh(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",rf,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return $d(e,"POST","/v1/accounts:signInWithEmailLink",Yd(e,t))}(e,{email:this._email,oobCode:this._password});default:Rd(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Jh(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",nf,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return $d(e,"POST","/v1/accounts:signInWithEmailLink",Yd(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Rd(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function of(e,t){return $d(e,"POST","/v1/accounts:signInWithIdp",Yd(e,t))}class af extends tf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new af(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Rd("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Sd(t,Ed);if(!n||!r)return null;const s=new af(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return of(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,of(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,of(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=B(t)}return e}}async function lf(e,t){return Jd(e,"POST","/v1/accounts:sendVerificationCode",Yd(e,t))}const cf={USER_NOT_FOUND:"user-not-found"};class uf extends tf{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new uf({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new uf({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return $d(e,"POST","/v1/accounts:signInWithPhoneNumber",Yd(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await $d(e,"POST","/v1/accounts:signInWithPhoneNumber",Yd(e,t));if(n.temporaryProof)throw nh(e,"account-exists-with-different-credential",n);return n}(e,c({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return $d(e,"POST","/v1/accounts:signInWithPhoneNumber",Yd(e,c(c({},t),{},{operation:"REAUTH"})),cf)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new uf({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class df{constructor(e){var t,n,r,i,s,o;const a=q(H(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Ld(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.lang)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=q(H(e)).link,n=t?q(H(t)).deep_link_id:null,r=q(H(e)).deep_link_id;return(r?q(H(r)).link:null)||r||n||t||e}(e);try{return new df(t)}catch(n){return null}}}class hf{constructor(){this.providerId=hf.PROVIDER_ID}static credential(e,t){return sf._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=df.parseLink(t);return Ld(n,"argument-error"),sf._fromEmailAndCode(e,n.code,n.tenantId)}}hf.PROVIDER_ID="password",hf.EMAIL_PASSWORD_SIGN_IN_METHOD="password",hf.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class ff{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class pf extends ff{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class mf extends pf{constructor(){super("facebook.com")}static credential(e){return af._fromParams({providerId:mf.PROVIDER_ID,signInMethod:mf.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mf.credentialFromTaggedObject(e)}static credentialFromError(e){return mf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return mf.credential(t.oauthAccessToken)}catch(n){return null}}}mf.FACEBOOK_SIGN_IN_METHOD="facebook.com",mf.PROVIDER_ID="facebook.com";class gf extends pf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return af._fromParams({providerId:gf.PROVIDER_ID,signInMethod:gf.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return gf.credentialFromTaggedObject(e)}static credentialFromError(e){return gf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return gf.credential(n,r)}catch(i){return null}}}gf.GOOGLE_SIGN_IN_METHOD="google.com",gf.PROVIDER_ID="google.com";class yf extends pf{constructor(){super("github.com")}static credential(e){return af._fromParams({providerId:yf.PROVIDER_ID,signInMethod:yf.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yf.credentialFromTaggedObject(e)}static credentialFromError(e){return yf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return yf.credential(t.oauthAccessToken)}catch(n){return null}}}yf.GITHUB_SIGN_IN_METHOD="github.com",yf.PROVIDER_ID="github.com";class vf extends pf{constructor(){super("twitter.com")}static credential(e,t){return af._fromParams({providerId:vf.PROVIDER_ID,signInMethod:vf.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return vf.credentialFromTaggedObject(e)}static credentialFromError(e){return vf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return vf.credential(n,r)}catch(i){return null}}}vf.TWITTER_SIGN_IN_METHOD="twitter.com",vf.PROVIDER_ID="twitter.com";class bf{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await vh._fromIdTokenResponse(e,n,r),s=wf(n);return new bf({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=wf(n);return new bf({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function wf(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class xf extends M{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,xf.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new xf(e,t,n,r)}}function Sf(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw xf._fromErrorAndOperation(e,n,t,r);throw n})}async function _f(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await dh(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return bf._forOperation(e,"link",r)}async function kf(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(st(r.app))return Promise.reject(Od(r));const i="reauthenticate";try{const s=await dh(e,Sf(r,i,t,e),n);Ld(s.idToken,r,"internal-error");const o=ch(s.idToken);Ld(o,r,"internal-error");const{sub:a}=o;return Ld(e.uid===a,r,"user-mismatch"),bf._forOperation(e,i,s)}catch(s){throw(null===s||void 0===s?void 0:s.code)==="auth/".concat("user-not-found")&&Rd(r,"user-mismatch"),s}}async function Ef(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(st(e.app))return Promise.reject(Od(e));const r="signIn",i=await Sf(e,r,t),s=await bf._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function Tf(e,t){return Jd(e,"POST","/v2/accounts/mfaEnrollment:start",Yd(e,t))}new WeakMap;const Cf="__sak";class Nf{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Cf,"1"),this.storage.removeItem(Cf),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class If extends Nf{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=jh(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Oh()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}If.type="LOCAL";const Af=If;function Rf(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp("".concat(r,"=([^;]+)"));return null!==(t=null===(n=document.cookie.match(i))||void 0===n?void 0:n[1])&&void 0!==t?t:null}function Pf(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class Df{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=Pf(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return Rf(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=Pf(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=Pf(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=Rf(n);const i=setInterval(()=>{const e=Rf(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}Df.type="COOKIE";class Of extends Nf{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Of.type="SESSION";const jf=Of;class Lf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Lf(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(null===s||void 0===s||!s.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map(async e=>e(t.origin,i)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Mf(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Lf.receivers=[];class Ff{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((o,a)=>{const l=Mf("",20);r.port1.start();const c=setTimeout(()=>{a(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function Uf(){return window}function Vf(){return"undefined"!==typeof Uf().WorkerGlobalScope&&"function"===typeof Uf().importScripts}const zf="firebaseLocalStorageDb",Bf="firebaseLocalStorage",qf="fbase_key";class Hf{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Gf(e,t){return e.transaction([Bf],t?"readwrite":"readonly").objectStore(Bf)}function Wf(){const e=indexedDB.open(zf,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Bf,{keyPath:qf})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Bf)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(zf);return new Hf(e).toPromise()}(),t(await Wf()))})})}async function Kf(e,t,n){const r=Gf(e,!0).put({[qf]:t,value:n});return new Hf(r).toPromise()}function Qf(e,t){const n=Gf(e,!0).delete(t);return new Hf(n).toPromise()}class Yf{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Wf()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Vf()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Lf._getInstance(Vf()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){var e;if(null===(e=navigator)||void 0===e||!e.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new Ff(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&null!==(e=n[0])&&void 0!==e&&e.fulfilled&&null!==(t=n[0])&&void 0!==t&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=navigator)||void 0===e||null===(e=e.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Wf();return await Kf(e,Cf,"1"),await Qf(e,Cf),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Kf(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Gf(e,!1).get(t),r=await new Hf(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Qf(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Gf(e,!1).getAll();return new Hf(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Yf.type="LOCAL";const Jf=Yf;function Xf(e,t){return Jd(e,"POST","/v2/accounts/mfaSignIn:start",Yd(e,t))}Hh("rcb"),new qd(3e4,6e4);const $f="recaptcha";async function Zf(e,t,n){if(!e._getRecaptchaConfig())try{await Xh(e)}catch(i){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){Ld("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=Jh(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Kh){Ld((null===n||void 0===n?void 0:n.type)===$f,e,"argument-error");return Tf(e,await ep(e,t,n))}return Tf(e,t)},"PHONE_PROVIDER");return(await s.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{var r;Ld("signin"===t.type,e,"internal-error");const s=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;Ld(s,e,"missing-multi-factor-info");const o={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},a=Jh(e,o,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Kh){Ld((null===n||void 0===n?void 0:n.type)===$f,e,"argument-error");return Xf(e,await ep(e,t,n))}return Xf(e,t)},"PHONE_PROVIDER");return(await a.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=Jh(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===Kh){Ld((null===n||void 0===n?void 0:n.type)===$f,e,"argument-error");return lf(e,await ep(e,t,n))}return lf(e,t)},"PHONE_PROVIDER");return(await r.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function ep(e,t,n){Ld(n.type===$f,e,"argument-error");const r=await n.verify();Ld("string"===typeof r,e,"argument-error");const i=c({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,s=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:s}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class tp{constructor(e){this.providerId=tp.PROVIDER_ID,this.auth=Vh(e)}verifyPhoneNumber(e,t){return Zf(this.auth,e,K(t))}static credential(e,t){return uf._fromVerification(e,t)}static credentialFromResult(e){const t=e;return tp.credentialFromTaggedObject(t)}static credentialFromError(e){return tp.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?uf._fromTokenResponse(n,r):null}}function np(e,t){return t?wh(t):(Ld(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}tp.PROVIDER_ID="phone",tp.PHONE_SIGN_IN_METHOD="phone";class rp extends tf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return of(e,this._buildIdpRequest())}_linkToIdToken(e,t){return of(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return of(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ip(e){return Ef(e.auth,new rp(e),e.bypassAuthState)}function sp(e){const{auth:t,user:n}=e;return Ld(n,t,"internal-error"),kf(n,new rp(e),e.bypassAuthState)}async function op(e){const{auth:t,user:n}=e;return Ld(n,t,"internal-error"),_f(n,new rp(e),e.bypassAuthState)}class ap{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ip;case"linkViaPopup":case"linkViaRedirect":return op;case"reauthViaPopup":case"reauthViaRedirect":return sp;default:Rd(this.auth,"internal-error")}}resolve(e){Fd(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Fd(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const lp=new qd(2e3,1e4);class cp extends ap{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,cp.currentPopupAction&&cp.currentPopupAction.cancel(),cp.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ld(e,this.auth,"internal-error"),e}async onExecution(){Fd(1===this.filter.length,"Popup operations only handle one event");const e=Mf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Pd(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Pd(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,cp.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t;null!==(t=this.authWindow)&&void 0!==t&&null!==(t=t.window)&&void 0!==t&&t.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Pd(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,lp.get())};e()}}cp.currentPopupAction=null;const up=new Map;class dp extends ap{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=up.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=pp(t),r=fp(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}up.set(this.auth._key(),e)}return this.bypassAuthState||up.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function hp(e,t){up.set(e._key(),t)}function fp(e){return wh(e._redirectPersistence)}function pp(e){return _h("pendingRedirect",e.config.apiKey,e.name)}async function mp(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(st(e.app))return Promise.reject(Od(e));const r=Vh(e),i=np(r,t),s=new dp(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class gp{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vp(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!vp(e)){var n;const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Pd(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(yp(e))}saveEventToCache(e){this.cachedEventUids.add(yp(e)),this.lastProcessedEventTime=Date.now()}}function yp(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function vp(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const bp=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,wp=/^https?/;async function xp(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Jd(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Sp(r))return}catch(n){}Rd(e,"unauthorized-domain")}function Sp(e){const t=Ud(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!wp.test(n))return!1;if(bp.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const _p=new qd(3e4,6e4);function kp(){const e=Uf().___jsl;if(null!==e&&void 0!==e&&e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Ep(e){return new Promise((t,n)=>{var r,i;function s(){kp(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{kp(),n(Pd(e,"network-request-failed"))},timeout:_p.get()})}if(null!==(r=Uf().gapi)&&void 0!==r&&null!==(r=r.iframes)&&void 0!==r&&r.Iframe)t(gapi.iframes.getContext());else{if(null===(i=Uf().gapi)||void 0===i||!i.load){const t=Hh("iframefcb");return Uf()[t]=()=>{gapi.load?s():n(Pd(e,"network-request-failed"))},qh("".concat(Bh.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}s()}}).catch(e=>{throw Tp=null,e})}let Tp=null;const Cp=new qd(5e3,15e3),Np={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ip=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ap(e){const t=e.config;Ld(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Hd(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:lt},i=Ip.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(B(r).slice(1))}async function Rp(e){const t=await function(e){return Tp=Tp||Ep(e),Tp}(e),n=Uf().gapi;return Ld(n,e,"internal-error"),t.open({where:document.body,url:Ap(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Np,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Pd(e,"network-request-failed"),s=Uf().setTimeout(()=>{r(i)},Cp.get());function o(){Uf().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{r(i)})}))}const Pp={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Dp{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Op(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=c(c({},Pp),{},{width:r.toString(),height:i.toString(),top:s,left:o}),u=D().toLowerCase();n&&(a=Nh(u)?"_blank":n),Th(u)&&(t=t||"http://localhost",l.scrollbars="yes");const d=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return Dh(arguments.length>0&&void 0!==arguments[0]?arguments[0]:D())&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(u)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new Dp(null);const h=window.open(t||"",a,d);Ld(h,e,"popup-blocked");try{h.focus()}catch(f){}return new Dp(h)}const jp="__/auth/handler",Lp="emulator/auth/handler",Mp=encodeURIComponent("fac");async function Fp(e,t,n,r,i,s){Ld(e.config.authDomain,e,"auth-domain-config-required"),Ld(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:lt,eventId:i};if(t instanceof ff){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof pf){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Mp,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(jp);return Hd(t,Lp)}(e),"?").concat(B(a).slice(1)).concat(c)}const Up="webStorageSupport";const Vp=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jf,this._completeRedirectFn=mp,this._overrideRedirectResult=hp}async _openPopup(e,t,n,r){var i;Fd(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Op(e,await Fp(e,t,n,Ud(),r),Mf())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Uf().location.href=e}(await Fp(e,t,n,Ud(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Fd(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Rp(e),n=new gp(e);return t.register("authEvent",t=>{Ld(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Up,{type:Up},n=>{var r;const i=null===n||void 0===n||null===(r=n[0])||void 0===r?void 0:r[Up];void 0!==i&&t(!!i),Rd(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=xp(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return jh()||Ch()||Dh()}};var zp="@firebase/auth",Bp="1.11.0";class qp{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ld(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Hp=E("authIdTokenMaxAge")||300;let Gp=null;var Wp;Bh={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Pd("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Wp="Browser",rt(new Q("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ld(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:Wp,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Lh(Wp)},c=new Uh(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(wh);null!==t&&void 0!==t&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),rt(new Q("auth-internal",e=>(e=>new qp(e))(Vh(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),dt(zp,Bp,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Wp)),dt(zp,Bp,"esm2020");const Kp="firebasestorage.googleapis.com",Qp="storageBucket";class Yp extends M{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super($p(e),"Firebase Storage: ".concat(t," (").concat($p(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Yp.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return $p(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var Jp,Xp;function $p(e){return"storage/"+e}function Zp(){return new Yp(Jp.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function em(){return new Yp(Jp.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function tm(){return new Yp(Jp.CANCELED,"User canceled the upload/download.")}function nm(){return new Yp(Jp.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function rm(e){return new Yp(Jp.INVALID_ARGUMENT,e)}function im(){return new Yp(Jp.APP_DELETED,"The Firebase app was deleted.")}function sm(e,t){return new Yp(Jp.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function om(e){throw new Yp(Jp.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Jp||(Jp={}));class am{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=am.makeFromUrl(e,t)}catch(i){return new am(e,"")}if(""===n.path)return n;throw r=e,new Yp(Jp.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(o,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://".concat(t===Kp?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:s}];for(let l=0;l<a.length;l++){const t=a[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new am(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new Yp(Jp.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class lm{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function cm(e){return"string"===typeof e||e instanceof String}function um(e){return dm()&&e instanceof Blob}function dm(){return"undefined"!==typeof Blob}function hm(e,t,n,r){if(r<t)throw rm("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw rm("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function fm(e,t,n){let r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function pm(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function mm(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Xp||(Xp={}));class gm{constructor(e,t,n,r,i,s,o,a,l,c,u){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],h=arguments.length>12&&void 0!==arguments[12]&&arguments[12];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.isUsingEmulator=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new ym(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===Xp.NO_ERROR,i=n.getStatus();if(!t||mm(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===Xp.ABORT;return void e(!1,new ym(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new ym(s,n))})},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(s){r(s)}else if(null!==i){const e=Zp();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?im():tm())}else{r(em())}};this.canceled_?t(0,new ym(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return 2===a}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function d(t){i=setTimeout(()=>{i=null,e(f,l())},t)}function h(){s&&clearTimeout(s)}function f(e){if(c)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void u.call(null,e,...n);if(l()||o)return h(),void u.call(null,e,...n);let s;r<64&&(r*=2),1===a?(a=2,s=0):s=1e3*(r+Math.random()),d(s)}let p=!1;function m(e){p||(p=!0,h(),c||(null!==i?(e||(a=2),clearTimeout(i),d(0)):e||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class ym{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function vm(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function bm(){const e=vm();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(dm())return new Blob(n);throw new Yp(Jp.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function wm(e){if("undefined"===typeof atob)throw t="base-64",new Yp(Jp.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const xm="raw",Sm="base64",_m="base64url",km="data_url";class Em{constructor(e,t){this.data=e,this.contentType=t||null}}function Tm(e,t){switch(e){case xm:return new Em(Cm(t));case Sm:case _m:return new Em(Nm(e,t));case km:return new Em(function(e){const t=new Im(e);return t.base64?Nm(Sm,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(n){throw sm(km,"Malformed data URL.")}return Cm(t)}(t.rest)}(t),new Im(t).contentType)}throw Zp()}function Cm(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function Nm(e,t){switch(e){case Sm:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw sm(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case _m:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw sm(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=wm(t)}catch(i){if(i.message.includes("polyfill"))throw i;throw sm(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class Im{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw sm(km,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class Am{constructor(e,t){let n=0,r="";um(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(um(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new Am(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new Am(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(dm()){const e=t.map(e=>e instanceof Am?e.data_:e);return new Am(bm.apply(null,e))}{const e=t.map(e=>cm(e)?Tm(xm,e).data:e.data_);let n=0;e.forEach(e=>{n+=e.byteLength});const r=new Uint8Array(n);let i=0;return e.forEach(e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]}),new Am(r,!0)}}uploadData(){return this.data_}}function Rm(e){let t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function Pm(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Dm(e,t){return t}class Om{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||Dm}}let jm=null;function Lm(){if(jm)return jm;const e=[];e.push(new Om("bucket")),e.push(new Om("generation")),e.push(new Om("metageneration")),e.push(new Om("name","fullPath",!0));const t=new Om("name");t.xform=function(e,t){return function(e){return!cm(e)||e.length<2?e:Pm(e)}(t)},e.push(t);const n=new Om("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Om("timeCreated")),e.push(new Om("updated")),e.push(new Om("md5Hash",null,!0)),e.push(new Om("cacheControl",null,!0)),e.push(new Om("contentDisposition",null,!0)),e.push(new Om("contentEncoding",null,!0)),e.push(new Om("contentLanguage",null,!0)),e.push(new Om("contentType",null,!0)),e.push(new Om("metadata","customMetadata",!0)),jm=e,jm}function Mm(e,t,n){const r={type:"file"},i=n.length;for(let s=0;s<i;s++){const e=n[s];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new am(n,r);return t._makeStorageReference(i)}})}(r,e),r}function Fm(e,t,n){const r=Rm(t);if(null===r)return null;return Mm(e,r,n)}function Um(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class Vm{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function zm(e){if(!e)throw Zp()}function Bm(e,t){return function(n,r){const i=Fm(e,r,t);return zm(null!==i),i}}function qm(e,t){return function(n,r){const i=Fm(e,r,t);return zm(null!==i),function(e,t,n,r){const i=Rm(t);if(null===i)return null;if(!cm(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(t=>{const i=e.bucket,s=e.fullPath;return fm("/b/"+o(i)+"/o/"+o(s),n,r)+pm({alt:"media",token:t})})[0]}(i,r,e.host,e._protocol)}}function Hm(e){return function(t,n){let r;var i,s;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new Yp(Jp.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new Yp(Jp.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(s=e.bucket,r=new Yp(Jp.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new Yp(Jp.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function Gm(e){const t=Hm(e);return function(n,r){let i=t(n,r);var s;return 404===n.getStatus()&&(s=e.path,i=new Yp(Jp.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function Wm(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function Km(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+a;const l=Wm(t,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Um(l,n)+"\r\n--"+a+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+a+"--",d=Am.getBlob(c,r,u);if(null===d)throw nm();const h={name:l.fullPath},f=fm(s,e.host,e._protocol),p=e.maxUploadRetryTime,m=new Vm(f,"POST",Bm(e,n),p);return m.urlParams=h,m.headers=o,m.body=d.uploadData(),m.errorHandler=Hm(t),m}class Qm{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Xp.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Xp.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Xp.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,r,i){if(this.sent_)throw om("cannot .send() more than once");if(C(e)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw om("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw om("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw om("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw om("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class Ym extends Qm{initXhr(){this.xhr_.responseType="text"}}function Jm(){return new Ym}class Xm{constructor(e,t){this._service=e,this._location=t instanceof am?t:am.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Xm(e,t)}get root(){const e=new am(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Pm(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new am(this._location.bucket,e);return new Xm(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new Yp(Jp.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function $m(e,t,n){e._throwIfRoot("uploadBytes");const r=Km(e.storage,e._location,Lm(),new Am(t,!0),n);return e.storage.makeRequestWithTokens(r,Jm).then(t=>({metadata:t,ref:e}))}function Zm(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=fm(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new Vm(r,"GET",qm(e,n),i);return s.errorHandler=Gm(t),s}(e.storage,e._location,Lm());return e.storage.makeRequestWithTokens(t,Jm).then(e=>{if(null===e)throw new Yp(Jp.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e})}function eg(e){e._throwIfRoot("deleteObject");const t=function(e,t){const n=fm(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new Vm(n,"DELETE",function(e,t){},r);return i.successCodes=[200,204],i.errorHandler=Gm(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,Jm)}function tg(e,t){const n=function(e,t){const n=t.split("/").filter(e=>e.length>0).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new am(e._location.bucket,n);return new Xm(e.storage,r)}function ng(e,t){if(e instanceof sg){const n=e;if(null==n._bucket)throw new Yp(Jp.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Qp+"' property when initializing the app?");const r=new Xm(n,n._bucket);return null!=t?ng(r,t):r}return void 0!==t?tg(e,t):e}function rg(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof sg)return new Xm(e,t);throw rm("To use ref(service, url), the first argument must be a Storage instance.")}return ng(e,t)}function ig(e,t){const n=null===t||void 0===t?void 0:t[Qp];return null==n?null:am.makeFromBucketSpec(n,e)}class sg{constructor(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._isUsingEmulator=s,this._bucket=null,this._host=Kp,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?am.makeFromBucketSpec(r,this._host):ig(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=am.makeFromBucketSpec(this._url,e):this._bucket=ig(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){hm("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){hm("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){if(st(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Xm(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new lm(im());{const s=function(e,t,n,r,i,s){let o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];const l=pm(e.urlParams),c=e.url+l,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(u,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,r),new gm(c,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o,a)}(e,this._appId,n,r,t,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const og="@firebase/storage",ag="0.14.0",lg="storage";function cg(e,t){return rg(e=K(e),t)}function ug(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new sg(r,i,s,n,lt)}rt(new Q(lg,ug,"PUBLIC").setMultipleInstances(!0)),dt(og,ag,""),dt(og,ag,"esm2020");const dg=ct({apiKey:"AIzaSyDo3BtLFoYt8Uv5Nbfls_J17H3Epqw7Kpg",authDomain:"molecular-genetic-curriculum.firebaseapp.com",projectId:"molecular-genetic-curriculum",storageBucket:"molecular-genetic-curriculum.firebasestorage.app",messagingSenderId:"1065657693983",appId:"1:1065657693983:web:369dcb74b3625ce8fda22a",measurementId:"G-R7LFX0ZBBL"}),hg=function(e,t){const n="object"==typeof e?e:ut(),r="string"==typeof e?e:t||Kr,i=it(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=_("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=Cn(e,lu);const i=C(t),s=e._getSettings(),o=c(c({},s),{},{emulatorOptions:e._getEmulatorOptions()}),a="".concat(t,":").concat(n);i&&(N("https://".concat(a)),P("Firestore",!0)),s.host!==su&&s.host!==a&&Ht("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=c(c({},s),{},{host:a,ssl:i,emulatorOptions:r});if(!V(l,o)&&(e._setSettings(l),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Ft.MOCK_USER;else{var u;t=I(r.mockUserToken,null===(u=e._app)||void 0===u?void 0:u.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new Xt(Jt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Ft(i)}e._authCredentials=new tn(new Zt(t,n))}}(i,...e)}return i}(dg),fg=(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut();const t=it(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=it(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(V(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Rd(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Vp,persistence:[Jf,Af,jf]}),r=E("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Hp)return;const r=null===t||void 0===t?void 0:t.token;Gp!==r&&(Gp=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){K(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){K(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var i;const s=S("auth");s&&$h(n,"http://".concat(s))}(dg),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut(),t=arguments.length>1?arguments[1]:void 0;e=K(e);const n=it(e,lg).getImmediate({identifier:t}),r=_("storage");return r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n);const i=C(t);i&&(N("https://".concat(e.host,"/b")),P("Storage",!0)),e._isUsingEmulator=!0,e._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(e._overrideAuthToken="string"===typeof s?s:I(s,e.app.options.projectId))}(e,t,n,r)}(n,...r),n}(dg)),pg="boardQuestions",mg=async()=>{try{const e=$u(hu(hg,pg),nd("createdAt","desc")),t=await pd(e),n=[];return t.forEach(e=>{n.push(c({id:e.id},e.data()))}),n}catch(e){throw console.error("Error fetching questions:",e),e}},gg=async e=>{try{const t=c(c({},e),{},{isCustom:!0,createdAt:Pn.now(),updatedAt:Pn.now()});return c({id:(await yd(hu(hg,pg),t)).id},t)}catch(t){throw console.error("Error adding question:",t),t}},yg=async(e,t)=>{try{const n=fu(hg,pg,e);return await function(e,t,n){e=Cn(e,uu);const r=Cn(e.firestore,yu),i=Ru(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=K(t))||t instanceof xu?ju(i,"updateDoc",e._key,t,n,a):Ou(i,"updateDoc",e._key,t),vd(r,[s.toMutation(e._key,zs.exists(!0))])}(n,c(c({},t),{},{updatedAt:Pn.now()})),c({id:e},t)}catch(n){throw console.error("Error updating question:",n),n}},vg=["id"],bg="schedule",wg="resources",xg="imageBank",Sg=async(e,t)=>{try{if(console.log("uploadImage called with:",{fileName:e.name,fileSize:e.size,metadata:t}),!fg)throw new Error("Firebase Storage is not initialized. Please check firebase.js configuration.");const n=Date.now(),r="".concat(n,"_").concat(e.name),i="".concat("images","/").concat(r);console.log("Creating storage reference:",i);const s=cg(fg,i);console.log("Storage ref created, uploading bytes..."),console.log("Uploading to Firebase Storage...");const o=await function(e,t,n){return $m(e=K(e),t,n)}(s,e);console.log("Upload successful, getting download URL...");const a=await function(e){return Zm(e=K(e))}(o.ref);console.log("Download URL obtained:",a);const l=c(c({},t),{},{fileName:e.name,fileSize:e.size,storagePath:o.ref.fullPath,downloadURL:a,uploadedAt:Pn.now()});console.log("Saving metadata to Firestore...",l);const u=await yd(hu(hg,xg),l);return console.log("Metadata saved to Firestore with ID:",u.id),c({id:u.id},l)}catch(n){throw console.error("Error uploading image - Details:",{code:n.code,message:n.message,stack:n.stack,name:n.name}),n}},_g=async(e,t)=>{try{if(await gd(fu(hg,xg,e)),t){const e=cg(fg,t);await function(e){return eg(e=K(e))}(e)}}catch(n){throw console.error("Error deleting image:",n),n}},kg="projects";var Eg=n(579);function Tg(e){let{schedule:t}=e;const n=u.filter(e=>"Core"===e.level).length,r=u.filter(e=>"Advanced Resident"===e.level).length,i=t.filter(e=>e.completed).length,s=t.filter(e=>!e.completed&&new Date(e.date)>new Date).length;return(0,Eg.jsxs)("div",{className:"space-y-8",children:[(0,Eg.jsxs)("div",{className:"text-center",children:[(0,Eg.jsx)("h2",{className:"text-4xl font-extrabold text-gray-900 mb-4",children:"Residency Curriculum Dashboard"}),(0,Eg.jsx)("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Track your progress through the 2-year Molecular Genetic Pathology curriculum"})]}),(0,Eg.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,Eg.jsx)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:(0,Eg.jsxs)("div",{className:"flex items-center",children:[(0,Eg.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,Eg.jsx)("span",{className:"text-blue-600 text-2xl",children:"\ud83d\udcda"})}),(0,Eg.jsxs)("div",{className:"ml-4",children:[(0,Eg.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Core Topics"}),(0,Eg.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:n})]})]})}),(0,Eg.jsx)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:(0,Eg.jsxs)("div",{className:"flex items-center",children:[(0,Eg.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,Eg.jsx)("span",{className:"text-purple-600 text-2xl",children:"\ud83c\udf93"})}),(0,Eg.jsxs)("div",{className:"ml-4",children:[(0,Eg.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Advanced Topics"}),(0,Eg.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:r})]})]})}),(0,Eg.jsx)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:(0,Eg.jsxs)("div",{className:"flex items-center",children:[(0,Eg.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,Eg.jsx)("span",{className:"text-green-600 text-2xl",children:"\u2705"})}),(0,Eg.jsxs)("div",{className:"ml-4",children:[(0,Eg.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Completed"}),(0,Eg.jsx)("p",{className:"text-2xl font-bold text-green-600",children:i})]})]})}),(0,Eg.jsx)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:(0,Eg.jsxs)("div",{className:"flex items-center",children:[(0,Eg.jsx)("div",{className:"p-2 bg-orange-100 rounded-lg",children:(0,Eg.jsx)("span",{className:"text-orange-600 text-2xl",children:"\ud83d\udcc5"})}),(0,Eg.jsxs)("div",{className:"ml-4",children:[(0,Eg.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Upcoming"}),(0,Eg.jsx)("p",{className:"text-2xl font-bold text-orange-600",children:s})]})]})})]}),(0,Eg.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,Eg.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Curriculum Progress"}),(0,Eg.jsx)("div",{className:"space-y-4",children:u.map(e=>{const n=t.filter(t=>t.topic===e.topic),r=n.filter(e=>e.completed),i=n.length>0?r.length/n.length*100:0;return(0,Eg.jsx)("div",{className:"flex items-center justify-between",children:(0,Eg.jsxs)("div",{className:"flex-1",children:[(0,Eg.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,Eg.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.topic}),(0,Eg.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat("Core"===e.level?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"),children:e.level})]}),(0,Eg.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,Eg.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(i,"%")}})})]})},e.id)})})]})]})}function Cg(e){let{topics:t,selectedLevel:n,setSelectedLevel:r,selectedTopic:i,setSelectedTopic:s,addToSchedule:o}=e;return(0,Eg.jsxs)("div",{className:"space-y-6",children:[(0,Eg.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Eg.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:"Curriculum Topics"}),(0,Eg.jsxs)("select",{value:n,onChange:e=>r(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,Eg.jsx)("option",{value:"All",children:"All Levels"}),(0,Eg.jsx)("option",{value:"Core",children:"Core Topics"}),(0,Eg.jsx)("option",{value:"Advanced Resident",children:"Advanced Resident"})]})]}),(0,Eg.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:t.map(e=>(0,Eg.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 hover:shadow-xl transition-shadow duration-300",children:[(0,Eg.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,Eg.jsxs)("div",{children:[(0,Eg.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:e.topic}),(0,Eg.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Eg.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat("Core"===e.level?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"),children:e.level}),(0,Eg.jsx)("span",{className:"text-sm text-gray-500",children:e.duration})]})]}),(0,Eg.jsxs)("button",{onClick:()=>s(i===e.id?null:e.id),className:"text-blue-600 hover:text-blue-700 font-semibold",children:[i===e.id?"Hide":"View"," Details"]})]}),i===e.id&&(0,Eg.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,Eg.jsxs)("div",{children:[(0,Eg.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Subtopics:"}),(0,Eg.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:e.subtopics.map((e,t)=>(0,Eg.jsx)("span",{className:"text-sm bg-gray-100 px-2 py-1 rounded",children:e},t))})]}),(0,Eg.jsxs)("div",{className:"flex space-x-4",children:[(0,Eg.jsx)("button",{onClick:()=>{const t=prompt("Enter date for this topic (YYYY-MM-DD):");t&&o(e,t)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Add to Schedule"}),(0,Eg.jsx)("button",{className:"border border-blue-600 text-blue-600 px-4 py-2 rounded-lg hover:bg-blue-50 transition-colors",children:"View Resources"})]})]})]},e.id))})]})}function Ng(e){var t,n;let{schedule:i,toggleScheduleItem:s,updateScheduleItemDate:o,removeScheduleItem:a,toggleSubtopic:l,addToSchedule:d}=e;const[h,f]=(0,r.useState)(null),[p,m]=(0,r.useState)(""),[g,y]=(0,r.useState)(!1),[v,b]=(0,r.useState)({topicId:(null===(t=u[0])||void 0===t?void 0:t.id)||1,subtopic:"",date:""}),w=e=>{f(e.id),m(e.date)},x=()=>{p&&h&&(o(h,p),f(null),m(""))},S=()=>{f(null),m("")},_=i.reduce((e,t)=>{const[n,r,i]=t.date.split("-").map(Number),s=new Date(n,r-1,i).toLocaleDateString("en-US",{month:"long",year:"numeric"});return e[s]||(e[s]=[]),e[s].push(t),e},{});return(0,Eg.jsxs)("div",{className:"space-y-6",children:[(0,Eg.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Eg.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:"Schedule"}),(0,Eg.jsx)("button",{type:"button",onClick:()=>y(e=>!e),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:g?"Cancel":"Add New Session"})]}),g&&(0,Eg.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 space-y-4",children:[(0,Eg.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:"New Session"}),(0,Eg.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Eg.jsxs)("div",{children:[(0,Eg.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Topic"}),(0,Eg.jsx)("select",{value:v.topicId,onChange:e=>{const t=parseInt(e.target.value,10);b(e=>c(c({},e),{},{topicId:t,subtopic:""}))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:u.map(e=>(0,Eg.jsx)("option",{value:e.id,children:e.topic},e.id))})]}),(0,Eg.jsxs)("div",{children:[(0,Eg.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date *"}),(0,Eg.jsx)("input",{type:"date",value:v.date,onChange:e=>b(t=>c(c({},t),{},{date:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,Eg.jsxs)("div",{children:[(0,Eg.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subtopic (optional)"}),(0,Eg.jsxs)("select",{value:v.subtopic,onChange:e=>b(t=>c(c({},t),{},{subtopic:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,Eg.jsx)("option",{value:"",children:"-- None --"}),null===(n=u.find(e=>e.id===v.topicId))||void 0===n?void 0:n.subtopics.map((e,t)=>(0,Eg.jsx)("option",{value:e,children:e},t))]})]}),(0,Eg.jsx)("div",{className:"flex justify-end space-x-3",children:(0,Eg.jsx)("button",{type:"button",onClick:()=>{var e;if(!v.date)return void alert("Please pick a date for the session.");const t=u.find(e=>e.id===v.topicId);t?(d(t,v.date,v.subtopic||null),b({topicId:(null===(e=u[0])||void 0===e?void 0:e.id)||1,subtopic:"",date:""}),y(!1)):alert("Please select a topic.")},className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Save Session"})})]}),0===Object.keys(_).length?(0,Eg.jsxs)("div",{className:"text-center py-12",children:[(0,Eg.jsx)("span",{className:"text-6xl text-gray-300",children:"\ud83d\udcc5"}),(0,Eg.jsx)("h3",{className:"text-xl font-semibold text-gray-500 mt-4",children:"No sessions scheduled"}),(0,Eg.jsx)("p",{className:"text-gray-400",children:"Add topics to your schedule from the Curriculum page"})]}):(0,Eg.jsx)("div",{className:"space-y-8",children:Object.entries(_).map(e=>{let[t,n]=e;return(0,Eg.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,Eg.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:t}),(0,Eg.jsx)("div",{className:"space-y-3",children:n.map(e=>{var t;const n=(e=>{const t=u.find(t=>t.topic===e);return t?t.subtopics:[]})(e.topic);return(0,Eg.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,Eg.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Eg.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Eg.jsx)("input",{type:"checkbox",checked:e.completed,onChange:()=>s(e.id),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"}),(0,Eg.jsxs)("div",{children:[(0,Eg.jsx)("h4",{className:"font-semibold text-gray-900",children:e.topic}),(0,Eg.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[h===e.id?(0,Eg.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Eg.jsx)("input",{type:"date",value:p,onChange:e=>m(e.target.value),className:"px-2 py-1 border border-gray-300 rounded text-sm"}),(0,Eg.jsx)("button",{onClick:x,className:"px-2 py-1 bg-green-600 text-white text-xs rounded hover:bg-green-700",children:"Save"}),(0,Eg.jsx)("button",{onClick:S,className:"px-2 py-1 bg-gray-600 text-white text-xs rounded hover:bg-gray-700",children:"Cancel"})]}):(0,Eg.jsx)("span",{className:"cursor-pointer hover:text-blue-600",onClick:()=>w(e),title:"Click to edit date",children:e.date}),(0,Eg.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat("Core"===e.level?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"),children:e.level}),(0,Eg.jsx)("span",{children:e.duration})]})]})]}),(0,Eg.jsxs)("div",{className:"flex space-x-2",children:[(0,Eg.jsx)("button",{onClick:()=>w(e),className:"text-blue-600 hover:text-blue-700 text-sm",children:"Edit Date"}),(0,Eg.jsx)("button",{onClick:()=>a(e.id),className:"text-red-600 hover:text-red-700 text-sm",children:"Remove"})]})]}),n.length>0&&(0,Eg.jsxs)("div",{className:"ml-9 mt-3",children:[(0,Eg.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Eg.jsx)("h5",{className:"text-sm font-medium text-gray-700",children:"Subtopics to discuss:"}),(0,Eg.jsxs)("span",{className:"text-xs text-gray-500",children:[(null===(t=e.completedSubtopics)||void 0===t?void 0:t.length)||0," / ",n.length," completed"]})]}),(0,Eg.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:n.map((t,n)=>{var r;const i=(null===(r=e.completedSubtopics)||void 0===r?void 0:r.includes(t))||!1;return(0,Eg.jsxs)("div",{className:"flex items-center space-x-2 text-xs px-2 py-1 rounded border transition-colors ".concat(i?"bg-green-50 border-green-200 text-green-800":"bg-white border-gray-200 text-gray-700 hover:bg-gray-50"),children:[(0,Eg.jsx)("input",{type:"checkbox",checked:i,onChange:()=>l(e.id,t),className:"w-3 h-3 text-green-600 rounded focus:ring-green-500"}),(0,Eg.jsx)("span",{className:i?"line-through":"",children:t})]},n)})})]})]},e.id)})})]},t)})})]})}function Ig(){var e;const[t,n]=(0,r.useState)(!1),[i,s]=(0,r.useState)(!1),[o,a]=(0,r.useState)(null),[l,h]=(0,r.useState)("resources"),[f,p]=(0,r.useState)(!1),[m,g]=(0,r.useState)(null),[y,v]=(0,r.useState)("All"),[b,w]=(0,r.useState)("All"),[x,S]=(0,r.useState)([]),[_,k]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let e=!0;return(async()=>{try{k(!0);const t=await(async()=>{try{const e=$u(hu(hg,xg),nd("uploadedAt","desc")),t=await pd(e),n=[];return t.forEach(e=>{var t,r,i;const s=e.data();n.push(c(c({id:e.id},s),{},{uploadedAt:(null===(t=s.uploadedAt)||void 0===t||null===(r=t.toDate)||void 0===r||null===(i=r.call(t))||void 0===i?void 0:i.toISOString())||s.uploadedAt}))}),n}catch(e){throw console.error("Error fetching images:",e),e}})();e&&(S(t),localStorage.setItem("imageBank",JSON.stringify(t)))}catch(t){if(console.error("Failed to load images from Firebase:",t),e){const e=localStorage.getItem("imageBank");e&&S(JSON.parse(e))}}finally{e&&k(!1)}})(),()=>{e=!1}},[]);const[E,T]=(0,r.useState)({file:null,preview:null,topic:1,subtopic:"",description:"",source:""}),[C,N]=(0,r.useState)({type:"book",title:"",author:"",publisher:"",edition:"",isbn:"",url:"",description:"",impactFactor:"",topics:[]}),[I,A]=(0,r.useState)(d);(0,r.useEffect)(()=>{let e=!0;return(async()=>{try{const t=await(async()=>{const e=await pd(hu(hg,wg)),t={books:[],journals:[],links:[]};return e.forEach(e=>{const n=e.data(),r=n.type||"book",i="journal"===r?"journals":"link"===r?"links":"books";t[i]=[...t[i],c({id:e.id},n)]}),t})(),n=t.books.length||t.journals.length||t.links.length;e&&n&&A({books:t.books,journals:t.journals,links:t.links})}catch(t){console.error("Failed to load resources from Firebase:",t)}})(),()=>{e=!1}},[]);const R=(e,t)=>{N({type:t,title:e.title||"",author:e.author||"",publisher:e.publisher||"",edition:e.edition||"",isbn:e.isbn||"",url:e.url||"",description:e.description||"",impactFactor:e.impactFactor||"",topics:(e.topics||[]).map(e=>e.toString())}),a({id:e.id,type:t}),n(!0)},P=async(e,t)=>{if(!window.confirm("Are you sure you want to delete this resource?"))return;const n="journal"===t?"journals":"link"===t?"links":"books";A(t=>c(c({},t),{},{[n]:t[n].filter(t=>t.id!==e)}));try{await(async e=>{await gd(fu(hg,wg,e))})(e)}catch(r){console.error("Failed to delete resource from Firebase:",r)}},D=()=>{if("All"===y){const e=new Set;return x.forEach(t=>{t.subtopic&&e.add(t.subtopic)}),Array.from(e).sort()}const e=u.find(e=>e.id===parseInt(y));if(e){const t=new Set(e.subtopics);return x.forEach(n=>{n.topic===e.id&&n.subtopic&&t.add(n.subtopic)}),Array.from(t).sort()}return[]};(0,r.useEffect)(()=>{if("All"===y)w("All");else{const e=D();"All"===b||e.includes(b)||w("All")}},[y,x]);const O=(()=>{let e=[...x];return"All"!==y&&(e=e.filter(e=>e.topic===parseInt(y))),"All"!==b&&(e=e.filter(e=>e.subtopic===b)),e})();return(0,Eg.jsxs)("div",{className:"space-y-8",children:[(0,Eg.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Eg.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:"Learning Resources"}),(0,Eg.jsxs)("div",{className:"flex space-x-2",children:["images"===l&&(0,Eg.jsx)("button",{onClick:()=>p(!f),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:f?"Cancel":"Upload Image"}),"resources"===l&&(0,Eg.jsx)("button",{onClick:()=>n(!t),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:t?"Cancel":"Add Resource"})]})]}),(0,Eg.jsx)("div",{className:"border-b border-gray-200",children:(0,Eg.jsxs)("nav",{className:"-mb-px flex space-x-8",children:[(0,Eg.jsx)("button",{onClick:()=>h("resources"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("resources"===l?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"\ud83d\udcda Resources"}),(0,Eg.jsxs)("button",{onClick:()=>h("images"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("images"===l?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:["\ud83d\uddbc\ufe0f Image Bank (",x.length,")"]})]})}),"images"===l&&(0,Eg.jsxs)(Eg.Fragment,{children:[f&&(0,Eg.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,Eg.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Upload Image"}),(0,Eg.jsxs)("div",{className:"space-y-4",children:[E.preview&&(0,Eg.jsx)("div",{className:"flex justify-center",children:(0,Eg.jsx)("img",{src:E.preview,alt:"Preview",className:"max-w-full max-h-64 rounded-lg border border-gray-300"})}),(0,Eg.jsxs)("div",{children:[(0,Eg.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Image *"}),(0,Eg.jsx)("input",{id:"image-upload-input",type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];if(t){if(!t.type.startsWith("image/"))return void alert("Please select an image file");if(t.size>5242880)return void alert("Image size must be less than 5MB");const e=new FileReader;e.onload=e=>{T(c(c({},E),{},{file:t,preview:e.target.result}))},e.readAsDataURL(t)}},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"}),(0,Eg.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Max file size: 5MB"})]}),(0,Eg.jsxs)("div",{children:[(0,Eg.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Topic *"}),(0,Eg.jsx)("select",{value:E.topic,onChange:e=>T(c(c({},E),{},{topic:parseInt(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:u.map(e=>(0,Eg.jsx)("option",{value:e.id,children:e.topic},e.id))})]}),(0,Eg.jsxs)("div",{children:[(0,Eg.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subtopic"}),(0,Eg.jsx)("input",{type:"text",value:E.subtopic,onChange:e=>T(c(c({},E),{},{subtopic:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"e.g., Hardy Weinberg Principle"})]}),(0,Eg.jsxs)("div",{children:[(0,Eg.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,Eg.jsx)("textarea",{value:E.description,onChange:e=>T(c(c({},E),{},{description:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",rows:3,placeholder:"Optional description of the image..."})]}),(0,Eg.jsxs)("div",{children:[(0,Eg.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Source"}),(0,Eg.jsx)("input",{type:"text",value:E.source,onChange:e=>T(c(c({},E),{},{source:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"e.g., Textbook name, Journal article, Website URL, etc."})]}),(0,Eg.jsx)("div",{className:"flex justify-end",children:(0,Eg.jsx)("button",{onClick:async()=>{if(E.file&&E.topic)try{s(!0),console.log("Starting image upload...",{file:E.file.name,topic:E.topic});const e={topic:E.topic,subtopic:E.subtopic||"",description:E.description||"",source:E.source||""};console.log("Uploading to Firebase Storage...");const t=await Sg(E.file,e);console.log("Upload successful:",t),S(e=>{const n=[...e,t];return localStorage.setItem("imageBank",JSON.stringify(n)),n}),T({file:null,preview:null,topic:1,subtopic:"",description:"",source:""}),p(!1);const n=document.getElementById("image-upload-input");n&&(n.value=""),alert("Image uploaded successfully!")}catch(e){console.error("Failed to upload image - Full error:",e),console.error("Error code:",e.code),console.error("Error message:",e.message),console.error("Error stack:",e.stack);let t="Failed to upload image.\n\n";"storage/unauthorized"===e.code||"storage/unauthorized"===e.code?(t+="Storage access denied. Please check Firebase Storage rules.\n",t+="Make sure Storage is enabled in Firebase Console."):"storage/canceled"===e.code?t+="Upload was canceled.":"storage/unknown"===e.code||"storage/invalid-argument"===e.code?(t+="Storage error. Please check:\n",t+="1. Firebase Storage is enabled\n",t+="2. Storage rules allow write access\n",t+="3. Error: ".concat(e.message)):e.message?(t+="Error: ".concat(e.message),(e.message.includes("permission")||e.message.includes("unauthorized"))&&(t+="\n\nPlease enable Firebase Storage in the console.")):t+="Unknown error. Check browser console for details.\nError code: ".concat(e.code||"N/A"),alert(t)}finally{s(!1)}else alert("Please select an image and topic")},className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-colors",children:i?"Uploading...":"Upload Image"})})]})]}),(0,Eg.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4",children:[(0,Eg.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Eg.jsxs)("div",{children:[(0,Eg.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Topic"}),(0,Eg.jsxs)("select",{value:y,onChange:e=>v(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,Eg.jsx)("option",{value:"All",children:"All Topics"}),u.map(e=>(0,Eg.jsx)("option",{value:e.id,children:e.topic},e.id))]})]}),(0,Eg.jsxs)("div",{children:[(0,Eg.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Subtopic"}),(0,Eg.jsxs)("select",{value:b,onChange:e=>w(e.target.value),disabled:"All"===y,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent ".concat("All"===y?"bg-gray-100 cursor-not-allowed":""),children:[(0,Eg.jsx)("option",{value:"All",children:"All Subtopics"}),D().map(e=>(0,Eg.jsx)("option",{value:e,children:e},e))]})]}),(0,Eg.jsx)("div",{className:"flex items-end",children:(0,Eg.jsx)("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg",children:(0,Eg.jsxs)("span",{className:"text-sm text-gray-700",children:["Showing ",(0,Eg.jsx)("span",{className:"font-semibold",children:O.length})," of"," ",(0,Eg.jsx)("span",{className:"font-semibold",children:x.length})," images"]})})})]}),("All"!==y||"All"!==b)&&(0,Eg.jsx)("div",{className:"mt-4 flex justify-end",children:(0,Eg.jsx)("button",{onClick:()=>{v("All"),w("All")},className:"px-4 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Clear Filters"})})]}),_?(0,Eg.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 text-center",children:(0,Eg.jsx)("p",{className:"text-blue-800",children:"Loading images..."})}):0===O.length?(0,Eg.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 text-center",children:(0,Eg.jsx)("p",{className:"text-yellow-800",children:0===x.length?'No images uploaded yet. Click "Upload Image" to get started.':"No images found matching the selected filters."})}):(0,Eg.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:O.map(e=>{var t;return(0,Eg.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow",children:[(0,Eg.jsxs)("div",{className:"aspect-square bg-gray-100 cursor-pointer relative group",onClick:()=>g(e),children:[(0,Eg.jsx)("img",{src:e.downloadURL||e.data,alt:e.description||e.fileName,className:"w-full h-full object-contain"}),(0,Eg.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-opacity flex items-center justify-center",children:(0,Eg.jsx)("span",{className:"text-white opacity-0 group-hover:opacity-100 text-sm font-medium",children:"Click to view full size"})})]}),(0,Eg.jsxs)("div",{className:"p-3",children:[(0,Eg.jsxs)("div",{className:"flex flex-wrap gap-1 mb-2",children:[(0,Eg.jsx)("span",{className:"px-2 py-1 bg-indigo-100 text-indigo-800 text-xs rounded-full",children:(null===(t=u.find(t=>t.id===e.topic))||void 0===t?void 0:t.topic)||"Topic ".concat(e.topic)}),e.subtopic&&(0,Eg.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded-full",children:e.subtopic})]}),e.description&&(0,Eg.jsx)("p",{className:"text-sm text-gray-700 mb-2 line-clamp-2",children:e.description}),e.source&&(0,Eg.jsxs)("p",{className:"text-xs text-blue-600 mb-2 font-medium",children:["Source: ",e.source]}),(0,Eg.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:e.fileName}),(0,Eg.jsx)("button",{onClick:t=>{t.stopPropagation(),(async e=>{if(window.confirm("Are you sure you want to delete this image?"))try{await _g(e.id,e.storagePath),S(t=>{const n=t.filter(t=>t.id!==e.id);return localStorage.setItem("imageBank",JSON.stringify(n)),n}),alert("Image deleted successfully!")}catch(t){console.error("Failed to delete image:",t),S(t=>{const n=t.filter(t=>t.id!==e.id);return localStorage.setItem("imageBank",JSON.stringify(n)),n}),alert("Image removed locally (Firebase delete may have failed).")}})(e)},className:"w-full px-3 py-1 text-sm bg-red-100 text-red-700 rounded hover:bg-red-200 transition-colors",children:"Delete"})]})]},e.id)})})]}),"resources"===l&&(0,Eg.jsxs)(Eg.Fragment,{children:[t&&(0,Eg.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,Eg.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:o?"Edit Resource":"Add New Resource"}),(0,Eg.jsxs)("div",{className:"space-y-4",children:[(0,Eg.jsxs)("div",{children:[(0,Eg.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Resource Type *"}),(0,Eg.jsxs)("select",{value:C.type,onChange:e=>N(c(c({},C),{},{type:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,Eg.jsx)("option",{value:"book",children:"Book"}),(0,Eg.jsx)("option",{value:"journal",children:"Journal"}),(0,Eg.jsx)("option",{value:"link",children:"Web Link"})]})]}),(0,Eg.jsxs)("div",{children:[(0,Eg.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),(0,Eg.jsx)("input",{type:"text",value:C.title,onChange:e=>N(c(c({},C),{},{title:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter resource title..."})]}),(0,Eg.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Eg.jsxs)("div",{children:[(0,Eg.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"book"===C.type?"Author":"journal"===C.type?"Publisher":"Description"}),(0,Eg.jsx)("input",{type:"text",value:C.author,onChange:e=>N(c(c({},C),{},{author:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"book"===C.type?"Author name":"journal"===C.type?"Publisher":"Brief description"})]}),"book"===C.type&&(0,Eg.jsxs)("div",{children:[(0,Eg.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Publisher"}),(0,Eg.jsx)("input",{type:"text",value:C.publisher,onChange:e=>N(c(c({},C),{},{publisher:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Publisher name"})]})]}),"book"===C.type&&(0,Eg.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Eg.jsxs)("div",{children:[(0,Eg.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Edition"}),(0,Eg.jsx)("input",{type:"text",value:C.edition,onChange:e=>N(c(c({},C),{},{edition:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., 3rd Edition"})]}),(0,Eg.jsxs)("div",{children:[(0,Eg.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ISBN"}),(0,Eg.jsx)("input",{type:"text",value:C.isbn,onChange:e=>N(c(c({},C),{},{isbn:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"ISBN number"})]})]}),"journal"===C.type&&(0,Eg.jsxs)("div",{children:[(0,Eg.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Impact Factor"}),(0,Eg.jsx)("input",{type:"text",value:C.impactFactor||"",onChange:e=>N(c(c({},C),{},{impactFactor:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., 4.1"})]}),("link"===C.type||"journal"===C.type)&&(0,Eg.jsxs)("div",{children:[(0,Eg.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL"}),(0,Eg.jsx)("input",{type:"url",value:C.url,onChange:e=>N(c(c({},C),{},{url:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://..."})]}),(0,Eg.jsxs)("div",{children:[(0,Eg.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Related Topics"}),(0,Eg.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:u.map(e=>(0,Eg.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,Eg.jsx)("input",{type:"checkbox",checked:C.topics.includes(e.id.toString()),onChange:()=>(e=>{const t=e.toString(),n=C.topics.includes(t)?C.topics.filter(e=>e!==t):[...C.topics,t];N(c(c({},C),{},{topics:n}))})(e.id),className:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500"}),(0,Eg.jsx)("span",{className:"text-sm text-gray-700",children:e.topic})]},e.id))})]}),(0,Eg.jsxs)("div",{className:"flex justify-end space-x-4 pt-4",children:[(0,Eg.jsx)("button",{onClick:()=>n(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,Eg.jsx)("button",{onClick:async()=>{if(!C.title.trim())return void alert("Please fill in the required fields");const e={type:C.type,title:C.title,author:C.author,publisher:C.publisher,edition:C.edition,isbn:C.isbn,url:C.url,description:C.description,impactFactor:"journal"===C.type?C.impactFactor:"",topics:C.topics.map(e=>parseInt(e,10))},t="journal"===C.type?"journals":"link"===C.type?"links":"books";let r=(null===o||void 0===o?void 0:o.id)||Date.now().toString(),i=c({id:r},e);try{s(!0),o?await(async(e,t)=>{await md(fu(hg,wg,e),t,{merge:!0})})(r,e):(i=await(async e=>c({id:(await yd(hu(hg,wg),e)).id},e))(e),r=i.id)}catch(l){console.error("Failed to add resource to Firebase:",l),alert(o?"Changes saved locally (cloud sync unavailable).":"Resource saved locally (cloud sync unavailable).")}finally{s(!1)}A(n=>{const i={books:n.books.filter(e=>e.id!==r),journals:n.journals.filter(e=>e.id!==r),links:n.links.filter(e=>e.id!==r)};return i[t]=[...i[t],c({id:r},e)],i}),N({type:"book",title:"",author:"",publisher:"",edition:"",isbn:"",url:"",description:"",impactFactor:"",topics:[]}),a(null),n(!1)},disabled:i,className:"px-6 py-2 rounded-lg transition-colors ".concat(i?"bg-blue-300 text-white cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"),children:i?"Saving\u2026":o?"Update Resource":"Add Resource"})]})]})]}),(0,Eg.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,Eg.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"\ud83d\udcda Textbooks"}),(0,Eg.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:I.books.map(e=>(0,Eg.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[(0,Eg.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:e.title}),(0,Eg.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.author}),(0,Eg.jsxs)("p",{className:"text-sm text-gray-500 mb-2",children:[e.publisher," - ",e.edition]}),(0,Eg.jsxs)("p",{className:"text-xs text-blue-600",children:["ISBN: ",e.isbn]}),(0,Eg.jsxs)("div",{className:"mt-4 flex space-x-2",children:[(0,Eg.jsx)("button",{onClick:()=>R(e,"book"),className:"px-3 py-1 text-sm bg-blue-100 text-blue-700 rounded hover:bg-blue-200",children:"Edit"}),(0,Eg.jsx)("button",{onClick:()=>P(e.id,"book"),className:"px-3 py-1 text-sm bg-red-100 text-red-700 rounded hover:bg-red-200",children:"Delete"})]})]},e.id))})]}),(0,Eg.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,Eg.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"\ud83d\udcd6 Journals"}),(0,Eg.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:I.journals.map(e=>(0,Eg.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[(0,Eg.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:e.title}),(0,Eg.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.publisher}),(0,Eg.jsxs)("p",{className:"text-sm text-green-600 mb-2",children:["Impact Factor: ",e.impactFactor]}),e.url&&(0,Eg.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:text-blue-800 underline",children:"Visit Journal \u2192"}),(0,Eg.jsxs)("div",{className:"mt-4 flex space-x-2",children:[(0,Eg.jsx)("button",{onClick:()=>R(e,"journal"),className:"px-3 py-1 text-sm bg-blue-100 text-blue-700 rounded hover:bg-blue-200",children:"Edit"}),(0,Eg.jsx)("button",{onClick:()=>P(e.id,"journal"),className:"px-3 py-1 text-sm bg-red-100 text-red-700 rounded hover:bg-red-200",children:"Delete"})]})]},e.id))})]}),(0,Eg.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,Eg.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"\ud83d\udd17 Useful Links"}),(0,Eg.jsx)("div",{className:"space-y-3",children:I.links.map(e=>(0,Eg.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[(0,Eg.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700 font-semibold",children:[e.title," \u2192"]}),(0,Eg.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description}),(0,Eg.jsxs)("div",{className:"mt-4 flex space-x-2",children:[(0,Eg.jsx)("button",{onClick:()=>R(e,"link"),className:"px-3 py-1 text-sm bg-blue-100 text-blue-700 rounded hover:bg-blue-200",children:"Edit"}),(0,Eg.jsx)("button",{onClick:()=>P(e.id,"link"),className:"px-3 py-1 text-sm bg-red-100 text-red-700 rounded hover:bg-red-200",children:"Delete"})]})]},e.id))})]})]}),m&&(0,Eg.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",onClick:()=>g(null),children:(0,Eg.jsxs)("div",{className:"bg-white rounded-lg max-w-4xl max-h-[90vh] overflow-auto relative",children:[(0,Eg.jsx)("button",{onClick:()=>g(null),className:"absolute top-4 right-4 text-gray-500 hover:text-gray-700 text-2xl font-bold z-10 bg-white rounded-full w-8 h-8 flex items-center justify-center shadow-lg",children:"\xd7"}),(0,Eg.jsx)("img",{src:m.downloadURL||m.data,alt:m.description||m.fileName,className:"w-full h-auto",onClick:e=>e.stopPropagation()}),(0,Eg.jsxs)("div",{className:"p-4",children:[(0,Eg.jsxs)("div",{className:"flex flex-wrap gap-2 mb-2",children:[(0,Eg.jsx)("span",{className:"px-2 py-1 bg-indigo-100 text-indigo-800 text-xs rounded-full",children:(null===(e=u.find(e=>e.id===m.topic))||void 0===e?void 0:e.topic)||"Topic ".concat(m.topic)}),m.subtopic&&(0,Eg.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded-full",children:m.subtopic})]}),m.description&&(0,Eg.jsx)("p",{className:"text-sm text-gray-700 mb-2",children:m.description}),m.source&&(0,Eg.jsxs)("p",{className:"text-sm text-blue-600 mb-2 font-medium",children:["Source: ",m.source]}),(0,Eg.jsx)("p",{className:"text-xs text-gray-500",children:m.fileName})]})]})})]})}function Ag(){const[e,t]=(0,r.useState)(!1),[n,i]=(0,r.useState)(!1),[s,o]=(0,r.useState)(null),[a,l]=(0,r.useState)({title:"",description:"",duration:"",topic:1,subtopic:"",deliverables:[""],dueDate:""}),[d,h]=(0,r.useState)(f);(0,r.useEffect)(()=>{let e=!0;return(async()=>{try{const t=await(async()=>(await pd(hu(hg,kg))).docs.map(e=>c({id:e.id},e.data())))();if(e&&t.length){const e=[...t].sort((e,t)=>new Date(e.dueDate)-new Date(t.dueDate));h(e)}}catch(t){console.error("Failed to load projects from Firebase:",t)}})(),()=>{e=!1}},[]);const p=async e=>{if(window.confirm("Are you sure you want to remove this project?")){h(t=>t.filter(t=>t.id!==e));try{await(async e=>{await gd(fu(hg,kg,e))})(e)}catch(t){console.error("Failed to delete project from Firebase:",t)}}};return(0,Eg.jsxs)("div",{className:"space-y-6",children:[(0,Eg.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Eg.jsxs)("div",{children:[(0,Eg.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:"Assigned Projects"}),(0,Eg.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[d.length," project",1!==d.length?"s":""," assigned"]})]}),(0,Eg.jsxs)("div",{className:"flex space-x-4",children:[(0,Eg.jsx)("button",{onClick:()=>t(!e),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:e?"Cancel":"Add New Project"}),d.length>0&&(0,Eg.jsx)("button",{onClick:async()=>{if(window.confirm("Are you sure you want to clear all projects? This action cannot be undone.")){h([]);try{await(async()=>{const e=await pd(hu(hg,kg)),t=xd(hg);e.forEach(e=>t.delete(e.ref)),await t.commit()})()}catch(e){console.error("Failed to clear projects from Firebase:",e)}}},className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"Clear All Projects"})]})]}),e&&(0,Eg.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,Eg.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:s?"Edit Project":"Add New Project"}),(0,Eg.jsxs)("div",{className:"space-y-4",children:[(0,Eg.jsxs)("div",{children:[(0,Eg.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Title *"}),(0,Eg.jsx)("input",{type:"text",value:a.title,onChange:e=>l(c(c({},a),{},{title:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter project title..."})]}),(0,Eg.jsxs)("div",{children:[(0,Eg.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,Eg.jsx)("textarea",{value:a.description,onChange:e=>l(c(c({},a),{},{description:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:"Describe the project..."})]}),(0,Eg.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Eg.jsxs)("div",{children:[(0,Eg.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration"}),(0,Eg.jsx)("input",{type:"text",value:a.duration,onChange:e=>l(c(c({},a),{},{duration:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., 2 weeks"})]}),(0,Eg.jsxs)("div",{children:[(0,Eg.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Due Date *"}),(0,Eg.jsx)("input",{type:"date",value:a.dueDate,onChange:e=>l(c(c({},a),{},{dueDate:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,Eg.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Eg.jsxs)("div",{children:[(0,Eg.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Related Topic"}),(0,Eg.jsx)("select",{value:a.topic,onChange:e=>l(c(c({},a),{},{topic:parseInt(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:u.map(e=>(0,Eg.jsx)("option",{value:e.id,children:e.topic},e.id))})]}),(0,Eg.jsxs)("div",{children:[(0,Eg.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subtopic"}),(0,Eg.jsx)("input",{type:"text",value:a.subtopic,onChange:e=>l(c(c({},a),{},{subtopic:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., PCR Optimization"})]})]}),(0,Eg.jsxs)("div",{children:[(0,Eg.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deliverables"}),(0,Eg.jsxs)("div",{className:"space-y-2",children:[a.deliverables.map((e,t)=>(0,Eg.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Eg.jsx)("input",{type:"text",value:e,onChange:e=>((e,t)=>{const n=[...a.deliverables];n[e]=t,l(c(c({},a),{},{deliverables:n}))})(t,e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Deliverable ".concat(t+1)}),(0,Eg.jsx)("button",{onClick:()=>(e=>{const t=a.deliverables.filter((t,n)=>n!==e);l(c(c({},a),{},{deliverables:t}))})(t),className:"px-2 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700",disabled:1===a.deliverables.length,children:"Remove"})]},t)),(0,Eg.jsx)("button",{onClick:()=>{l(c(c({},a),{},{deliverables:[...a.deliverables,""]}))},className:"px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700",children:"Add Deliverable"})]})]}),(0,Eg.jsxs)("div",{className:"flex justify-end space-x-4 pt-4",children:[(0,Eg.jsx)("button",{onClick:()=>t(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,Eg.jsx)("button",{onClick:async()=>{if(!a.title.trim()||!a.dueDate)return void alert("Please fill in the required fields (Title and Due Date)");const e={title:a.title,description:a.description,duration:a.duration,topic:a.topic,subtopic:a.subtopic,deliverables:a.deliverables.filter(e=>e.trim()),dueDate:a.dueDate};let n=(null===s||void 0===s?void 0:s.id)||Date.now().toString(),r=c({id:n},e);try{i(!0),s?await(async(e,t)=>{await md(fu(hg,kg,e),t,{merge:!0})})(n,e):(r=await(async e=>c({id:(await yd(hu(hg,kg),e)).id},e))(e),n=r.id)}catch(u){console.error("Failed to save project to Firebase:",u),alert(s?"Changes saved locally (cloud sync unavailable).":"Project saved locally (cloud sync unavailable).")}finally{i(!1)}h(t=>[...t.filter(e=>e.id!==n),c({id:n},e)].sort((e,t)=>new Date(e.dueDate)-new Date(t.dueDate))),l({title:"",description:"",duration:"",topic:1,subtopic:"",deliverables:[""],dueDate:""}),o(null),t(!1)},disabled:n,className:"px-6 py-2 rounded-lg transition-colors ".concat(n?"bg-blue-300 text-white cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"),children:n?"Saving\u2026":s?"Update Project":"Add Project"})]})]})]}),0===d.length?(0,Eg.jsxs)("div",{className:"text-center py-12",children:[(0,Eg.jsx)("span",{className:"text-6xl text-gray-300",children:"\ud83d\udccb"}),(0,Eg.jsx)("h3",{className:"text-xl font-semibold text-gray-500 mt-4",children:"No projects assigned"}),(0,Eg.jsx)("p",{className:"text-gray-400",children:"Add your first project to get started"})]}):(0,Eg.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:d.map(e=>(0,Eg.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,Eg.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,Eg.jsx)("h3",{className:"text-xl font-semibold text-gray-900",children:e.title}),(0,Eg.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Eg.jsxs)("span",{className:"text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded",children:["Due: ",new Date(e.dueDate).toLocaleDateString()]}),(0,Eg.jsx)("button",{onClick:()=>(e=>{l({title:e.title||"",description:e.description||"",duration:e.duration||"",topic:e.topic||1,subtopic:e.subtopic||"",deliverables:Array.isArray(e.deliverables)&&e.deliverables.length?e.deliverables:[""],dueDate:e.dueDate||""}),o(e),t(!0)})(e),className:"text-blue-600 hover:text-blue-700 text-sm",title:"Edit project",children:"Edit"}),(0,Eg.jsx)("button",{onClick:()=>p(e.id),className:"text-red-600 hover:text-red-700 text-sm",title:"Remove project",children:"\u2715"})]})]}),e.description&&(0,Eg.jsx)("p",{className:"text-gray-600 mb-4",children:e.description}),(0,Eg.jsxs)("div",{className:"space-y-3",children:[e.deliverables.length>0&&(0,Eg.jsxs)("div",{children:[(0,Eg.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Deliverables:"}),(0,Eg.jsx)("ul",{className:"list-disc list-inside text-sm text-gray-600 space-y-1",children:e.deliverables.map((e,t)=>(0,Eg.jsx)("li",{children:e},t))})]}),(0,Eg.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Eg.jsxs)("div",{className:"text-sm text-gray-500",children:[e.duration&&(0,Eg.jsxs)("span",{children:["Duration: ",e.duration]}),e.subtopic&&(0,Eg.jsxs)("span",{className:"ml-2 text-blue-600",children:["\u2022 ",e.subtopic]})]}),(0,Eg.jsx)("button",{className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:"Start Project"})]})]})]},e.id))})]})}function Rg(e){let{questions:t,onAddQuestion:n,onUpdateQuestion:i,onDeleteQuestion:s}=e;const[o,a]=(0,r.useState)({}),[l,d]=(0,r.useState)(!1),[h,f]=(0,r.useState)(!1),[p,m]=(0,r.useState)(null),[g,y]=(0,r.useState)("All"),[v,b]=(0,r.useState)("All"),[w,x]=(0,r.useState)("default"),[S,_]=(0,r.useState)({question:"",options:["","","",""],correctAnswer:0,explanation:"",topic:1,subtopic:"",level:"Core",difficulty:"Medium"}),k=r.useMemo(()=>{if("All"===g){const e=new Set;return t.forEach(t=>{t.subtopic&&e.add(t.subtopic)}),Array.from(e).sort()}const e=u.find(e=>e.id===parseInt(g));if(e){const n=new Set(e.subtopics);return t.forEach(t=>{t.topic===e.id&&t.subtopic&&n.add(t.subtopic)}),Array.from(n).sort()}return[]},[g,t]),E=()=>{let e=[...t];return"All"!==g&&(e=e.filter(e=>e.topic===parseInt(g))),"All"!==v&&(e=e.filter(e=>e.subtopic===v)),e},T=(e=>{const t=[...e];switch(w){case"topic":return t.sort((e,t)=>{if(e.topic!==t.topic)return e.topic-t.topic;const n=e.subtopic||"",r=t.subtopic||"";return n.localeCompare(r)});case"subtopic":return t.sort((e,t)=>{const n=e.subtopic||"",r=t.subtopic||"";return n!==r?n.localeCompare(r):e.topic-t.topic});case"difficulty":const e={Easy:1,Medium:2,Hard:3};return t.sort((t,n)=>(e[t.difficulty]||4)-(e[n.difficulty]||4));case"level":const n={Core:1,"Advanced Resident":2};return t.sort((e,t)=>(n[e.level]||3)-(n[t.level]||3));default:return t}})(E());(0,r.useEffect)(()=>{"All"===g?b("All"):"All"===v||k.includes(v)||b("All")},[g,k,v]);const C=(()=>{let e=0,t=0;return E().forEach(n=>{void 0!==o[n.id]&&(t++,o[n.id]===n.correctAnswer&&e++)}),{correct:e,total:t}})();return(0,Eg.jsxs)("div",{className:"space-y-6",children:[(0,Eg.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Eg.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:"Board Questions Bank"}),(0,Eg.jsxs)("div",{className:"flex flex-wrap gap-2",children:[Object.keys(o).length>0&&(0,Eg.jsxs)("button",{onClick:()=>d(!l),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:[l?"Hide":"Show"," Results (",C.correct,"/",C.total,")"]}),(0,Eg.jsx)("button",{onClick:()=>f(!h),className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors",children:h?"Cancel":"Add Question"}),(0,Eg.jsx)("button",{onClick:()=>{const e=t.filter(e=>e.isCustom),n=JSON.stringify(e,null,2),r=new Blob([n],{type:"application/json"}),i=URL.createObjectURL(r),s=document.createElement("a");s.href=i,s.download="customQuestions.json",s.click(),URL.revokeObjectURL(i),alert("Exported ".concat(e.length," custom questions to customQuestions.json"))},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"\ud83d\udce4 Export"}),(0,Eg.jsxs)("label",{className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors cursor-pointer",children:["\ud83d\udce5 Import",(0,Eg.jsx)("input",{type:"file",accept:".json",onChange:e=>{const t=e.target.files[0];if(t){const r=new FileReader;r.onload=t=>{try{const r=JSON.parse(t.target.result);Array.isArray(r)?(r.forEach(e=>{n({question:e.question,options:e.options,correctAnswer:e.correctAnswer,explanation:e.explanation||"",topic:e.topic,subtopic:e.subtopic||"",level:e.level||"Core",difficulty:e.difficulty||"Medium"})}),alert("Successfully imported ".concat(r.length," questions!")),e.target.value=""):alert("Invalid file format. Expected an array of questions.")}catch(r){alert("Error parsing JSON file: "+r.message)}},r.readAsText(t)}},className:"hidden"})]})]})]}),(0,Eg.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4",children:[(0,Eg.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,Eg.jsxs)("div",{children:[(0,Eg.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Topic"}),(0,Eg.jsxs)("select",{value:g,onChange:e=>y(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[(0,Eg.jsx)("option",{value:"All",children:"All Topics"}),u.map(e=>(0,Eg.jsx)("option",{value:e.id,children:e.topic},e.id))]})]}),(0,Eg.jsxs)("div",{children:[(0,Eg.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Subtopic"}),(0,Eg.jsxs)("select",{value:v,onChange:e=>b(e.target.value),disabled:"All"===g,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent ".concat("All"===g?"bg-gray-100 cursor-not-allowed":""),children:[(0,Eg.jsx)("option",{value:"All",children:"All Subtopics"}),k.map(e=>(0,Eg.jsx)("option",{value:e,children:e},e))]})]}),(0,Eg.jsxs)("div",{children:[(0,Eg.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sort By"}),(0,Eg.jsxs)("select",{value:w,onChange:e=>x(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[(0,Eg.jsx)("option",{value:"default",children:"Default Order"}),(0,Eg.jsx)("option",{value:"topic",children:"Topic"}),(0,Eg.jsx)("option",{value:"subtopic",children:"Subtopic"}),(0,Eg.jsx)("option",{value:"difficulty",children:"Difficulty"}),(0,Eg.jsx)("option",{value:"level",children:"Level"})]})]}),(0,Eg.jsx)("div",{className:"flex items-end",children:(0,Eg.jsx)("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg",children:(0,Eg.jsxs)("span",{className:"text-sm text-gray-700",children:["Showing ",(0,Eg.jsx)("span",{className:"font-semibold",children:T.length})," of"," ",(0,Eg.jsx)("span",{className:"font-semibold",children:t.length})," questions"]})})})]}),("All"!==g||"All"!==v||"default"!==w)&&(0,Eg.jsx)("div",{className:"mt-4 flex justify-end",children:(0,Eg.jsx)("button",{onClick:()=>{y("All"),b("All"),x("default")},className:"px-4 py-2 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Clear Filters & Sort"})})]}),l&&(0,Eg.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,Eg.jsx)("h3",{className:"text-lg font-semibold text-green-900 mb-2",children:"Quiz Results"}),(0,Eg.jsxs)("p",{className:"text-green-800",children:["You answered ",C.correct," out of ",C.total," questions correctly (",C.total>0?Math.round(C.correct/C.total*100):0,"%)."]})]}),h&&(0,Eg.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,Eg.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:p?"Edit Question":"Add New Question"}),(0,Eg.jsxs)("div",{className:"space-y-4",children:[(0,Eg.jsxs)("div",{children:[(0,Eg.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Question *"}),(0,Eg.jsx)("textarea",{value:S.question,onChange:e=>_(c(c({},S),{},{question:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",rows:3,placeholder:"Enter your question here..."})]}),(0,Eg.jsxs)("div",{children:[(0,Eg.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Answer Options *"}),(0,Eg.jsx)("div",{className:"space-y-2",children:S.options.map((e,t)=>(0,Eg.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Eg.jsxs)("span",{className:"text-sm font-medium text-gray-600 w-8",children:[String.fromCharCode(65+t),")"]}),(0,Eg.jsx)("input",{type:"text",value:e,onChange:e=>((e,t)=>{const n=[...S.options];n[e]=t,_(c(c({},S),{},{options:n}))})(t,e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Option ".concat(String.fromCharCode(65+t))}),(0,Eg.jsx)("input",{type:"radio",name:"correctAnswer",checked:S.correctAnswer===t,onChange:()=>_(c(c({},S),{},{correctAnswer:t})),className:"w-4 h-4 text-purple-600 focus:ring-purple-500"}),(0,Eg.jsx)("span",{className:"text-sm text-gray-500",children:"Correct"})]},t))})]}),(0,Eg.jsxs)("div",{children:[(0,Eg.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Explanation"}),(0,Eg.jsx)("textarea",{value:S.explanation,onChange:e=>_(c(c({},S),{},{explanation:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",rows:2,placeholder:"Explain why this is the correct answer..."})]}),(0,Eg.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Eg.jsxs)("div",{children:[(0,Eg.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Topic"}),(0,Eg.jsx)("select",{value:S.topic,onChange:e=>_(c(c({},S),{},{topic:parseInt(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:u.map(e=>(0,Eg.jsx)("option",{value:e.id,children:e.topic},e.id))})]}),(0,Eg.jsxs)("div",{children:[(0,Eg.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Level"}),(0,Eg.jsxs)("select",{value:S.level,onChange:e=>_(c(c({},S),{},{level:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[(0,Eg.jsx)("option",{value:"Core",children:"Core"}),(0,Eg.jsx)("option",{value:"Advanced Resident",children:"Advanced Resident"})]})]}),(0,Eg.jsxs)("div",{children:[(0,Eg.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Difficulty"}),(0,Eg.jsxs)("select",{value:S.difficulty,onChange:e=>_(c(c({},S),{},{difficulty:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[(0,Eg.jsx)("option",{value:"Easy",children:"Easy"}),(0,Eg.jsx)("option",{value:"Medium",children:"Medium"}),(0,Eg.jsx)("option",{value:"Hard",children:"Hard"})]})]})]}),(0,Eg.jsxs)("div",{children:[(0,Eg.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subtopic"}),(0,Eg.jsx)("input",{type:"text",value:S.subtopic,onChange:e=>_(c(c({},S),{},{subtopic:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"e.g., Hardy Weinberg Principle"})]}),(0,Eg.jsxs)("div",{className:"flex justify-end space-x-4 pt-4",children:[(0,Eg.jsx)("button",{onClick:()=>{_({question:"",options:["","","",""],correctAnswer:0,explanation:"",topic:1,subtopic:"",level:"Core",difficulty:"Medium"}),m(null),f(!1)},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,Eg.jsx)("button",{onClick:async()=>{if(S.question.trim()&&S.options.every(e=>e.trim()))try{p?(await i(p.id,S),alert("Question updated successfully!"),m(null)):(await n(S),alert("Question added successfully!")),_({question:"",options:["","","",""],correctAnswer:0,explanation:"",topic:1,subtopic:"",level:"Core",difficulty:"Medium"}),f(!1)}catch(e){console.error("Error updating question:",e),alert("Question saved locally (cloud sync currently unavailable).")}else alert("Please fill in all required fields")},className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:p?"Update Question":"Add Question"})]})]})]}),(0,Eg.jsx)("div",{className:"space-y-6",children:0===T.length?(0,Eg.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 text-center",children:(0,Eg.jsx)("p",{className:"text-yellow-800",children:"No questions found matching the selected filters."})}):T.map((e,t)=>{var n;return(0,Eg.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,Eg.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,Eg.jsxs)("div",{className:"flex-1",children:[(0,Eg.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["Question ",t+1,": ",e.question]}),(0,Eg.jsxs)("div",{className:"flex flex-wrap gap-2 mt-2",children:[e.isCustom&&(0,Eg.jsx)("span",{className:"inline-block px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full",children:"Custom Question"}),(0,Eg.jsx)("span",{className:"inline-block px-2 py-1 bg-indigo-100 text-indigo-800 text-xs rounded-full",children:(null===(n=u.find(t=>t.id===e.topic))||void 0===n?void 0:n.topic)||"Topic ".concat(e.topic)}),e.subtopic&&(0,Eg.jsx)("span",{className:"inline-block px-2 py-1 bg-gray-100 text-gray-800 text-xs rounded-full",children:e.subtopic})]})]}),(0,Eg.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,Eg.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat("Core"===e.level?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"),children:e.level}),(0,Eg.jsx)("span",{className:"px-2 py-1 rounded-full text-xs ".concat("Easy"===e.difficulty?"bg-green-100 text-green-800":"Medium"===e.difficulty?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:e.difficulty}),(0,Eg.jsxs)("div",{className:"flex space-x-2",children:[(0,Eg.jsx)("button",{onClick:()=>(e=>{_({question:e.question,options:e.options,correctAnswer:e.correctAnswer,explanation:e.explanation||"",topic:e.topic,subtopic:e.subtopic||"",level:e.level||"Core",difficulty:e.difficulty||"Medium"}),m(e),f(!0)})(e),className:"px-3 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700 transition-colors",children:"Edit"}),(0,Eg.jsx)("button",{onClick:()=>{return t=e.id,void(window.confirm("Are you sure you want to delete this question?")&&(s(t),alert("Question deleted successfully!")));var t},className:"px-3 py-1 bg-red-600 text-white text-xs rounded hover:bg-red-700 transition-colors",children:"Delete"})]})]})]}),(0,Eg.jsx)("div",{className:"space-y-2 mb-4",children:e.options.map((t,n)=>(0,Eg.jsxs)("label",{className:"flex items-center space-x-3 cursor-pointer",children:[(0,Eg.jsx)("input",{type:"radio",name:"question-".concat(e.id),value:n,checked:o[e.id]===n,onChange:()=>{return t=e.id,r=n,void a(e=>c(c({},e),{},{[t]:r}));var t,r},className:"w-4 h-4 text-blue-600 focus:ring-blue-500"}),(0,Eg.jsx)("span",{className:"text-sm ".concat(l?n===e.correctAnswer?"text-green-700 font-semibold":o[e.id]===n?"text-red-700 font-semibold":"text-gray-700":"text-gray-700"),children:t})]},n))}),l&&(0,Eg.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,Eg.jsx)("h4",{className:"font-semibold text-blue-900 mb-2",children:"Explanation:"}),(0,Eg.jsx)("p",{className:"text-blue-800 text-sm",children:e.explanation})]})]},e.id)})})]})}function Pg(e){let{schedule:t,addToSchedule:n}=e;const[i,s]=(0,r.useState)("year1"),[o,a]=(0,r.useState)(null),[l,c]=(0,r.useState)("2024-01-01"),[u,d]=(0,r.useState)(0);(0,r.useEffect)(()=>{console.log("Start date state changed to:",l),d(e=>e+1)},[l]);const h=(e,t,n)=>{const[r,i]=l.split("-").map(Number);console.log("generateScheduleForMonth called with:",{startDate:l,startYear:r,startMonth:i,year:t,monthIndex:n,monthData:e.name});const s=r+(t-1),o=i+n,a=s+Math.floor((o-1)/12),c=(o-1)%12+1,u=new Date(a,c-1,1),d=new Date(a,c,0);return console.log("Calculated dates:",{targetYear:s,targetMonth:o,finalYear:a,finalMonth:c,firstDay:u.toISOString().split("T")[0],lastDay:d.toISOString().split("T")[0]}),{month:e.name,year:a,firstDay:u.toISOString().split("T")[0],lastDay:d.toISOString().split("T")[0],topics:e.topics,projects:e.projects,assessments:e.assessments}},f=(e,n,r)=>{const i=h(e,n,r);console.log("Scheduling for:",{monthData:e.name,year:n,monthIndex:r,startDate:l,calculatedFirstDay:i.firstDay});const s=t.filter(t=>t.topic!==e.topics[0].topic);e.topics.forEach((e,t)=>{const[n,r,o]=i.firstDay.split("-").map(Number),a=new Date(n,r-1,o+7*t);console.log("Scheduling topic ".concat(t+1,": ").concat(e.topic," for ").concat(a.toISOString().split("T")[0]));const l={id:Date.now()+t,topic:e.topic,date:a.toISOString().split("T")[0],level:e.level,duration:e.duration,completed:!1};s.push(l)});const o=s.sort((e,t)=>new Date(e.date)-new Date(t.date));localStorage.setItem("curriculumSchedule",JSON.stringify(o)),window.location.reload(),alert("Successfully scheduled ".concat(e.topics.length," topics for ").concat(e.name,"!"))},m="year1"===i?p.year1:p.year2,g="year1"===i?1:2;return(0,Eg.jsxs)("div",{className:"space-y-8",children:[(0,Eg.jsxs)("div",{className:"text-center",children:[(0,Eg.jsx)("h2",{className:"text-4xl font-extrabold text-gray-900 mb-4",children:"2-Year Curriculum Planner"}),(0,Eg.jsx)("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Comprehensive 24-month curriculum with monthly sessions, projects, and assessments"})]}),(0,Eg.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,Eg.jsxs)("div",{className:"flex justify-center space-x-4 mb-6",children:[(0,Eg.jsx)("button",{onClick:()=>s("year1"),className:"px-6 py-3 rounded-lg font-semibold transition-colors ".concat("year1"===i?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Year 1 (Months 1-12)"}),(0,Eg.jsx)("button",{onClick:()=>s("year2"),className:"px-6 py-3 rounded-lg font-semibold transition-colors ".concat("year2"===i?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Year 2 (Months 13-24)"})]}),(0,Eg.jsxs)("div",{className:"flex justify-center items-center space-x-4 mb-6",children:[(0,Eg.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Program Start Date:"}),(0,Eg.jsx)("input",{type:"date",value:l,onChange:e=>{console.log("Start date changed to:",e.target.value),c(e.target.value)},className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,Eg.jsxs)("div",{className:"text-sm text-gray-500",children:["Current: ",l]})]}),(0,Eg.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:[(0,Eg.jsxs)("h4",{className:"font-semibold text-yellow-800 mb-2",children:["Date Calculation Test (Update #",u,"):"]}),(0,Eg.jsxs)("p",{className:"text-sm text-yellow-700",children:["Current start date state: ",(0,Eg.jsx)("strong",{children:l})]}),(0,Eg.jsxs)("p",{className:"text-sm text-yellow-700",children:["Month 1 (January) should be: ",(0,Eg.jsx)("strong",{children:(()=>{const[e,t]=l.split("-").map(Number);return new Date(e,t-1,1).toISOString().split("T")[0]})()})," (Start month: ",(()=>{const[e,t]=l.split("-").map(Number);return new Date(e,t-1,1).toLocaleDateString("en-US",{month:"long",year:"numeric"})})(),")"]}),(0,Eg.jsxs)("p",{className:"text-sm text-yellow-700",children:["Month 2 (February) should be: ",(0,Eg.jsx)("strong",{children:(()=>{const[e,t]=l.split("-").map(Number);return new Date(e,t,1).toISOString().split("T")[0]})()})]}),(0,Eg.jsxs)("p",{className:"text-sm text-yellow-700",children:["Month 3 (March) should be: ",(0,Eg.jsx)("strong",{children:(()=>{const[e,t]=l.split("-").map(Number);return new Date(e,t+1,1).toISOString().split("T")[0]})()})]}),(0,Eg.jsx)("button",{onClick:()=>{const e=new Date(l);console.log("Current startDate state:",l),console.log("Date object:",e),console.log("getMonth():",e.getMonth()),console.log("getFullYear():",e.getFullYear()),console.log("Month name:",e.toLocaleDateString("en-US",{month:"long"})),console.log("Force update count:",u)},className:"mt-2 px-3 py-1 bg-yellow-600 text-white text-xs rounded hover:bg-yellow-700",children:"Test State"})]},u),(0,Eg.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-8",children:m.map((e,t)=>(0,Eg.jsxs)("div",{className:"border-2 rounded-lg p-4 cursor-pointer transition-all duration-200 ".concat(o===e.month?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300 hover:bg-gray-50"),onClick:()=>a(o===e.month?null:e.month),children:[(0,Eg.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,Eg.jsx)("h3",{className:"font-semibold text-gray-900",children:e.name}),(0,Eg.jsxs)("span",{className:"text-sm text-gray-500",children:["Month ",e.month]})]}),(0,Eg.jsxs)("div",{className:"space-y-2",children:[(0,Eg.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,Eg.jsx)("strong",{children:"Topics:"})," ",e.topics.length]}),(0,Eg.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,Eg.jsx)("strong",{children:"Projects:"})," ",e.projects.length]}),(0,Eg.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,Eg.jsx)("strong",{children:"Assessments:"})," ",e.assessments.length]})]}),(0,Eg.jsx)("div",{className:"mt-3 flex space-x-2",children:(0,Eg.jsx)("button",{onClick:n=>{n.stopPropagation(),f(e,g,t)},className:"text-xs bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700 transition-colors",children:"Schedule All"})})]},e.month))}),o&&(0,Eg.jsx)("div",{className:"bg-gray-50 rounded-lg p-6",children:(()=>{const e=m.find(e=>e.month===o),t=h(e,g,m.findIndex(e=>e.month===o));return(0,Eg.jsxs)("div",{children:[(0,Eg.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Eg.jsxs)("h3",{className:"text-2xl font-bold text-gray-900",children:[e.name," - Month ",e.month]}),(0,Eg.jsxs)("div",{className:"text-sm text-gray-600",children:[t.firstDay," to ",t.lastDay]})]}),(0,Eg.jsx)("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg",children:(0,Eg.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,Eg.jsx)("strong",{children:"Debug Info:"})," Start Date: ",l," | Year: ",g," | Month Index: ",m.findIndex(e=>e.month===o)," | Calculated: ",t.firstDay]})}),(0,Eg.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,Eg.jsxs)("div",{className:"bg-white rounded-lg p-4",children:[(0,Eg.jsxs)("h4",{className:"font-semibold text-gray-900 mb-3 flex items-center",children:[(0,Eg.jsx)("span",{className:"text-blue-600 mr-2",children:"\ud83d\udcda"}),"Topics (",e.topics.length,")"]}),(0,Eg.jsx)("div",{className:"space-y-3",children:e.topics.map((e,t)=>(0,Eg.jsxs)("div",{className:"border-l-4 border-blue-500 pl-3",children:[(0,Eg.jsx)("div",{className:"font-medium text-gray-900",children:e.topic}),(0,Eg.jsx)("div",{className:"text-sm text-gray-600",children:e.focus}),(0,Eg.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[e.subtopics.slice(0,3).join(", "),e.subtopics.length>3&&"..."]})]},t))})]}),(0,Eg.jsxs)("div",{className:"bg-white rounded-lg p-4",children:[(0,Eg.jsxs)("h4",{className:"font-semibold text-gray-900 mb-3 flex items-center",children:[(0,Eg.jsx)("span",{className:"text-green-600 mr-2",children:"\ud83d\udd2c"}),"Projects (",e.projects.length,")"]}),(0,Eg.jsx)("div",{className:"space-y-2",children:e.projects.map((e,t)=>(0,Eg.jsx)("div",{className:"text-sm text-gray-700 bg-green-50 p-2 rounded",children:e},t))})]}),(0,Eg.jsxs)("div",{className:"bg-white rounded-lg p-4",children:[(0,Eg.jsxs)("h4",{className:"font-semibold text-gray-900 mb-3 flex items-center",children:[(0,Eg.jsx)("span",{className:"text-purple-600 mr-2",children:"\ud83d\udcdd"}),"Assessments (",e.assessments.length,")"]}),(0,Eg.jsx)("div",{className:"space-y-2",children:e.assessments.map((e,t)=>(0,Eg.jsx)("div",{className:"text-sm text-gray-700 bg-purple-50 p-2 rounded",children:e},t))})]})]}),(0,Eg.jsx)("div",{className:"mt-6 flex justify-center",children:(0,Eg.jsxs)("button",{onClick:()=>f(e,g,m.findIndex(e=>e.month===o)),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors font-semibold",children:["Schedule All Topics for ",e.name]})})]})})()})]}),(0,Eg.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,Eg.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Curriculum Progress Overview"}),(0,Eg.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Eg.jsxs)("div",{children:[(0,Eg.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Year 1 Progress"}),(0,Eg.jsx)("div",{className:"space-y-2",children:p.year1.map((e,n)=>{const r=t.filter(t=>e.topics.some(e=>e.topic===t.topic)).length,i=e.topics.length,s=i>0?r/i*100:0;return(0,Eg.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Eg.jsx)("span",{className:"text-sm text-gray-700",children:e.name}),(0,Eg.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Eg.jsx)("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:(0,Eg.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(s,"%")}})}),(0,Eg.jsxs)("span",{className:"text-xs text-gray-500",children:[r,"/",i]})]})]},e.month)})})]}),(0,Eg.jsxs)("div",{children:[(0,Eg.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Year 2 Progress"}),(0,Eg.jsx)("div",{className:"space-y-2",children:p.year2.map((e,n)=>{const r=t.filter(t=>e.topics.some(e=>e.topic===t.topic)).length,i=e.topics.length,s=i>0?r/i*100:0;return(0,Eg.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Eg.jsx)("span",{className:"text-sm text-gray-700",children:e.name}),(0,Eg.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Eg.jsx)("div",{className:"w-20 bg-gray-200 rounded-full h-2",children:(0,Eg.jsx)("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(s,"%")}})}),(0,Eg.jsxs)("span",{className:"text-xs text-gray-500",children:[r,"/",i]})]})]},e.month)})})]})]})]})]})}const Dg=function(){const[e,t]=(0,r.useState)("dashboard"),[n,i]=(0,r.useState)(null),[s,o]=(0,r.useState)("All"),[a,l]=(0,r.useState)([]),[d,f]=(0,r.useState)([]),[p,m]=(0,r.useState)(()=>{const e=localStorage.getItem("deletedDefaultQuestionIds");return e?JSON.parse(e):[]}),g=e=>{const t=e.date&&"object"===typeof e.date&&e.date.toDate?e.date.toDate().toISOString().split("T")[0]:e.date;return c(c({},e),{},{id:String(e.id),date:t||"",completed:Boolean(e.completed),completedSubtopics:Array.isArray(e.completedSubtopics)?e.completedSubtopics:[]})},y=e=>[...e].sort((e,t)=>new Date(e.date||0)-new Date(t.date||0));(0,r.useEffect)(()=>{(async()=>{try{const e=await(async()=>(await pd(hu(hg,bg))).docs.map(e=>c({id:e.id},e.data())))();if(e.length>0){const t=y(e.map(g));return l(t),void localStorage.setItem("curriculumSchedule",JSON.stringify(t))}}catch(t){console.error("Failed to load schedule from Firebase:",t)}const e=localStorage.getItem("curriculumSchedule");if(e){const t=JSON.parse(e).map(g);l(y(t))}})()},[]),(0,r.useEffect)(()=>{(async()=>{try{const e=await mg();f(e)}catch(e){console.error("Failed to load questions from Firebase:",e);const t=localStorage.getItem("customBoardQuestions");t&&f(JSON.parse(t))}})()},[]);const v=e=>{const t=y(e.map(g));l(t),localStorage.setItem("curriculumSchedule",JSON.stringify(t)),(async e=>{const t=hu(hg,bg),n=await pd(t),r=xd(hg);n.forEach(e=>r.delete(e.ref)),e.forEach(e=>{const{id:n}=e,i=Sd(e,vg),s=fu(t,String(n));r.set(s,i)}),await r.commit()})(t).catch(e=>{console.error("Failed to sync schedule with Firebase:",e)})},b="All"===s?u:u.filter(e=>e.level===s),w=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r={id:Date.now().toString(),topic:e.topic,subtopic:n,date:t,level:e.level,duration:e.duration,completed:!1,completedSubtopics:[]};v([...a,r].sort((e,t)=>new Date(e.date)-new Date(t.date)))},x=async e=>{const t=String(e);try{await(async e=>{try{const t=fu(hg,pg,e);await gd(t)}catch(t){throw console.error("Error deleting question:",t),t}})(t),f(e=>{const n=e.filter(e=>String(e.id)!==t);return localStorage.setItem("customBoardQuestions",JSON.stringify(n)),n})}catch(n){console.error("Failed to delete question from Firebase:",n),f(e=>{const n=e.filter(e=>String(e.id)!==t);return localStorage.setItem("customBoardQuestions",JSON.stringify(n)),n}),console.log("Question deleted locally as fallback")}},S=[...h.filter(e=>!p.includes(Number(e.id))),...d];return(0,Eg.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[(0,Eg.jsx)("header",{className:"bg-white shadow-lg border-b border-gray-200",children:(0,Eg.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,Eg.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,Eg.jsxs)("div",{className:"flex items-center",children:[(0,Eg.jsx)("div",{className:"flex-shrink-0",children:(0,Eg.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg flex items-center justify-center",children:(0,Eg.jsx)("span",{className:"text-white font-bold text-lg",children:"MGP"})})}),(0,Eg.jsxs)("div",{className:"ml-4",children:[(0,Eg.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Molecular Genetic Pathology"}),(0,Eg.jsx)("p",{className:"text-sm text-gray-500",children:"Residency Curriculum Management System"})]})]}),(0,Eg.jsxs)("nav",{className:"hidden md:flex space-x-8",children:[(0,Eg.jsx)("button",{onClick:()=>t("dashboard"),className:"px-3 py-2 rounded-md text-sm font-medium ".concat("dashboard"===e?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-blue-600"),children:"Dashboard"}),(0,Eg.jsx)("button",{onClick:()=>t("curriculum"),className:"px-3 py-2 rounded-md text-sm font-medium ".concat("curriculum"===e?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-blue-600"),children:"MGP Curriculum"}),(0,Eg.jsx)("button",{onClick:()=>t("schedule"),className:"px-3 py-2 rounded-md text-sm font-medium ".concat("schedule"===e?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-blue-600"),children:"Schedule"}),(0,Eg.jsx)("button",{onClick:()=>t("resources"),className:"px-3 py-2 rounded-md text-sm font-medium ".concat("resources"===e?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-blue-600"),children:"Resources"}),(0,Eg.jsx)("button",{onClick:()=>t("projects"),className:"px-3 py-2 rounded-md text-sm font-medium ".concat("projects"===e?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-blue-600"),children:"Projects"}),(0,Eg.jsx)("button",{onClick:()=>t("questions"),className:"px-3 py-2 rounded-md text-sm font-medium ".concat("questions"===e?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-blue-600"),children:"Board Questions"}),(0,Eg.jsx)("button",{onClick:()=>t("planner"),className:"px-3 py-2 rounded-md text-sm font-medium ".concat("planner"===e?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-blue-600"),children:"2-Year Planner"})]})]})})}),(0,Eg.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:["dashboard"===e&&(0,Eg.jsx)(Tg,{schedule:a}),"curriculum"===e&&(0,Eg.jsx)(Cg,{topics:b,selectedLevel:s,setSelectedLevel:o,selectedTopic:n,setSelectedTopic:i,addToSchedule:w}),"schedule"===e&&(0,Eg.jsx)(Ng,{schedule:a,toggleScheduleItem:e=>{const t=a.map(t=>t.id===e?c(c({},t),{},{completed:!t.completed}):t);v(t)},updateScheduleItemDate:(e,t)=>{const n=a.map(n=>n.id===e?c(c({},n),{},{date:t}):n);v(n.sort((e,t)=>new Date(e.date)-new Date(t.date)))},removeScheduleItem:e=>{const t=a.filter(t=>t.id!==e);v(t)},toggleSubtopic:(e,t)=>{const n=a.map(n=>{if(n.id===e){const e=n.completedSubtopics||[],r=e.includes(t);return c(c({},n),{},{completedSubtopics:r?e.filter(e=>e!==t):[...e,t]})}return n});v(n)},addToSchedule:w}),"resources"===e&&(0,Eg.jsx)(Ig,{}),"projects"===e&&(0,Eg.jsx)(Ag,{}),"questions"===e&&(0,Eg.jsx)(Rg,{questions:S,onAddQuestion:async e=>{try{const t=await gg(e);return f(e=>[...e,t]),localStorage.setItem("customBoardQuestions",JSON.stringify([...d,t])),t}catch(t){const n=c(c({},e),{},{id:Date.now(),isCustom:!0,createdAt:(new Date).toISOString()}),r=[...d,n];throw f(r),localStorage.setItem("customBoardQuestions",JSON.stringify(r)),t}},onUpdateQuestion:async(e,t)=>{const n=Number(e),r=!isNaN(n)&&n>=1&&n<=3&&h.some(e=>Number(e.id)===n);if(r){m(e=>{if(e.includes(n))return e;const t=[...e,n];return localStorage.setItem("deletedDefaultQuestionIds",JSON.stringify(t)),t});try{const e=await gg(t);f(n=>{const r=n.some(e=>e.question===t.question&&e.topic===t.topic);if(r)return n.map(n=>n.question===t.question&&n.topic===t.topic?e:n);const i=[...n,e];return localStorage.setItem("customBoardQuestions",JSON.stringify(i)),i})}catch(i){console.error("Failed to save to Firebase, saving locally instead:",i);const e=c(c({},t),{},{id:Date.now().toString(),isCustom:!0,createdAt:(new Date).toISOString()});f(t=>{const n=[...t,e];return localStorage.setItem("customBoardQuestions",JSON.stringify(n)),n})}}else await(async(e,t)=>{const n=String(e);try{const e=await yg(n,t);f(t=>{const r=t.map(t=>String(t.id)===n?e:t);return localStorage.setItem("customBoardQuestions",JSON.stringify(r)),r})}catch(i){console.error("Failed to update question in Firebase:",i),f(e=>{const r=e.map(e=>String(e.id)===n?c(c(c({},e),t),{},{updatedAt:(new Date).toISOString()}):e);return localStorage.setItem("customBoardQuestions",JSON.stringify(r)),r}),console.log("Question updated locally as fallback")}})(String(e),t)},onDeleteQuestion:async e=>{const t=Number(e),n=!isNaN(t)&&t>=1&&t<=3&&h.some(e=>Number(e.id)===t);n?m(e=>{if(e.includes(t))return e;const n=[...e,t];return localStorage.setItem("deletedDefaultQuestionIds",JSON.stringify(n)),n}):await x(String(e))}}),"planner"===e&&(0,Eg.jsx)(Pg,{schedule:a,addToSchedule:w})]})]})},Og=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then(t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:s,getTTFB:o}=t;n(e),r(e),i(e),s(e),o(e)})};i.createRoot(document.getElementById("root")).render((0,Eg.jsx)(r.StrictMode,{children:(0,Eg.jsx)(Dg,{})})),Og()})();
//# sourceMappingURL=main.d86cc9ac.js.map